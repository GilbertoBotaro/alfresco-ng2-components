/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@angular/core"),require("rxjs/Rx"),require("ng2-alfresco-core"),require("@angular/material"),require("moment"),require("ng2-alfresco-datatable"),require("@angular/forms"),require("@angular/cdk/keycodes"),require("@angular/animations"),require("@angular/http")):"function"==typeof define&&define.amd?define(["@angular/core","rxjs/Rx","ng2-alfresco-core","@angular/material","moment","ng2-alfresco-datatable","@angular/forms","@angular/cdk/keycodes","@angular/animations","@angular/http"],t):"object"==typeof exports?exports["process-services"]=t(require("@angular/core"),require("rxjs/Rx"),require("ng2-alfresco-core"),require("@angular/material"),require("moment"),require("ng2-alfresco-datatable"),require("@angular/forms"),require("@angular/cdk/keycodes"),require("@angular/animations"),require("@angular/http")):e["process-services"]=t(e["@angular/core"],e["rxjs/Rx"],e["ng2-alfresco-core"],e["@angular/material"],e.moment,e["ng2-alfresco-datatable"],e["@angular/forms"],e["@angular/cdk/keycodes"],e["@angular/animations"],e["@angular/http"])}(this,function(e,t,i,n,o,r,a,s,l,d){return function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=275)}([function(t,i){t.exports=e},function(e,t,i){"use strict";t.a=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},t.b=function(e,t){return function(i,n){t(i,n,e)}};Object.setPrototypeOf||Array,Object.assign},function(e,i){e.exports=t},function(e,t){e.exports=i},function(e,t){e.exports=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"WidgetComponent",function(){return a});var n=i(1),o=i(0);i.n(o);const r={"(click)":"event($event)","(blur)":"event($event)","(change)":"event($event)","(focus)":"event($event)","(focusin)":"event($event)","(focusout)":"event($event)","(input)":"event($event)","(invalid)":"event($event)","(select)":"event($event)"};t.baseHost=r;let a=s=class{constructor(e){this.formService=e,this.readOnly=!1,this.fieldChanged=new o.EventEmitter}hasField(){return!!this.field}isRequired(){return!(!this.field||!this.field.required)||null}isValid(){return!!this.field.validationSummary}hasValue(){return this.field&&null!==this.field.value&&void 0!==this.field.value}isInvalidFieldRequired(){return!this.field.isValid&&!this.field.validationSummary&&this.isRequired()}ngAfterViewInit(){this.fieldChanged.emit(this.field)}checkVisibility(e){this.fieldChanged.emit(e)}onFieldChanged(e){this.fieldChanged.emit(e)}getHyperlinkUrl(e){let t=s.DEFAULT_HYPERLINK_URL;return e&&e.hyperlinkUrl&&(t=e.hyperlinkUrl,/^https?:\/\//i.test(t)||(t=`${s.DEFAULT_HYPERLINK_SCHEME}${t}`)),t}getHyperlinkText(e){return e?e.displayText||e.hyperlinkUrl:null}event(e){this.formService.formEvents.next(e)}};a.DEFAULT_HYPERLINK_URL="#",a.DEFAULT_HYPERLINK_SCHEME="http://",n.a([Object(o.Input)()],a.prototype,"readOnly",void 0),n.a([Object(o.Input)()],a.prototype,"field",void 0),n.a([Object(o.Output)()],a.prototype,"fieldChanged",void 0),a=s=n.a([Object(o.Component)({selector:"base-widget",template:"",host:r,encapsulation:o.ViewEncapsulation.None})],a);var s},function(e,t){e.exports=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"FormService",function(){return d});var n=i(1),o=i(0),r=(i.n(o),i(2)),a=(i.n(r),i(280)),s=i(22),l=i(33);i.n(l);let d=c=class{constructor(e,t,i){this.ecmModelService=e,this.apiService=t,this.logService=i,this.formLoaded=new r.Subject,this.formDataRefreshed=new r.Subject,this.formFieldValueChanged=new r.Subject,this.formEvents=new r.Subject,this.taskCompleted=new r.Subject,this.taskCompletedError=new r.Subject,this.taskSaved=new r.Subject,this.taskSavedError=new r.Subject,this.formContentClicked=new r.Subject,this.validateForm=new r.Subject,this.validateFormField=new r.Subject,this.validateDynamicTableRow=new r.Subject,this.executeOutcome=new r.Subject}get taskApi(){return this.apiService.getInstance().activiti.taskApi}get modelsApi(){return this.apiService.getInstance().activiti.modelsApi}get editorApi(){return this.apiService.getInstance().activiti.editorApi}get processApi(){return this.apiService.getInstance().activiti.processApi}get processInstanceVariablesApi(){return this.apiService.getInstance().activiti.processInstanceVariablesApi}get usersWorkflowApi(){return this.apiService.getInstance().activiti.usersWorkflowApi}get groupsApi(){return this.apiService.getInstance().activiti.groupsApi}parseForm(e,t,i=!1){if(e){let n=new s.FormModel(e,t,i,this);return e.fields||(n.outcomes=[new s.FormOutcomeModel(n,{id:"$custom",name:s.FormOutcomeModel.SAVE_ACTION,isSystem:!0})]),n}return null}createFormFromANode(e){return r.Observable.create(t=>{this.createForm(e).subscribe(i=>{this.ecmModelService.searchEcmType(e,l.EcmModelService.MODEL_NAME).subscribe(e=>{let n=new a.a(i.id,i.name,i.lastUpdatedByFullName,i.lastUpdated,e.entry.properties);this.addFieldsToAForm(i.id,n).subscribe(e=>{t.next(e),t.complete()},e=>this.handleError(e))},e=>this.handleError(e))},e=>this.handleError(e))})}createForm(e){let t={name:e,description:"",modelType:2,stencilSet:0};return r.Observable.fromPromise(this.modelsApi.createModel(t))}saveForm(e,t){return r.Observable.fromPromise(this.editorApi.saveForm(e,t))}addFieldsToAForm(e,t){return this.logService.log("addFieldsToAForm is deprecated in 1.7.0, use saveForm API instead"),r.Observable.fromPromise(this.editorApi.saveForm(e,t))}searchFrom(e){return r.Observable.fromPromise(this.modelsApi.getModels({modelType:2})).map(function(t){return t.data.find(t=>t.name===e)}).catch(e=>this.handleError(e))}getForms(){return r.Observable.fromPromise(this.modelsApi.getModels({modelType:2})).map(this.toJsonArray).catch(e=>this.handleError(e))}getProcessDefinitions(){return r.Observable.fromPromise(this.processApi.getProcessDefinitions({})).map(this.toJsonArray).catch(e=>this.handleError(e))}getProcessVarablesById(e){return r.Observable.fromPromise(this.processInstanceVariablesApi.getProcessInstanceVariables(e)).map(this.toJson).catch(e=>this.handleError(e))}getTasks(){return r.Observable.fromPromise(this.taskApi.listTasks({})).map(this.toJsonArray).catch(e=>this.handleError(e))}getTask(e){return r.Observable.fromPromise(this.taskApi.getTask(e)).map(this.toJson).catch(e=>this.handleError(e))}saveTaskForm(e,t){let i=JSON.stringify({values:t});return r.Observable.fromPromise(this.taskApi.saveTaskForm(e,i)).catch(e=>this.handleError(e))}completeTaskForm(e,t,i){let n={values:t};i&&(n.outcome=i);let o=JSON.stringify(n);return r.Observable.fromPromise(this.taskApi.completeTaskForm(e,o)).catch(e=>this.handleError(e))}getTaskForm(e){return r.Observable.fromPromise(this.taskApi.getTaskForm(e)).map(this.toJson).catch(e=>this.handleError(e))}getFormDefinitionById(e){return r.Observable.fromPromise(this.editorApi.getForm(e)).map(this.toJson).catch(e=>this.handleError(e))}getFormDefinitionByName(e){let t={filter:"myReusableForms",filterText:e,modelType:2};return r.Observable.fromPromise(this.modelsApi.getModels(t)).map(this.getFormId).catch(e=>this.handleError(e))}getStartFormInstance(e){return r.Observable.fromPromise(this.processApi.getProcessInstanceStartForm(e)).map(this.toJson).catch(e=>this.handleError(e))}getProcessIntance(e){return r.Observable.fromPromise(this.processApi.getProcessInstance(e)).map(this.toJson).catch(e=>this.handleError(e))}getStartFormDefinition(e){return r.Observable.fromPromise(this.processApi.getProcessDefinitionStartForm(e)).map(this.toJson).catch(e=>this.handleError(e))}getRestFieldValues(e,t){return r.Observable.fromPromise(this.taskApi.getRestFieldValues(e,t)).catch(e=>this.handleError(e))}getRestFieldValuesByProcessId(e,t){return r.Observable.fromPromise(this.processApi.getRestFieldValues(e,t)).catch(e=>this.handleError(e))}getRestFieldValuesColumnByProcessId(e,t,i){return r.Observable.fromPromise(this.processApi.getRestTableFieldValues(e,t,i)).catch(e=>this.handleError(e))}getRestFieldValuesColumn(e,t,i){return r.Observable.fromPromise(this.taskApi.getRestFieldValuesColumn(e,t,i)).catch(e=>this.handleError(e))}getUserProfileImageApi(e){return this.apiService.getInstance().activiti.userApi.getUserProfilePictureUrl(e)}getWorkflowUsers(e,t){let i={filter:e};return t&&(i.groupId=t),r.Observable.fromPromise(this.usersWorkflowApi.getUsers(i)).switchMap(e=>e.data||[]).map(e=>(e.userImage=this.getUserProfileImageApi(e.id),r.Observable.of(e))).combineAll().defaultIfEmpty([]).catch(e=>this.handleError(e))}getWorkflowGroups(e,t){let i={filter:e};return t&&(i.groupId=t),r.Observable.fromPromise(this.groupsApi.getGroups(i)).map(e=>e.data||[]).catch(e=>this.handleError(e))}getFormId(e){let t=null;return e&&e.data&&e.data.length>0&&(t=e.data[0].id),t}toJson(e){return e?e||{}:{}}toJsonArray(e){return e?e.data||[]:[]}handleError(e){let t=c.UNKNOWN_ERROR_MESSAGE;return e&&(t=e.message?e.message:e.status?`${e.status} - ${e.statusText}`:c.GENERIC_ERROR_MESSAGE),this.logService.error(t),r.Observable.throw(t)}};d.UNKNOWN_ERROR_MESSAGE="Unknown error",d.GENERIC_ERROR_MESSAGE="Server error",d=c=n.a([Object(o.Injectable)()],d);var c},,,,function(e,t){e.exports=r},,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t){this.form=e,this.json=t,t&&(this.fieldType=t.fieldType,this.id=t.id,this.name=t.name,this.type=t.type,this.tab=t.tab)}}t.FormWidgetModel=n},function(e,t){e.exports=a},,,,,,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(281);i.n(n);for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);var r=i(282);i.n(r);for(var o in r)"default"!==o&&function(e){i.d(t,e,function(){return r[e]})}(o);var a=i(23);i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);var s=i(283);i.n(s);for(var o in s)"default"!==o&&function(e){i.d(t,e,function(){return s[e]})}(o);var l=i(284);i.n(l);for(var o in l)"default"!==o&&function(e){i.d(t,e,function(){return l[e]})}(o);var d=i(14);i.d(t,"FormWidgetModel",function(){return d.FormWidgetModel});var c=i(87);i.n(c);for(var o in c)["FormWidgetModel","default"].indexOf(o)<0&&function(e){i.d(t,e,function(){return c[e]})}(o);var u=i(285);i.d(t,"FormModel",function(){return u.a});var p=i(51);i.d(t,"ContainerModel",function(){return p.a});var f=i(88);i.n(f);for(var o in f)["FormWidgetModel","FormModel","ContainerModel","default"].indexOf(o)<0&&function(e){i.d(t,e,function(){return f[e]})}(o);var m=i(91);i.d(t,"TabModel",function(){return m.a});var h=i(90);i.d(t,"FormOutcomeModel",function(){return h.a});var v=i(286);i.d(t,"FormOutcomeEvent",function(){return v.a});var g=i(34);i.d(t,"RequiredFieldValidator",function(){return g.RequiredFieldValidator}),i.d(t,"NumberFieldValidator",function(){return g.NumberFieldValidator}),i.d(t,"DateFieldValidator",function(){return g.DateFieldValidator}),i.d(t,"MinDateFieldValidator",function(){return g.MinDateFieldValidator}),i.d(t,"MaxDateFieldValidator",function(){return g.MaxDateFieldValidator}),i.d(t,"MinLengthFieldValidator",function(){return g.MinLengthFieldValidator}),i.d(t,"MaxLengthFieldValidator",function(){return g.MaxLengthFieldValidator}),i.d(t,"MinValueFieldValidator",function(){return g.MinValueFieldValidator}),i.d(t,"MaxValueFieldValidator",function(){return g.MaxValueFieldValidator}),i.d(t,"RegExFieldValidator",function(){return g.RegExFieldValidator}),i.d(t,"FixedValueFieldValidator",function(){return g.FixedValueFieldValidator}),i.d(t,"FORM_FIELD_VALIDATORS",function(){return g.FORM_FIELD_VALIDATORS});var y=i(92);i.d(t,"ContentLinkModel",function(){return y.ContentLinkModel});var b=i(89);i.n(b);for(var o in b)["FormWidgetModel","FormModel","ContainerModel","TabModel","FormOutcomeModel","FormOutcomeEvent","RequiredFieldValidator","NumberFieldValidator","DateFieldValidator","MinDateFieldValidator","MaxDateFieldValidator","MinLengthFieldValidator","MaxLengthFieldValidator","MinValueFieldValidator","MaxValueFieldValidator","RegExFieldValidator","FixedValueFieldValidator","FORM_FIELD_VALIDATORS","ContentLinkModel","default"].indexOf(o)<0&&function(e){i.d(t,e,function(){return b[e]})}(o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.isReadOnlyType=function(t){return e.READONLY_TYPES.indexOf(t)>-1},e.isContainerType=function(t){return t===e.CONTAINER||t===e.GROUP},e.CONTAINER="container",e.GROUP="group",e.DYNAMIC_TABLE="dynamic-table",e.TEXT="text",e.MULTILINE_TEXT="multi-line-text",e.DROPDOWN="dropdown",e.HYPERLINK="hyperlink",e.RADIO_BUTTONS="radio-buttons",e.DISPLAY_VALUE="readonly",e.READONLY_TEXT="readonly-text",e.UPLOAD="upload",e.TYPEAHEAD="typeahead",e.FUNCTIONAL_GROUP="functional-group",e.PEOPLE="people",e.BOOLEAN="boolean",e.NUMBER="integer",e.DATE="date",e.AMOUNT="amount",e.DOCUMENT="document",e.READONLY_TYPES=[e.HYPERLINK,e.DISPLAY_VALUE,e.READONLY_TEXT],e}();t.FormFieldTypes=n},,,,,,,,function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var i=this[t];i[2]?e.push("@media "+i[2]+"{"+i[1]+"}"):e.push(i[1])}return e.join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(n[r]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&n[a[0]]||(i&&!a[2]?a[2]=i:i&&(a[2]="("+a[2]+") and ("+i+")"),e.push(a))}},e}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this.isDefaultPrevented=!1,this.form=e}get defaultPrevented(){return this.isDefaultPrevented}preventDefault(){this.isDefaultPrevented=!0}}t.FormEvent=n},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),a=i(3),s=i(2),l=function(){function e(e,t){this.apiService=e,this.logService=t}return t=e,e.prototype.createEcmTypeForActivitiForm=function(e,t){var i=this;return s.Observable.create(function(n){i.searchActivitiEcmModel().subscribe(function(o){o?i.saveFomType(e,t).subscribe(function(e){n.next(e),n.complete()}):i.createActivitiEcmModel(e,t).subscribe(function(e){n.next(e),n.complete()})},function(e){return i.handleError(e)})})},e.prototype.searchActivitiEcmModel=function(){return this.getEcmModels().map(function(e){return e.list.entries.find(function(e){return e.entry.name===t.MODEL_NAME})})},e.prototype.createActivitiEcmModel=function(e,i){var n=this;return s.Observable.create(function(o){n.createEcmModel(t.MODEL_NAME,t.MODEL_NAMESPACE).subscribe(function(r){n.logService.info("model created",r),n.activeEcmModel(t.MODEL_NAME).subscribe(function(t){n.logService.info("model active",t),n.createEcmTypeWithProperties(e,i).subscribe(function(e){o.next(e),o.complete()})},function(e){return n.handleError(e)})},function(e){return n.handleError(e)})})},e.prototype.saveFomType=function(e,i){var n=this;return s.Observable.create(function(o){n.searchEcmType(e,t.MODEL_NAME).subscribe(function(t){n.logService.info("custom types",t),t?(o.next(t),o.complete()):n.createEcmTypeWithProperties(e,i).subscribe(function(e){o.next(e),o.complete()})},function(e){return n.handleError(e)})})},e.prototype.createEcmTypeWithProperties=function(e,i){var n=this;return s.Observable.create(function(o){n.createEcmType(e,t.MODEL_NAME,t.TYPE_MODEL).subscribe(function(r){n.logService.info("type Created",r),n.addPropertyToAType(t.MODEL_NAME,e,i).subscribe(function(e){n.logService.info("property Added",e),o.next(r),o.complete()},function(e){return n.handleError(e)})},function(e){return n.handleError(e)})})},e.prototype.searchEcmType=function(e,t){return this.getEcmType(t).map(function(t){return t.list.entries.find(function(t){return t.entry.prefixedName===e||t.entry.title===e})})},e.prototype.activeEcmModel=function(e){var t=this;return s.Observable.fromPromise(this.apiService.getInstance().core.customModelApi.activateCustomModel(e)).map(this.toJson).catch(function(e){return t.handleError(e)})},e.prototype.createEcmModel=function(e,t){var i=this;return s.Observable.fromPromise(this.apiService.getInstance().core.customModelApi.createCustomModel("DRAFT","",e,e,t)).map(this.toJson).catch(function(e){return i.handleError(e)})},e.prototype.getEcmModels=function(){var e=this;return s.Observable.fromPromise(this.apiService.getInstance().core.customModelApi.getAllCustomModel()).map(this.toJson).catch(function(t){return e.handleError(t)})},e.prototype.getEcmType=function(e){var t=this;return s.Observable.fromPromise(this.apiService.getInstance().core.customModelApi.getAllCustomType(e)).map(this.toJson).catch(function(e){return t.handleError(e)})},e.prototype.createEcmType=function(e,t,i){var n=this,o=this.cleanNameType(e);return s.Observable.fromPromise(this.apiService.getInstance().core.customModelApi.createCustomType(t,o,i,e,"")).map(this.toJson).catch(function(e){return n.handleError(e)})},e.prototype.addPropertyToAType=function(e,t,i){var n=this,o=this.cleanNameType(t),r=[];if(i&&i.values)for(var a in i.values)a&&r.push({name:a,title:a,description:a,dataType:"d:text",multiValued:!1,mandatory:!1,mandatoryEnforced:!1});return s.Observable.fromPromise(this.apiService.getInstance().core.customModelApi.addPropertyToType(e,o,r)).map(this.toJson).catch(function(e){return n.handleError(e)})},e.prototype.cleanNameType=function(e){var t=e;return-1!==e.indexOf(":")&&(t=e.split(":")[1]),t.replace(/[^a-zA-Z ]/g,"")},e.prototype.toJson=function(e){return e?e||{}:{}},e.prototype.handleError=function(e){this.logService.error(e)},e.MODEL_NAMESPACE="activitiForms",e.MODEL_NAME="activitiFormsModel",e.TYPE_MODEL="cm:folder",e=t=n([r.Injectable(),o("design:paramtypes",["function"==typeof(i=void 0!==a.AlfrescoApiService&&a.AlfrescoApiService)&&i||Object,"function"==typeof(l=void 0!==a.LogService&&a.LogService)&&l||Object])],e);var t,i,l}();t.EcmModelService=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=(i.n(n),i(23));i.n(o);class r{constructor(){this.supportedTypes=[o.FormFieldTypes.TEXT,o.FormFieldTypes.MULTILINE_TEXT,o.FormFieldTypes.NUMBER,o.FormFieldTypes.TYPEAHEAD,o.FormFieldTypes.DROPDOWN,o.FormFieldTypes.PEOPLE,o.FormFieldTypes.FUNCTIONAL_GROUP,o.FormFieldTypes.RADIO_BUTTONS,o.FormFieldTypes.UPLOAD,o.FormFieldTypes.AMOUNT,o.FormFieldTypes.DYNAMIC_TABLE,o.FormFieldTypes.DATE]}isSupported(e){return e&&this.supportedTypes.indexOf(e.type)>-1&&e.required}validate(e){if(this.isSupported(e)){if(e.type===o.FormFieldTypes.DROPDOWN&&e.hasEmptyValue&&e.emptyOption&&e.value===e.emptyOption.id)return!1;if(e.type===o.FormFieldTypes.RADIO_BUTTONS){return!!e.options.find(t=>t.id===e.value)}if(e.type===o.FormFieldTypes.UPLOAD)return e.value&&e.value.length>0;if(e.type===o.FormFieldTypes.DYNAMIC_TABLE)return e.value&&e.value instanceof Array&&e.value.length>0;if(null===e.value||void 0===e.value||""===e.value)return!1}return!0}}t.RequiredFieldValidator=r;class a{constructor(){this.supportedTypes=[o.FormFieldTypes.NUMBER,o.FormFieldTypes.AMOUNT]}static isNumber(e){return null!==e&&void 0!==e&&""!==e&&!isNaN(+e)}isSupported(e){return e&&this.supportedTypes.indexOf(e.type)>-1}validate(e){if(this.isSupported(e)){if(null===e.value||void 0===e.value||""===e.value)return!0;let t=""+e.value,i=new RegExp(/^-?\d+$/);return e.enableFractions&&(i=new RegExp(/^-?[0-9]+(\.[0-9]{1,2})?$/)),t.match(i)?!0:(e.validationSummary.message="FORM.FIELD.VALIDATOR.INVALID_NUMBER",!1)}return!0}}t.NumberFieldValidator=a;class s{constructor(){this.supportedTypes=[o.FormFieldTypes.DATE]}static isValidDate(e,t="D-M-YYYY"){if(e){return n(e,t,!0).isValid()}return!1}isSupported(e){return e&&this.supportedTypes.indexOf(e.type)>-1}validate(e){return!this.isSupported(e)||!e.value||(!!s.isValidDate(e.value,e.dateDisplayFormat)||(e.validationSummary.message=e.dateDisplayFormat,!1))}}t.DateFieldValidator=s;class l{constructor(){this.MIN_DATE_FORMAT="DD-MM-YYYY",this.supportedTypes=[o.FormFieldTypes.DATE]}isSupported(e){return e&&this.supportedTypes.indexOf(e.type)>-1&&!!e.minValue}validate(e){if(this.isSupported(e)&&e.value){const t=e.dateDisplayFormat;if(!s.isValidDate(e.value,t))return e.validationSummary.message="FORM.FIELD.VALIDATOR.INVALID_DATE",!1;let i;i="string"==typeof e.value?n(e.value.split("T")[0],t):e.value;let o=n(e.minValue,this.MIN_DATE_FORMAT);if(i.isBefore(o))return e.validationSummary.message="FORM.FIELD.VALIDATOR.NOT_LESS_THAN",e.validationSummary.attributes.set("minValue",e.minValue.toLocaleString()),!1}return!0}}t.MinDateFieldValidator=l;class d{constructor(){this.MAX_DATE_FORMAT="DD-MM-YYYY",this.supportedTypes=[o.FormFieldTypes.DATE]}isSupported(e){return e&&this.supportedTypes.indexOf(e.type)>-1&&!!e.maxValue}validate(e){if(this.isSupported(e)&&e.value){const t=e.dateDisplayFormat;if(!s.isValidDate(e.value,t))return e.validationSummary.message="FORM.FIELD.VALIDATOR.INVALID_DATE",!1;let i;i="string"==typeof e.value?n(e.value.split("T")[0],t):e.value;let o=n(e.maxValue,this.MAX_DATE_FORMAT);if(i.isAfter(o))return e.validationSummary.message="FORM.FIELD.VALIDATOR.NOT_GREATER_THAN",e.validationSummary.attributes.set("maxValue",e.maxValue.toLocaleString()),!1}return!0}}t.MaxDateFieldValidator=d;class c{constructor(){this.supportedTypes=[o.FormFieldTypes.TEXT,o.FormFieldTypes.MULTILINE_TEXT]}isSupported(e){return e&&this.supportedTypes.indexOf(e.type)>-1&&e.minLength>0}validate(e){return!this.isSupported(e)||!e.value||(e.value.length>=e.minLength||(e.validationSummary.message="FORM.FIELD.VALIDATOR.AT_LEAST_LONG",e.validationSummary.attributes.set("minLength",e.minLength.toLocaleString()),!1))}}t.MinLengthFieldValidator=c;class u{constructor(){this.supportedTypes=[o.FormFieldTypes.TEXT,o.FormFieldTypes.MULTILINE_TEXT]}isSupported(e){return e&&this.supportedTypes.indexOf(e.type)>-1&&e.maxLength>0}validate(e){return!this.isSupported(e)||!e.value||(e.value.length<=e.maxLength||(e.validationSummary.message="FORM.FIELD.VALIDATOR.NO_LONGER_THAN",e.validationSummary.attributes.set("maxLength",e.maxLength.toLocaleString()),!1))}}t.MaxLengthFieldValidator=u;class p{constructor(){this.supportedTypes=[o.FormFieldTypes.NUMBER,o.FormFieldTypes.AMOUNT]}isSupported(e){return e&&this.supportedTypes.indexOf(e.type)>-1&&a.isNumber(e.minValue)}validate(e){if(this.isSupported(e)&&e.value){return+e.value>=+e.minValue||(e.validationSummary.message="FORM.FIELD.VALIDATOR.NOT_LESS_THAN",e.validationSummary.attributes.set("minValue",e.minValue.toLocaleString()),!1)}return!0}}t.MinValueFieldValidator=p;class f{constructor(){this.supportedTypes=[o.FormFieldTypes.NUMBER,o.FormFieldTypes.AMOUNT]}isSupported(e){return e&&this.supportedTypes.indexOf(e.type)>-1&&a.isNumber(e.maxValue)}validate(e){if(this.isSupported(e)&&e.value){return+e.value<=+e.maxValue||(e.validationSummary.message="FORM.FIELD.VALIDATOR.NOT_GREATER_THAN",e.validationSummary.attributes.set("maxValue",e.maxValue.toLocaleString()),!1)}return!0}}t.MaxValueFieldValidator=f;class m{constructor(){this.supportedTypes=[o.FormFieldTypes.TEXT,o.FormFieldTypes.MULTILINE_TEXT]}isSupported(e){return e&&this.supportedTypes.indexOf(e.type)>-1&&!!e.regexPattern}validate(e){return!this.isSupported(e)||!e.value||(!!(e.value.length>0&&e.value.match(new RegExp("^"+e.regexPattern+"$")))||(e.validationSummary.message="FORM.FIELD.VALIDATOR.INVALID_VALUE",!1))}}t.RegExFieldValidator=m;class h{constructor(){this.supportedTypes=[o.FormFieldTypes.TYPEAHEAD]}isSupported(e){return e&&this.supportedTypes.indexOf(e.type)>-1}hasValidNameOrValidId(e){return this.hasValidName(e)||this.hasValidId(e)}hasValidName(e){return!!e.options.find(t=>t.name&&t.name.toLocaleLowerCase()===e.value.toLocaleLowerCase())}hasValidId(e){return!!e.options[e.value-1]}hasStringValue(e){return e.value&&"string"==typeof e.value}hasOptions(e){return e.options&&e.options.length>0}validate(e){return!(this.isSupported(e)&&this.hasStringValue(e)&&this.hasOptions(e)&&!this.hasValidNameOrValidId(e))||(e.validationSummary.message="FORM.FIELD.VALIDATOR.INVALID_VALUE",!1)}}t.FixedValueFieldValidator=h;const v=[new r,new a,new c,new u,new p,new f,new m,new s,new l,new d,new h];t.FORM_FIELD_VALIDATORS=v},,,,,,,,,,,,,,function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),a=i(49),s=i(33),l=i(7),d=i(52),c=i(22),u=i(2),p=i(53),f=function(){function e(e,t,i,n){this.formService=e,this.visibilityService=t,this.ecmModelService=i,this.nodeService=n,this.saveMetadata=!1,this.showTitle=!0,this.showCompleteButton=!0,this.disableCompleteButton=!1,this.disableStartProcessButton=!1,this.showSaveButton=!0,this.showDebugButton=!1,this.readOnly=!1,this.showRefreshButton=!0,this.showValidationIcon=!0,this.fieldValidators=[],this.formSaved=new r.EventEmitter,this.formCompleted=new r.EventEmitter,this.formContentClicked=new r.EventEmitter,this.formLoaded=new r.EventEmitter,this.formDataRefreshed=new r.EventEmitter,this.executeOutcome=new r.EventEmitter,this.onError=new r.EventEmitter,this.debugMode=!1}return t=e,e.prototype.hasForm=function(){return!!this.form},e.prototype.isTitleEnabled=function(){return!!(this.showTitle&&this.form&&this.form.taskName)},e.prototype.isOutcomeButtonEnabled=function(e){return!this.form.readOnly&&(!!e&&(e.name===c.FormOutcomeModel.SAVE_ACTION||(e.name===c.FormOutcomeModel.COMPLETE_ACTION?!this.disableCompleteButton&&this.form.isValid:e.name===c.FormOutcomeModel.START_PROCESS_ACTION?!this.disableStartProcessButton&&this.form.isValid:this.form.isValid)))},e.prototype.isOutcomeButtonVisible=function(e,t){return!(!e||!e.name)&&(e.name===c.FormOutcomeModel.COMPLETE_ACTION?this.showCompleteButton:t?e.isSelected:e.name===c.FormOutcomeModel.SAVE_ACTION?this.showSaveButton:e.name!==c.FormOutcomeModel.START_PROCESS_ACTION)},e.prototype.ngOnInit=function(){var e=this;this.formService.formContentClicked.subscribe(function(t){e.formContentClicked.emit(t)})},e.prototype.ngOnChanges=function(e){var t=e.taskId;if(t&&t.currentValue)this.getFormByTaskId(t.currentValue);else{var i=e.formId;if(i&&i.currentValue)this.getFormDefinitionByFormId(i.currentValue);else{var n=e.formName;if(n&&n.currentValue)this.getFormDefinitionByFormName(n.currentValue);else{var o=e.nodeId;if(o&&o.currentValue)this.loadFormForEcmNode(o.currentValue);else{var r=e.data;r&&r.currentValue&&this.refreshFormData()}}}}},e.prototype.onOutcomeClicked=function(e){if(!this.readOnly&&e&&this.form){if(!this.onExecuteOutcome(e))return!1;if(e.isSystem){if(e.id===t.SAVE_OUTCOME_ID)return this.saveTaskForm(),!0;if(e.id===t.COMPLETE_OUTCOME_ID)return this.completeTaskForm(),!0;if(e.id===t.START_PROCESS_OUTCOME_ID)return this.completeTaskForm(),!0;if(e.id===t.CUSTOM_OUTCOME_ID)return this.onTaskSaved(this.form),this.storeFormAsMetadata(),!0}else if(e.name)return this.onTaskSaved(this.form),this.completeTaskForm(e.name),!0}return!1},e.prototype.onRefreshClicked=function(){this.loadForm()},e.prototype.loadForm=function(){this.taskId?this.getFormByTaskId(this.taskId):this.formId?this.getFormDefinitionByFormId(this.formId):this.formName&&this.getFormDefinitionByFormName(this.formName)},e.prototype.findProcessVariablesByTaskId=function(e){var t=this;return this.formService.getTask(e).switchMap(function(i){return t.isAProcessTask(i)?t.visibilityService.getTaskProcessVariable(e):u.Observable.of({})})},e.prototype.isAProcessTask=function(e){return e.processDefinitionId&&"null"!==e.processDefinitionDeploymentId},e.prototype.getFormByTaskId=function(e){var t=this;return new Promise(function(i,n){t.findProcessVariablesByTaskId(e).subscribe(function(n){t.formService.getTaskForm(e).subscribe(function(e){var n=t.parseForm(e);t.visibilityService.refreshVisibility(n),t.form=n,t.onFormLoaded(t.form),i(t.form)},function(e){t.handleError(e),i(null)})})})},e.prototype.getFormDefinitionByFormId=function(e){var t=this;this.formService.getFormDefinitionById(e).subscribe(function(e){t.formName=e.name,t.form=t.parseForm(e),t.onFormLoaded(t.form)},function(e){t.handleError(e)})},e.prototype.getFormDefinitionByFormName=function(e){var t=this;this.formService.getFormDefinitionByName(e).subscribe(function(e){t.formService.getFormDefinitionById(e).subscribe(function(e){t.form=t.parseForm(e),t.onFormLoaded(t.form)},function(e){t.handleError(e)})},function(e){t.handleError(e)})},e.prototype.saveTaskForm=function(){var e=this;this.form&&this.form.taskId&&this.formService.saveTaskForm(this.form.taskId,this.form.values).subscribe(function(){e.onTaskSaved(e.form),e.storeFormAsMetadata()},function(t){return e.onTaskSavedError(e.form,t)})},e.prototype.completeTaskForm=function(e){var t=this;this.form&&this.form.taskId&&this.formService.completeTaskForm(this.form.taskId,this.form.values,e).subscribe(function(){t.onTaskCompleted(t.form),t.storeFormAsMetadata()},function(e){return t.onTaskCompletedError(t.form,e)})},e.prototype.handleError=function(e){this.onError.emit(e)},e.prototype.parseForm=function(e){if(e){var t=new c.FormModel(e,this.data,this.readOnly,this.formService);return e.fields||(t.outcomes=this.getFormDefinitionOutcomes(t)),this.fieldValidators&&this.fieldValidators.length>0&&(t.fieldValidators=this.fieldValidators),t}return null},e.prototype.getFormDefinitionOutcomes=function(e){return[new c.FormOutcomeModel(e,{id:"$custom",name:c.FormOutcomeModel.SAVE_ACTION,isSystem:!0})]},e.prototype.checkVisibility=function(e){e&&e.form&&this.visibilityService.refreshVisibility(e.form)},e.prototype.refreshFormData=function(){this.form=this.parseForm(this.form.json),this.onFormLoaded(this.form),this.onFormDataRefreshed(this.form)},e.prototype.loadFormForEcmNode=function(e){var t=this;this.nodeService.getNodeMetadata(e).subscribe(function(e){t.data=e.metadata,t.loadFormFromActiviti(e.nodeType)},this.handleError)},e.prototype.loadFormFromActiviti=function(e){var t=this;this.formService.searchFrom(e).subscribe(function(i){i?t.loadFormFromFormId(i.id):t.formService.createFormFromANode(e).subscribe(function(e){t.loadFormFromFormId(e.id)})},function(e){t.handleError(e)})},e.prototype.loadFormFromFormId=function(e){this.formId=e,this.loadForm()},e.prototype.storeFormAsMetadata=function(){var e=this;this.saveMetadata&&this.ecmModelService.createEcmTypeForActivitiForm(this.formName,this.form).subscribe(function(t){e.nodeService.createNodeMetadata(t.nodeType||t.entry.prefixedName,s.EcmModelService.MODEL_NAMESPACE,e.form.values,e.path,e.nameNode)},function(t){e.handleError(t)})},e.prototype.onFormLoaded=function(e){this.formLoaded.emit(e),this.formService.formLoaded.next(new a.FormEvent(e))},e.prototype.onFormDataRefreshed=function(e){this.formDataRefreshed.emit(e),this.formService.formDataRefreshed.next(new a.FormEvent(e))},e.prototype.onTaskSaved=function(e){this.formSaved.emit(e),this.formService.taskSaved.next(new a.FormEvent(e))},e.prototype.onTaskSavedError=function(e,t){this.handleError(t),this.formService.taskSavedError.next(new a.FormErrorEvent(e,t))},e.prototype.onTaskCompleted=function(e){this.formCompleted.emit(e),this.formService.taskCompleted.next(new a.FormEvent(e))},e.prototype.onTaskCompletedError=function(e,t){this.handleError(t),this.formService.taskCompletedError.next(new a.FormErrorEvent(e,t))},e.prototype.onExecuteOutcome=function(e){var t=new c.FormOutcomeEvent(e);return this.formService.executeOutcome.next(t),!t.defaultPrevented&&(this.executeOutcome.emit(t),!t.defaultPrevented)},e.SAVE_OUTCOME_ID="$save",e.COMPLETE_OUTCOME_ID="$complete",e.START_PROCESS_OUTCOME_ID="$startProcess",e.CUSTOM_OUTCOME_ID="$custom",n([r.Input(),o("design:type","function"==typeof(f=void 0!==c.FormModel&&c.FormModel)&&f||Object)],e.prototype,"form",void 0),n([r.Input(),o("design:type",String)],e.prototype,"taskId",void 0),n([r.Input(),o("design:type",String)],e.prototype,"nodeId",void 0),n([r.Input(),o("design:type",String)],e.prototype,"formId",void 0),n([r.Input(),o("design:type",String)],e.prototype,"formName",void 0),n([r.Input(),o("design:type",Boolean)],e.prototype,"saveMetadata",void 0),n([r.Input(),o("design:type","function"==typeof(m=void 0!==c.FormValues&&c.FormValues)&&m||Object)],e.prototype,"data",void 0),n([r.Input(),o("design:type",String)],e.prototype,"path",void 0),n([r.Input(),o("design:type",String)],e.prototype,"nameNode",void 0),n([r.Input(),o("design:type",Boolean)],e.prototype,"showTitle",void 0),n([r.Input(),o("design:type",Boolean)],e.prototype,"showCompleteButton",void 0),n([r.Input(),o("design:type",Boolean)],e.prototype,"disableCompleteButton",void 0),n([r.Input(),o("design:type",Boolean)],e.prototype,"disableStartProcessButton",void 0),n([r.Input(),o("design:type",Boolean)],e.prototype,"showSaveButton",void 0),n([r.Input(),o("design:type",Boolean)],e.prototype,"showDebugButton",void 0),n([r.Input(),o("design:type",Boolean)],e.prototype,"readOnly",void 0),n([r.Input(),o("design:type",Boolean)],e.prototype,"showRefreshButton",void 0),n([r.Input(),o("design:type",Boolean)],e.prototype,"showValidationIcon",void 0),n([r.Input(),o("design:type",Array)],e.prototype,"fieldValidators",void 0),n([r.Output(),o("design:type","function"==typeof(h=void 0!==r.EventEmitter&&r.EventEmitter)&&h||Object)],e.prototype,"formSaved",void 0),n([r.Output(),o("design:type","function"==typeof(v=void 0!==r.EventEmitter&&r.EventEmitter)&&v||Object)],e.prototype,"formCompleted",void 0),n([r.Output(),o("design:type","function"==typeof(g=void 0!==r.EventEmitter&&r.EventEmitter)&&g||Object)],e.prototype,"formContentClicked",void 0),n([r.Output(),o("design:type","function"==typeof(y=void 0!==r.EventEmitter&&r.EventEmitter)&&y||Object)],e.prototype,"formLoaded",void 0),n([r.Output(),o("design:type","function"==typeof(b=void 0!==r.EventEmitter&&r.EventEmitter)&&b||Object)],e.prototype,"formDataRefreshed",void 0),n([r.Output(),o("design:type","function"==typeof(O=void 0!==r.EventEmitter&&r.EventEmitter)&&O||Object)],e.prototype,"executeOutcome",void 0),n([r.Output(),o("design:type","function"==typeof(F=void 0!==r.EventEmitter&&r.EventEmitter)&&F||Object)],e.prototype,"onError",void 0),e=t=n([r.Component({selector:"adf-form",template:i(288),styles:[i(93)],encapsulation:r.ViewEncapsulation.None}),o("design:paramtypes",["function"==typeof(E=void 0!==l.FormService&&l.FormService)&&E||Object,"function"==typeof(C=void 0!==p.WidgetVisibilityService&&p.WidgetVisibilityService)&&C||Object,"function"==typeof(S=void 0!==s.EcmModelService&&s.EcmModelService)&&S||Object,"function"==typeof(w=void 0!==d.NodeService&&d.NodeService)&&w||Object])],e);var t,f,m,h,v,g,y,b,O,F,E,C,S,w}();t.FormComponent=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(32);i.d(t,"FormEvent",function(){return n.FormEvent});var o=i(277);i.d(t,"FormErrorEvent",function(){return o.a});var r=i(50);i.d(t,"FormFieldEvent",function(){return r.a});var a=i(278);i.d(t,"ValidateFormFieldEvent",function(){return a.a});var s=i(279);i.n(s);i.o(s,"ValidateFormEvent")&&i.d(t,"ValidateFormEvent",function(){return s.ValidateFormEvent});var l=i(86);i.d(t,"ValidateDynamicTableRowEvent",function(){return l.a})},function(e,t,i){"use strict";var n=i(32);class o extends n.FormEvent{constructor(e,t){super(e),this.field=t}}t.a=o},function(e,t,i){"use strict";var n=i(14);class o extends n.FormWidgetModel{get isVisible(){return this.field.isVisible}constructor(e){e&&(super(e.form,e.json),this.field=e)}}t.a=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"NodeService",function(){return s});var n=i(1),o=i(0),r=(i.n(o),i(2)),a=(i.n(r),i(287));let s=class{constructor(e){this.apiService=e}getNodeMetadata(e){return r.Observable.fromPromise(this.apiService.getInstance().nodes.getNodeInfo(e)).map(this.cleanMetadataFromSemicolon)}createNodeMetadata(e,t,i,n,o){let r={};for(let e in i)i[e]&&(r[t+":"+e]=i[e]);return this.createNode(o||this.generateUuid(),e,r,n)}createNode(e,t,i,n){let o={name:e,nodeType:t,properties:i,relativePath:n},a=this.apiService.getInstance();return r.Observable.fromPromise(a.nodes.addNode("-root-",o,{}))}generateUuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}cleanMetadataFromSemicolon(e){let t={};if(e&&e.properties)for(let i in e.properties)i&&(-1!==i.indexOf(":")?t[i.split(":")[1]]=e.properties[i]:t[i]=e.properties[i]);return new a.a(t,e.nodeType)}};s=n.a([Object(o.Injectable)()],s)},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),a=i(6),s=i(3),l=i(2),d=function(){function e(e,t){this.apiService=e,this.logService=t}return e.prototype.refreshVisibility=function(e){var t=this;e&&e.tabs&&e.tabs.length>0&&e.tabs.map(function(e){return t.refreshEntityVisibility(e)}),e&&e.getFormFields().map(function(e){return t.refreshEntityVisibility(e)})},e.prototype.refreshEntityVisibility=function(e){var t=this.evaluateVisibility(e.form,e.visibilityCondition);e.isVisible=t},e.prototype.evaluateVisibility=function(e,t){var i=t&&(t.leftFormFieldId||t.leftRestResponseId);return!i||"null"===i||this.isFieldVisible(e,t)},e.prototype.isFieldVisible=function(e,t){var i=this.getLeftValue(e,t),n=this.getRightValue(e,t),o=this.evaluateCondition(i,n,t.operator);return t.nextCondition?this.evaluateLogicalOperation(t.nextConditionOperator,o,this.isFieldVisible(e,t.nextCondition)):o},e.prototype.getLeftValue=function(e,t){return t.leftRestResponseId&&"null"!==t.leftRestResponseId?this.getVariableValue(e,t.leftRestResponseId,this.processVarList):this.getFormValue(e,t.leftFormFieldId)||this.getVariableValue(e,t.leftFormFieldId,this.processVarList)},e.prototype.getRightValue=function(e,t){return t.rightRestResponseId?this.getVariableValue(e,t.rightRestResponseId,this.processVarList):t.rightFormFieldId?this.getFormValue(e,t.rightFormFieldId):a(t.rightValue,"YYYY-MM-DD",!0).isValid()?t.rightValue+"T00:00:00.000Z":t.rightValue},e.prototype.getFormValue=function(e,t){var i=this.getFieldValue(e.values,t);return i||(i=this.searchValueInForm(e,t)),i},e.prototype.getFieldValue=function(e,t){var i,n;return t&&t.indexOf("_LABEL")>0?e[i=t.substring(0,t.length-6)]&&(n=e[i].name):n=e[t]&&e[t].id?e[t].id:e[t],n},e.prototype.searchValueInForm=function(e,t){var i=this,n="";return e.getFormFields().forEach(function(e){i.isSearchedField(e,t)&&((n=i.getObjectValue(e))||(n=e.value&&e.value.id?e.value.id:e.value))}),n},e.prototype.getObjectValue=function(e){var t="";if(e.value&&e.value.name)t=e.value.name;else if(e.options){var i=e.options.find(function(t){return t.id===e.value});t=i?i.name:e.value}return t},e.prototype.isSearchedField=function(e,t){var i=this.removeLabel(e,t);return!!e.id&&e.id.toUpperCase()===i.toUpperCase()},e.prototype.removeLabel=function(e,t){var i=t||"";return"RestFieldRepresentation"===e.fieldType&&t.indexOf("_LABEL")>0&&(i=t.substring(0,t.length-6)),i},e.prototype.getVariableValue=function(e,t,i){return this.getFormVariableValue(e,t)||this.getProcessVariableValue(t,i)},e.prototype.getFormVariableValue=function(e,t){if(e.json.variables){var i=e.json.variables.find(function(e){return e.name===t});return i?i.value:i}},e.prototype.getProcessVariableValue=function(e,t){if(this.processVarList){var i=this.processVarList.find(function(t){return t.id===e});return i?i.value:i}},e.prototype.evaluateLogicalOperation=function(e,t,i){switch(e){case"and":return t&&i;case"or":return t||i;case"and-not":return t&&!i;case"or-not":return t||!i;default:this.logService.error("NO valid operation! wrong op request : "+e)}},e.prototype.evaluateCondition=function(e,t,i){switch(i){case"==":return e+""==t+"";case"<":return e<t;case"!=":return e+""!=t+"";case">":return e>t;case">=":return e>=t;case"<=":return e<=t;case"empty":return!e||""===e;case"!empty":return!!e&&""!==e;default:this.logService.error("NO valid operation!")}},e.prototype.cleanProcessVariable=function(){this.processVarList=[]},e.prototype.getTaskProcessVariable=function(e){var t=this;return l.Observable.fromPromise(this.apiService.getInstance().activiti.taskFormsApi.getTaskFormVariables(e)).map(function(e){var i=t.toJson(e);return t.processVarList=i,i}).catch(function(e){return t.handleError(e)})},e.prototype.toJson=function(e){return e||{}},e.prototype.handleError=function(e){return this.logService.error("Error while performing a call"),l.Observable.throw("Error while performing a call - Server error")},e=n([r.Injectable(),o("design:paramtypes",["function"==typeof(t=void 0!==s.AlfrescoApiService&&s.AlfrescoApiService)&&t||Object,"function"==typeof(i=void 0!==s.LogService&&s.LogService)&&i||Object])],e);var t,i}();t.WidgetVisibilityService=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(98),o=i(99),r=i(100),a=(i.n(r),i(101)),s=i(102),l=i(103),d=i(104),c=i(105),u=i(106),p=(i.n(u),i(107)),f=i(108),m=(i.n(f),i(110)),h=i(111),v=i(112),g=i(113),y=i(114),b=i(115),O=(i.n(b),i(116)),F=i(117),E=i(118),C=i(119),S=(i.n(C),i(120)),w=i(121),T=i(122),I=i(123),_=(i.n(I),i(124)),R=i(125),V=i(5);i.d(t,"baseHost",function(){return V.baseHost}),i.d(t,"WidgetComponent",function(){return V.WidgetComponent});var x=i(22);for(var D in x)["DocumentWidgetComponent","WIDGET_DIRECTIVES","MASK_DIRECTIVE","baseHost","WidgetComponent","default"].indexOf(D)<0&&function(e){i.d(t,e,function(){return x[e]})}(D);i.d(t,"TabsWidgetComponent",function(){return o.a}),i.d(t,"ContainerWidgetComponent",function(){return n.a});for(var D in r)["DocumentWidgetComponent","WIDGET_DIRECTIVES","MASK_DIRECTIVE","baseHost","WidgetComponent","TabsWidgetComponent","ContainerWidgetComponent","default"].indexOf(D)<0&&function(e){i.d(t,e,function(){return r[e]})}(D);for(var D in I)["DocumentWidgetComponent","WIDGET_DIRECTIVES","MASK_DIRECTIVE","baseHost","WidgetComponent","TabsWidgetComponent","ContainerWidgetComponent","default"].indexOf(D)<0&&function(e){i.d(t,e,function(){return I[e]})}(D);for(var D in C)["DocumentWidgetComponent","WIDGET_DIRECTIVES","MASK_DIRECTIVE","baseHost","WidgetComponent","TabsWidgetComponent","ContainerWidgetComponent","default"].indexOf(D)<0&&function(e){i.d(t,e,function(){return C[e]})}(D);i.d(t,"CheckboxWidgetComponent",function(){return l.a}),i.d(t,"MultilineTextWidgetComponentComponent",function(){return E.a}),i.d(t,"DropdownWidgetComponent",function(){return p.a}),i.d(t,"HyperlinkWidgetComponent",function(){return F.a}),i.d(t,"RadioButtonsWidgetComponent",function(){return w.a}),i.d(t,"DisplayTextWidgetComponentComponent",function(){return c.a}),i.d(t,"UploadWidgetComponent",function(){return R.a}),i.d(t,"AttachWidgetComponent",function(){return s.a}),i.d(t,"TypeaheadWidgetComponent",function(){return _.a}),i.d(t,"FunctionalGroupWidgetComponent",function(){return O.a}),i.d(t,"PeopleWidgetComponent",function(){return S.a}),i.d(t,"DateWidgetComponent",function(){return d.a}),i.d(t,"AmountWidgetComponent",function(){return a.a});for(var D in f)["DocumentWidgetComponent","WIDGET_DIRECTIVES","MASK_DIRECTIVE","baseHost","WidgetComponent","TabsWidgetComponent","ContainerWidgetComponent","CheckboxWidgetComponent","MultilineTextWidgetComponentComponent","DropdownWidgetComponent","HyperlinkWidgetComponent","RadioButtonsWidgetComponent","DisplayTextWidgetComponentComponent","UploadWidgetComponent","AttachWidgetComponent","TypeaheadWidgetComponent","FunctionalGroupWidgetComponent","PeopleWidgetComponent","DateWidgetComponent","AmountWidgetComponent","default"].indexOf(D)<0&&function(e){i.d(t,e,function(){return f[e]})}(D);for(var D in b)["DocumentWidgetComponent","WIDGET_DIRECTIVES","MASK_DIRECTIVE","baseHost","WidgetComponent","TabsWidgetComponent","ContainerWidgetComponent","CheckboxWidgetComponent","MultilineTextWidgetComponentComponent","DropdownWidgetComponent","HyperlinkWidgetComponent","RadioButtonsWidgetComponent","DisplayTextWidgetComponentComponent","UploadWidgetComponent","AttachWidgetComponent","TypeaheadWidgetComponent","FunctionalGroupWidgetComponent","PeopleWidgetComponent","DateWidgetComponent","AmountWidgetComponent","default"].indexOf(D)<0&&function(e){i.d(t,e,function(){return b[e]})}(D);i.o(u,"DocumentWidgetComponent")&&i.d(t,"DocumentWidgetComponent",function(){return u.DocumentWidgetComponent});var M=i(109);i.d(t,"DynamicTableModel",function(){return M.DynamicTableModel}),i.d(t,"RowEditorComponent",function(){return g.a}),i.d(t,"DateEditorComponent",function(){return h.a}),i.d(t,"DropdownEditorComponent",function(){return v.a}),i.d(t,"BooleanEditorComponent",function(){return m.a}),i.d(t,"TextEditorComponent",function(){return y.a}),i.d(t,"CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR",function(){return T.a}),i.d(t,"InputMaskDirective",function(){return T.b});const A=[r.UnknownWidgetComponent,o.a,n.a,I.TextWidgetComponent,C.NumberWidgetComponent,l.a,E.a,p.a,F.a,w.a,c.a,R.a,s.a,_.a,O.a,S.a,d.a,a.a,f.DynamicTableWidgetComponent,h.a,v.a,m.a,y.a,g.a,b.ErrorWidgetComponent,u.DocumentWidgetComponent];t.WIDGET_DIRECTIVES=A;const k=[T.b];t.MASK_DIRECTIVE=k},function(e,t){e.exports=s},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";var n=i(50);class o extends n.a{constructor(e,t,i,n){super(e,t),this.row=i,this.summary=n,this.isValid=!0}}t.a=o},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=i(6),r=i(88),a=i(89),s=i(23),l=i(34),d=function(e){function t(t,i){var n=e.call(this,t,i)||this;if(n._readOnly=!1,n._isValid=!0,n._required=!1,n.defaultDateFormat="D-M-YYYY",n.rowspan=1,n.colspan=1,n.placeholder=null,n.minLength=0,n.maxLength=0,n.options=[],n.params={},n.isVisible=!0,n.visibilityCondition=null,n.enableFractions=!1,n.currency=null,n.dateDisplayFormat=n.dateDisplayFormat||n.defaultDateFormat,n.numberOfColumns=1,n.fields=[],n.columns=[],i){if(n.fieldType=i.fieldType,n.id=i.id,n.name=i.name,n.type=i.type,n._required=i.required,n._readOnly=i.readOnly||"readonly"===i.type,n.overrideId=i.overrideId,n.tab=i.tab,n.restUrl=i.restUrl,n.restResponsePath=i.restResponsePath,n.restIdProperty=i.restIdProperty,n.restLabelProperty=i.restLabelProperty,n.colspan=i.colspan,n.minLength=i.minLength||0,n.maxLength=i.maxLength||0,n.minValue=i.minValue,n.maxValue=i.maxValue,n.regexPattern=i.regexPattern,n.options=i.options||[],n.hasEmptyValue=i.hasEmptyValue,n.className=i.className,n.optionType=i.optionType,n.params=i.params||{},n.hyperlinkUrl=i.hyperlinkUrl,n.displayText=i.displayText,n.visibilityCondition=i.visibilityCondition,n.enableFractions=i.enableFractions,n.currency=i.currency,n.dateDisplayFormat=i.dateDisplayFormat||n.defaultDateFormat,n._value=n.parseValue(i),n.validationSummary=new a.ErrorMessageModel,i.placeholder&&""!==i.placeholder&&"null"!==i.placeholder&&(n.placeholder=i.placeholder),s.FormFieldTypes.isReadOnlyType(i.type)&&i.params&&i.params.field)if(t.processVariables){var o=n.getProcessVariableValue(i.params.field,t);o&&(n.value=o)}else if(i.params.field.responseVariable){var r=n.getVariablesValue(i.params.field.name,t);r&&(n.value=r)}s.FormFieldTypes.isContainerType(i.type)&&n.containerFactory(i,t)}return n.hasEmptyValue&&n.options&&n.options.length>0&&(n.emptyOption=n.options[0]),n.updateForm(),n}return n(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e,this.validate(),this.updateForm()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readOnly",{get:function(){return!(!this.form||!this.form.readOnly)||this._readOnly},set:function(e){this._readOnly=e,this.updateForm()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"required",{get:function(){return this._required},set:function(e){this._required=e,this.updateForm()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isValid",{get:function(){return this._isValid},enumerable:!0,configurable:!0}),t.prototype.markAsInvalid=function(){this._isValid=!1},t.prototype.validate=function(){this.validationSummary=new a.ErrorMessageModel;for(var e=0,t=this.form.fieldValidators||[];e<t.length;e++){if(!t[e].validate(this))return this._isValid=!1,this._isValid}return this._isValid=!0,this._isValid},t.prototype.isTypeaHeadFieldType=function(e){return"typeahead"===e},t.prototype.getFieldNameWithLabel=function(e){return e+="_LABEL"},t.prototype.getProcessVariableValue=function(e,t){var i=e.name;return this.isTypeaHeadFieldType(e.type)&&(i=this.getFieldNameWithLabel(e.id)),this.findProcessVariableValue(i,t)},t.prototype.getVariablesValue=function(e,t){var i=t.json.variables.find(function(t){return t.name===e});return i?"boolean"===i.type?JSON.parse(i.value):i.value:null},t.prototype.findProcessVariableValue=function(e,t){if(t.processVariables){var i=t.processVariables.find(function(t){return t.name===e});if(i)return"boolean"===i.type?JSON.parse(i.value):i.value}},t.prototype.containerFactory=function(e,i){var n=this;if(this.numberOfColumns=e.numberOfColumns||1,this.fields=e.fields,this.rowspan=1,this.colspan=1,e.fields)for(var o in e.fields)if(e.fields.hasOwnProperty(o)){var a=new r.ContainerColumnModel,s=(e.fields[o]||[]).map(function(e){return new t(i,e)});a.fields=s,a.rowspan=e.fields[o].length,a.fields.forEach(function(e){n.colspan=e.colspan>n.colspan?e.colspan:n.colspan}),this.rowspan=this.rowspan<a.rowspan?a.rowspan:this.rowspan,this.columns.push(a)}},t.prototype.parseValue=function(e){var t=e.value;if(e.type===s.FormFieldTypes.DROPDOWN&&e.hasEmptyValue&&e.options){if((e.options||[]).length>0){var i=e.options[0];""!==t&&t!==i.id&&t!==i.name||(t=i.id)}}if(e.type===s.FormFieldTypes.RADIO_BUTTONS){var n=this.options.filter(function(e){return e.id===t||e.name===t});n.length>0&&(t=n[0].id)}if(e.type===s.FormFieldTypes.DATE&&t){var r=void 0;(r=l.NumberFieldValidator.isNumber(t)?o(t):o(t.split("T")[0],"YYYY-M-D"))&&r.isValid()&&(t=r.format(this.dateDisplayFormat))}return t},t.prototype.updateForm=function(){var e=this;if(this.form){switch(this.type){case s.FormFieldTypes.DROPDOWN:if("empty"===this.value||""===this.value)this.form.values[this.id]={};else{var t=this.options.filter(function(t){return t.id===e.value});t.length>0&&(this.form.values[this.id]=t[0])}break;case s.FormFieldTypes.RADIO_BUTTONS:var i=this.options.filter(function(t){return t.id===e.value});i.length>0&&(this.form.values[this.id]=i[0]);break;case s.FormFieldTypes.UPLOAD:this.value&&this.value.length>0?this.form.values[this.id]=this.value.map(function(e){return e.id}).join(","):this.form.values[this.id]=null;break;case s.FormFieldTypes.TYPEAHEAD:var n=this.options.filter(function(t){return t.id===e.value});n.length>0?this.form.values[this.id]=n[0]:this.options.length>0&&(this.form.values[this.id]=null);break;case s.FormFieldTypes.DATE:var r=o(this.value,this.dateDisplayFormat,!0);r&&r.isValid()?this.form.values[this.id]=r.format("YYYY-MM-DD")+"T00:00:00.000Z":(this.form.values[this.id]=null,this._value=this.value);break;case s.FormFieldTypes.NUMBER:this.form.values[this.id]=parseInt(this.value,10);break;case s.FormFieldTypes.AMOUNT:this.form.values[this.id]=this.enableFractions?parseFloat(this.value):parseInt(this.value,10);break;default:s.FormFieldTypes.isReadOnlyType(this.type)||this.isInvalidFieldType(this.type)||(this.form.values[this.id]=this.value)}this.form.onFormFieldChanged(this)}},t.prototype.isInvalidFieldType=function(e){return"container"===e},t.prototype.getOptionName=function(){var e=this,t=this.options.find(function(t){return t.id===e.value});return t?t.name:null},t.prototype.hasOptions=function(){return this.options&&this.options.length>0},t}(i(14).FormWidgetModel);t.FormFieldModel=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.size=12,this.fields=[],this.colspan=1,this.rowspan=1}return e.prototype.hasFields=function(){return this.fields&&this.fields.length>0},e}();t.ContainerColumnModel=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.message="",this.attributes=null,this.message=e&&e.message?e.message:"",this.attributes=new Map}return e.prototype.isActive=function(){return!!this.message},e.prototype.getAttributesAsJsonObj=function(){var e={};if(this.attributes.size>0){var t=Object.create(null);this.attributes.forEach(function(e,i){t[i]=e}),e=JSON.stringify(t)}return e},e}();t.ErrorMessageModel=n},function(e,t,i){"use strict";var n=i(14);class o extends n.FormWidgetModel{constructor(e,t){super(e,t),this.isSystem=!1,this.isSelected=!1,t&&(this.isSystem=!!t.isSystem,this.isSelected=!(!e||t.name!==e.selectedOutcome))}}t.a=o,o.SAVE_ACTION="Save",o.COMPLETE_ACTION="Complete",o.START_PROCESS_ACTION="Start Process"},function(e,t,i){"use strict";var n=i(14);class o extends n.FormWidgetModel{constructor(e,t){super(e,t),this.isVisible=!0,this.fields=[],t&&(this.title=t.title,this.visibilityCondition=t.visibilityCondition)}hasContent(){return this.fields&&this.fields.length>0}}t.a=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this.contentAvailable=e&&e.contentAvailable,this.created=e&&e.created,this.createdBy=e&&e.createdBy||{},this.id=e&&e.id,this.link=e&&e.link,this.mimeType=e&&e.mimeType,this.name=e&&e.name,this.previewStatus=e&&e.previewStatus,this.relatedContent=e&&e.relatedContent,this.simpleType=e&&e.simpleType,this.thumbnailStatus=e&&e.thumbnailStatus}hasPreviewStatus(){return"supported"===this.previewStatus}isTypeImage(){return"image"===this.simpleType}isTypePdf(){return"pdf"===this.simpleType}isTypeDoc(){return"word"===this.simpleType||"content"===this.simpleType}isThumbnailReady(){return"created"===this.thumbnailStatus}isThumbnailSupported(){return this.isTypeImage()||(this.isTypePdf()||this.isTypeDoc())&&this.isThumbnailReady()}}t.ContentLinkModel=n},function(e,t,i){var n=i(289);e.exports="string"==typeof n?n:n.toString()},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var n=i(1),o=i(0);i.n(o);let r=class{constructor(e){this.formService=e,this.forms=[]}ngOnChanges(e){this.getForms()}isEmpty(){return this.forms&&0===this.forms.length}getForms(){this.formService.getForms().subscribe(e=>{this.forms.push(...e)})}};n.a([Object(o.Input)()],r.prototype,"forms",void 0),r=n.a([Object(o.Component)({selector:"adf-form-list",template:i(290),styles:[i(291)],encapsulation:o.ViewEncapsulation.None})],r)},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),a=i(3),s=i(96),l=i(92),d=i(7),c=function(){function e(e,t,i,n){this.formService=e,this.logService=t,this.contentService=i,this.processContentService=n,this.showDocumentContent=!0,this.contentClick=new r.EventEmitter,this.thumbnailLoaded=new r.EventEmitter,this.contentLoaded=new r.EventEmitter,this.error=new r.EventEmitter}return e.prototype.ngOnChanges=function(e){var t=e.id;t&&t.currentValue&&this.loadContent(t.currentValue)},e.prototype.loadContent=function(e){var t=this;this.processContentService.getFileContent(e).subscribe(function(e){t.content=new l.ContentLinkModel(e),t.contentLoaded.emit(t.content),t.loadThumbnailUrl(t.content)},function(e){t.error.emit(e)})},e.prototype.loadThumbnailUrl=function(e){var t=this;if(this.content.isThumbnailSupported()){var i=void 0;(i=this.content.isTypeImage()?this.processContentService.getFileRawContent(e.id):this.processContentService.getContentThumbnailUrl(e.id))&&i.subscribe(function(e){t.content.thumbnailUrl=t.contentService.createTrustedUrl(e),t.thumbnailLoaded.emit(t.content.thumbnailUrl)},function(e){t.error.emit(e)})}},e.prototype.openViewer=function(e){var t=this;this.processContentService.getFileRawContent(e.id).subscribe(function(i){e.contentBlob=i,t.contentClick.emit(e),t.logService.info("Content clicked"+e.id),t.formService.formContentClicked.next(e)},function(e){t.error.emit(e)})},e.prototype.download=function(e){var t=this;this.processContentService.getFileRawContent(e.id).subscribe(function(i){return t.contentService.downloadBlob(i,e.name)},function(e){t.error.emit(e)})},n([r.Input(),o("design:type",String)],e.prototype,"id",void 0),n([r.Input(),o("design:type",Boolean)],e.prototype,"showDocumentContent",void 0),n([r.Output(),o("design:type",Object)],e.prototype,"contentClick",void 0),n([r.Output(),o("design:type","function"==typeof(t=void 0!==r.EventEmitter&&r.EventEmitter)&&t||Object)],e.prototype,"thumbnailLoaded",void 0),n([r.Output(),o("design:type","function"==typeof(c=void 0!==r.EventEmitter&&r.EventEmitter)&&c||Object)],e.prototype,"contentLoaded",void 0),n([r.Output(),o("design:type","function"==typeof(u=void 0!==r.EventEmitter&&r.EventEmitter)&&u||Object)],e.prototype,"error",void 0),e=n([r.Component({selector:"adf-content",template:i(293),styles:[i(294)],encapsulation:r.ViewEncapsulation.None}),o("design:paramtypes",["function"==typeof(p=void 0!==d.FormService&&d.FormService)&&p||Object,"function"==typeof(f=void 0!==a.LogService&&a.LogService)&&f||Object,"function"==typeof(m=void 0!==a.ContentService&&a.ContentService)&&m||Object,"function"==typeof(h=void 0!==s.ProcessContentService&&s.ProcessContentService)&&h||Object])],e);var t,c,u,p,f,m,h}();t.ContentWidgetComponent=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"ProcessContentService",function(){return a});var n=i(1),o=i(0),r=(i.n(o),i(2));i.n(r);let a=s=class{constructor(e,t){this.apiService=e,this.logService=t}get contentApi(){return this.apiService.getInstance().activiti.contentApi}createTemporaryRawRelatedContent(e){return r.Observable.fromPromise(this.contentApi.createTemporaryRawRelatedContent(e)).catch(e=>this.handleError(e))}getFileContent(e){return r.Observable.fromPromise(this.contentApi.getContent(e)).catch(e=>this.handleError(e))}getFileRawContent(e){return r.Observable.fromPromise(this.contentApi.getRawContent(e)).catch(e=>this.handleError(e))}getFileRawContentUrl(e){return this.contentApi.getRawContentUrl(e)}getContentThumbnailUrl(e){return r.Observable.fromPromise(this.contentApi.getContentThumbnailUrl(e)).catch(e=>this.handleError(e))}getTaskRelatedContent(e){return r.Observable.fromPromise(this.contentApi.getRelatedContentForTask(e)).catch(e=>this.handleError(e))}getProcessRelatedContent(e){return r.Observable.fromPromise(this.contentApi.getRelatedContentForProcessInstance(e)).catch(e=>this.handleError(e))}deleteRelatedContent(e){return r.Observable.fromPromise(this.contentApi.deleteContent(e)).catch(e=>this.handleError(e))}createProcessRelatedContent(e,t,i){return r.Observable.fromPromise(this.contentApi.createRelatedContentOnProcessInstance(e,t,i)).catch(e=>this.handleError(e))}createTaskRelatedContent(e,t,i){return r.Observable.fromPromise(this.contentApi.createRelatedContentOnTask(e,t,i)).catch(e=>this.handleError(e))}toJson(e){return e?e||{}:{}}toJsonArray(e){return e?e.data||[]:[]}handleError(e){let t=s.UNKNOWN_ERROR_MESSAGE;return e&&(t=e.message?e.message:e.status?`${e.status} - ${e.statusText}`:s.GENERIC_ERROR_MESSAGE),this.logService.error(t),r.Observable.throw(t)}};a.UNKNOWN_ERROR_MESSAGE="Unknown error",a.GENERIC_ERROR_MESSAGE="Server error",a=s=n.a([Object(o.Injectable)()],a);var s},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i(1),o=i(0),r=(i.n(o),i(48)),a=(i.n(r),i(22));let s=class extends r.FormComponent{constructor(e,t,i){super(e,t,null,null),this.showOutcomeButtons=!0,this.showRefreshButton=!0,this.readOnlyForm=!1,this.outcomeClick=new o.EventEmitter,this.formContentClicked=new o.EventEmitter,this.outcomesContainer=null,this.showTitle=!1}ngOnInit(){this.formService.formContentClicked.subscribe(e=>{this.formContentClicked.emit(e)})}ngOnChanges(e){let t=e.processDefinitionId;if(t&&t.currentValue)return this.visibilityService.cleanProcessVariable(),void this.getStartFormDefinition(t.currentValue);let i=e.processId;return i&&i.currentValue?(this.visibilityService.cleanProcessVariable(),void this.loadStartForm(i.currentValue)):void 0}loadStartForm(e){this.formService.getProcessIntance(e).subscribe(t=>{this.formService.getStartFormInstance(e).subscribe(e=>{this.formName=e.name,t.variables&&(e.processVariables=t.variables),this.form=this.parseForm(e),this.form.readOnly=this.readOnlyForm,this.onFormLoaded(this.form)},e=>this.handleError(e))})}getStartFormDefinition(e){this.formService.getStartFormDefinition(e).subscribe(e=>{this.formName=e.processDefinitionName,this.form=this.parseForm(e),this.form.readOnly=this.readOnlyForm,this.onFormLoaded(this.form)},e=>this.handleError(e))}isOutcomeButtonVisible(e,t){return(!e||!e.isSystem||e.name!==a.FormOutcomeModel.SAVE_ACTION&&e.name!==a.FormOutcomeModel.COMPLETE_ACTION)&&(!(!e||e.name!==a.FormOutcomeModel.START_PROCESS_ACTION)||super.isOutcomeButtonVisible(e,t))}saveTaskForm(){}onRefreshClicked(){this.processDefinitionId?(this.visibilityService.cleanProcessVariable(),this.getStartFormDefinition(this.processDefinitionId)):this.processId&&(this.visibilityService.cleanProcessVariable(),this.loadStartForm(this.processId))}completeTaskForm(e){this.outcomeClick.emit(e)}};n.a([Object(o.Input)()],s.prototype,"processDefinitionId",void 0),n.a([Object(o.Input)()],s.prototype,"processId",void 0),n.a([Object(o.Input)()],s.prototype,"showOutcomeButtons",void 0),n.a([Object(o.Input)()],s.prototype,"showRefreshButton",void 0),n.a([Object(o.Input)()],s.prototype,"readOnlyForm",void 0),n.a([Object(o.Output)()],s.prototype,"outcomeClick",void 0),n.a([Object(o.Output)()],s.prototype,"formContentClicked",void 0),n.a([Object(o.ViewChild)("outcomesContainer",{})],s.prototype,"outcomesContainer",void 0),s=n.a([Object(o.Component)({selector:"adf-start-form",template:i(296),styles:[i(93)],encapsulation:o.ViewEncapsulation.None})],s)},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i(1),o=i(0),r=(i.n(o),i(5)),a=i(297);let s=class extends r.WidgetComponent{constructor(e){super(e),this.formService=e}onExpanderClicked(){this.content&&this.content.isCollapsible()&&(this.content.isExpanded=!this.content.isExpanded)}ngOnInit(){this.field&&(this.content=new a.a(this.field))}get fields(){const e=[];let t=!0,i=0;for(;t;){t=!1;for(let n=0;n<this.content.columns.length;n++){let o=this.content.columns[n].fields[i];o&&(t=!0),e.push(o)}i++}return e}getColumnWith(e){const t=e?e.colspan:1;return 100/this.content.json.numberOfColumns*t+"%"}};s=n.a([Object(o.Component)({selector:"container-widget",template:i(298),styles:[i(299)],host:r.baseHost,encapsulation:o.ViewEncapsulation.None})],s)},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var n=i(1),o=i(0);i.n(o);let r=class{constructor(){this.tabs=[],this.formTabChanged=new o.EventEmitter,this.visibleTabs=[]}hasTabs(){return this.tabs&&this.tabs.length>0}ngAfterContentChecked(){this.filterVisibleTabs()}filterVisibleTabs(){this.visibleTabs=this.tabs.filter(e=>e.isVisible)}tabChanged(e){this.formTabChanged.emit(e)}};n.a([Object(o.Input)()],r.prototype,"tabs",void 0),n.a([Object(o.Output)()],r.prototype,"formTabChanged",void 0),r=n.a([Object(o.Component)({selector:"tabs-widget",template:i(301),encapsulation:o.ViewEncapsulation.None})],r)},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(7),l=i(5),d=function(e){function t(t){var i=e.call(this,t)||this;return i.formService=t,i}return n(t,e),t=o([a.Component({selector:"unknown-widget",template:'\n            <mat-list class="adf-unknown-widget">\n                <mat-list-item>\n                     <mat-icon class="mat-24">error_outline</mat-icon>\n                     <span class="adf-unknown-text">Unknown type: {{field.type}}</span>\n                </mat-list-item>\n            </mat-list>\n\n    ',styles:[i(302)],host:l.baseHost,encapsulation:a.ViewEncapsulation.None}),r("design:paramtypes",["function"==typeof(d=void 0!==s.FormService&&s.FormService)&&d||Object])],t);var d}(l.WidgetComponent);t.UnknownWidgetComponent=d},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n=i(1),o=i(0),r=(i.n(o),i(5));let a=s=class extends r.WidgetComponent{constructor(e){super(e),this.formService=e,this.currency=s.DEFAULT_CURRENCY}ngOnInit(){this.field&&this.field.currency&&(this.currency=this.field.currency)}};a.DEFAULT_CURRENCY="$",a=s=n.a([Object(o.Component)({selector:"amount-widget",template:i(304),styles:[i(305)],host:r.baseHost,encapsulation:o.ViewEncapsulation.None})],a);var s},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n=i(1),o=i(0),r=(i.n(o),i(5));let a=class extends r.WidgetComponent{constructor(e,t){super(e),this.formService=e,this.contentService=t,this.fieldChanged=new o.EventEmitter,this.error=new o.EventEmitter}ngOnInit(){if(this.field){let e=this.field.params;e&&e.fileSource&&e.fileSource.selectedFolder&&(this.selectedFolderSiteId=e.fileSource.selectedFolder.siteId,this.selectedFolderSiteName=e.fileSource.selectedFolder.site,this.setupFileBrowser(),this.getExternalContentNodes())}}setupFileBrowser(){if(this.field){let e=this.field.params;this.selectedFolderPathId=e.fileSource.selectedFolder.pathId,this.selectedFolderAccountId=e.fileSource.selectedFolder.accountId}}getLinkedFileName(){let e=this.fileName;return this.selectedFile&&this.selectedFile.title&&(e=this.selectedFile.title),this.field&&this.field.value&&this.field.value.length>0&&this.field.value[0].name&&(e=this.field.value[0].name),e}getExternalContentNodes(){this.contentService.getAlfrescoNodes(this.selectedFolderAccountId,this.selectedFolderPathId).subscribe(e=>this.selectedFolderNodes=e,e=>{this.error.emit(e)})}selectFile(e,t){this.contentService.linkAlfrescoNode(this.selectedFolderAccountId,e,this.selectedFolderSiteId).subscribe(t=>{this.selectedFile=e,this.field.value=[t],this.field.json.value=[t],this.closeDialog(),this.fieldChanged.emit(this.field)})}selectFolder(e,t){this.selectedFolderPathId=e.id,this.getExternalContentNodes()}showDialog(){return this.setupFileBrowser(),this.getExternalContentNodes(),!!this.dialog}closeDialog(){this.dialog&&this.dialog.nativeElement.close()}cancel(){this.closeDialog()}reset(){this.field.value=null,this.field.json.value=null}hasFile(){return this.field&&this.field.value}};n.a([Object(o.Output)()],a.prototype,"fieldChanged",void 0),n.a([Object(o.Output)()],a.prototype,"error",void 0),n.a([Object(o.ViewChild)("dialog")],a.prototype,"dialog",void 0),a=n.a([Object(o.Component)({selector:"attach-widget",template:i(307),styles:[i(308)],host:r.baseHost,encapsulation:o.ViewEncapsulation.None})],a)},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n=i(1),o=i(0),r=(i.n(o),i(5));let a=class extends r.WidgetComponent{constructor(e,t){super(t),this.visibilityService=e,this.formService=t}onChange(){this.visibilityService.refreshVisibility(this.field.form)}};a=n.a([Object(o.Component)({selector:"checkbox-widget",template:i(310),host:r.baseHost,encapsulation:o.ViewEncapsulation.None})],a)},function(e,t,i){"use strict";i.d(t,"a",function(){return d});var n=i(1),o=i(0),r=(i.n(o),i(4)),a=(i.n(r),i(6)),s=(i.n(a),i(3)),l=(i.n(s),i(5));let d=class extends l.WidgetComponent{constructor(e,t,i){super(e),this.formService=e,this.dateAdapter=t,this.preferences=i}ngOnInit(){this.preferences.locale$.subscribe(e=>{this.dateAdapter.setLocale(e)});this.dateAdapter.overrideDisplyaFormat=this.field.dateDisplayFormat,this.field&&(this.field.minValue&&(this.minDate=a(this.field.minValue,"DD/MM/YYYY")),this.field.maxValue&&(this.maxDate=a(this.field.maxValue,"DD/MM/YYYY"))),this.displayDate=a(this.field.value,this.field.dateDisplayFormat)}onDateChanged(e){e&&e.value?this.field.value=e.value.format(this.field.dateDisplayFormat):this.field.value=e||null,this.checkVisibility(this.field)}};d=n.a([Object(o.Component)({selector:"date-widget",providers:[{provide:r.DateAdapter,useClass:s.MomentDateAdapter},{provide:r.MAT_DATE_FORMATS,useValue:s.MOMENT_DATE_FORMATS}],template:i(311),styles:[i(312)],host:l.baseHost,encapsulation:o.ViewEncapsulation.None})],d)},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n=i(1),o=i(0),r=(i.n(o),i(5));let a=class extends r.WidgetComponent{constructor(e){super(e),this.formService=e}};a=n.a([Object(o.Component)({selector:"display-text-widget",template:i(314),styles:[i(315)],host:r.baseHost,encapsulation:o.ViewEncapsulation.None})],a)},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(7),l=i(5),d=function(e){function t(t){var i=e.call(this,t)||this;return i.formService=t,i.fileId=null,i.hasFile=!1,i}return n(t,e),t.prototype.ngOnInit=function(){if(this.field){var e=this.field.value;e?(this.fileId=e.id,this.hasFile=!0):(this.fileId=null,this.hasFile=!1)}},t=o([a.Component({selector:"adf-form-document-widget",template:i(317),host:l.baseHost,encapsulation:a.ViewEncapsulation.None}),r("design:paramtypes",["function"==typeof(d=void 0!==s.FormService&&s.FormService)&&d||Object])],t);var d}(l.WidgetComponent);t.DocumentWidgetComponent=d},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n=i(1),o=i(0),r=(i.n(o),i(5));let a=class extends r.WidgetComponent{constructor(e,t,i){super(e),this.formService=e,this.visibilityService=t,this.logService=i}ngOnInit(){this.field&&this.field.restUrl&&(this.field.form.taskId?this.getValuesByTaskId():this.getValuesByProcessDefinitionId())}getValuesByTaskId(){this.formService.getRestFieldValues(this.field.form.taskId,this.field.id).subscribe(e=>{let t=[];this.field.emptyOption&&t.push(this.field.emptyOption),this.field.options=t.concat(e||[]),this.field.updateForm()},e=>this.handleError(e))}getValuesByProcessDefinitionId(){this.formService.getRestFieldValuesByProcessId(this.field.form.processDefinitionId,this.field.id).subscribe(e=>{let t=[];this.field.emptyOption&&t.push(this.field.emptyOption),this.field.options=t.concat(e||[]),this.field.updateForm()},e=>this.handleError(e))}getOptionValue(e,t){let i="";return i="empty"===e.id||e.name!==t?e.id:e.name}checkVisibility(){this.visibilityService.refreshVisibility(this.field.form)}handleError(e){this.logService.error(e)}isReadOnlyType(){return"readonly"===this.field.type}};a=n.a([Object(o.Component)({selector:"dropdown-widget",template:i(318),styles:[i(319)],host:r.baseHost,encapsulation:o.ViewEncapsulation.None})],a)},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(3),l=i(53),d=i(7),c=i(5),u=i(109),p=function(e){function t(t,i,n,o,r){var a=e.call(this,t)||this;return a.formService=t,a.elementRef=i,a.visibilityService=n,a.logService=o,a.cd=r,a.ERROR_MODEL_NOT_FOUND="Table model not found",a.editMode=!1,a.editRow=null,a.selectArrayCode=[32,0,13],a}return n(t,e),t.prototype.ngOnInit=function(){this.field&&(this.content=new u.DynamicTableModel(this.field,this.formService),this.visibilityService.refreshVisibility(this.field.form))},t.prototype.forceFocusOnAddButton=function(){if(this.content){this.cd.detectChanges();var e=this.elementRef.nativeElement.querySelector("#"+this.content.id+"-add-row");this.isDynamicTableReady(e)&&e.focus()}},t.prototype.isDynamicTableReady=function(e){return this.field&&!this.editMode&&e},t.prototype.isValid=function(){var e=!0;return this.content&&this.content.field&&(e=this.content.field.isValid),e},t.prototype.onRowClicked=function(e){this.content&&(this.content.selectedRow=e)},t.prototype.onKeyPressed=function(e,t){this.content&&this.isEnterOrSpacePressed(e.keyCode)&&(this.content.selectedRow=t)},t.prototype.isEnterOrSpacePressed=function(e){return-1!==this.selectArrayCode.indexOf(e)},t.prototype.hasSelection=function(){return!(!this.content||!this.content.selectedRow)},t.prototype.moveSelectionUp=function(){return!(!this.content||this.readOnly)&&(this.content.moveRow(this.content.selectedRow,-1),!0)},t.prototype.moveSelectionDown=function(){return!(!this.content||this.readOnly)&&(this.content.moveRow(this.content.selectedRow,1),!0)},t.prototype.deleteSelection=function(){return!(!this.content||this.readOnly)&&(this.content.deleteRow(this.content.selectedRow),!0)},t.prototype.addNewRow=function(){return!(!this.content||this.readOnly)&&(this.editRow={isNew:!0,selected:!1,value:{}},this.editMode=!0,!0)},t.prototype.editSelection=function(){return!(!this.content||this.readOnly)&&(this.editRow=this.copyRow(this.content.selectedRow),this.editMode=!0,!0)},t.prototype.getCellValue=function(e,t){if(this.content){var i=this.content.getCellValue(e,t);return"Amount"===t.type?(t.amountCurrency||"$")+" "+(i||0):i}return null},t.prototype.onSaveChanges=function(){if(this.content){if(this.editRow.isNew){var e=this.copyRow(this.editRow);this.content.selectedRow=null,this.content.addRow(e),this.editRow.isNew=!1}else this.content.selectedRow.value=this.copyObject(this.editRow.value);this.content.flushValue()}else this.logService.error(this.ERROR_MODEL_NOT_FOUND);this.editMode=!1,this.forceFocusOnAddButton()},t.prototype.onCancelChanges=function(){this.editMode=!1,this.editRow=null,this.forceFocusOnAddButton()},t.prototype.copyRow=function(e){return{value:this.copyObject(e.value)}},t.prototype.copyObject=function(e){var t=this,i=e;return"object"==typeof e&&null!==e&&void 0!==e&&(i=Object.assign({},e),Object.keys(e).forEach(function(n){"object"==typeof e[n]&&(i[n]=t.copyObject(e[n]))})),i},t=o([a.Component({selector:"dynamic-table-widget",template:i(324),styles:[i(325)],host:c.baseHost,encapsulation:a.ViewEncapsulation.None}),r("design:paramtypes",["function"==typeof(p=void 0!==d.FormService&&d.FormService)&&p||Object,"function"==typeof(f=void 0!==a.ElementRef&&a.ElementRef)&&f||Object,"function"==typeof(m=void 0!==l.WidgetVisibilityService&&l.WidgetVisibilityService)&&m||Object,"function"==typeof(h=void 0!==s.LogService&&s.LogService)&&h||Object,"function"==typeof(v=void 0!==a.ChangeDetectorRef&&a.ChangeDetectorRef)&&v||Object])],t);var p,f,m,h,v}(c.WidgetComponent);t.DynamicTableWidgetComponent=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=(i.n(n),i(86)),r=i(14),a=i(321),s=(i.n(a),i(322)),l=i(323);i.n(l);class d extends r.FormWidgetModel{constructor(e,t){if(super(e.form,e.json),this.formService=t,this.columns=[],this.visibleColumns=[],this.rows=[],this._validators=[],this.field=e,e.json){const t=this.getColumns(e);t&&(this.columns=t,this.visibleColumns=this.columns.filter(e=>e.visible)),e.json.value&&(this.rows=e.json.value.map(e=>({selected:!1,value:e})))}this._validators=[new l.RequiredCellValidator,new a.DateCellValidator,new s.a]}get selectedRow(){return this._selectedRow}set selectedRow(e){if(this._selectedRow&&this._selectedRow===e)return this._selectedRow.selected=!1,void(this._selectedRow=null);this.rows.forEach(e=>e.selected=!1),this._selectedRow=e,e&&(this._selectedRow.selected=!0)}getColumns(e){if(e&&e.json){let t=e.json.columnDefinitions;if(!t&&e.json.params&&e.json.params.field&&(t=e.json.params.field.columnDefinitions),t)return t.map(e=>e)}return null}flushValue(){this.field&&(this.field.value=this.rows.map(e=>e.value),this.field.updateForm())}moveRow(e,t){let i=this.rows.indexOf(e);if(i>-1){let n=i+t;n<0?n=0:n>=this.rows.length&&(n=this.rows.length);let o=this.rows.slice();o.splice(i,1),o.splice(n,0,e),this.rows=o,this.flushValue()}}deleteRow(e){if(e){this.selectedRow===e&&(this.selectedRow=null);let t=this.rows.indexOf(e);t>-1&&(this.rows.splice(t,1),this.flushValue())}}addRow(e){e&&this.rows.push(e)}validateRow(e){const t={isValid:!0,text:null},i=new o.a(this.form,this.field,e,t);if(this.formService.validateDynamicTableRow.next(i),i.defaultPrevented||!t.isValid)return t;if(e)for(let i of this.columns)for(let n of this._validators)if(!n.validate(e,i,t))return t;return t}getCellValue(e,t){let i=e.value[t.id];return"Dropdown"===t.type&&i?i.name:"Boolean"===t.type?!!i:"Date"===t.type&&i?n(i.split("T")[0],"YYYY-MM-DD").format("DD-MM-YYYY"):i||""}getDisplayText(e){let t=e.name;if("Amount"===e.type){let i=e.amountCurrency||"$";t=`${e.name} (${i})`}return t}}t.DynamicTableModel=d},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var n=i(1),o=i(0);i.n(o);let r=class{onValueChanged(e,t,i){let n=i.checked;e.value[t.id]=n}};n.a([Object(o.Input)()],r.prototype,"table",void 0),n.a([Object(o.Input)()],r.prototype,"row",void 0),n.a([Object(o.Input)()],r.prototype,"column",void 0),r=n.a([Object(o.Component)({selector:"adf-boolean-editor",template:i(327),styles:[i(328)]})],r)},function(e,t,i){"use strict";i.d(t,"a",function(){return l});var n=i(1),o=i(0),r=(i.n(o),i(4)),a=(i.n(r),i(6)),s=(i.n(a),i(3));i.n(s);let l=class{constructor(e,t){this.dateAdapter=e,this.preferences=t,this.DATE_FORMAT="DD-MM-YYYY"}ngOnInit(){this.preferences.locale$.subscribe(e=>{this.dateAdapter.setLocale(e)});this.dateAdapter.overrideDisplyaFormat=this.DATE_FORMAT,this.value=a(this.table.getCellValue(this.row,this.column),this.DATE_FORMAT)}onDateChanged(e){if(e){let t=a(e,this.DATE_FORMAT,!0);t.isValid()?(this.row.value[this.column.id]=`${t.format("YYYY-MM-DD")}T00:00:00.000Z`,this.table.flushValue()):this.row.value[this.column.id]=""}}};n.a([Object(o.Input)()],l.prototype,"table",void 0),n.a([Object(o.Input)()],l.prototype,"row",void 0),n.a([Object(o.Input)()],l.prototype,"column",void 0),l=n.a([Object(o.Component)({selector:"adf-date-editor",template:i(330),providers:[{provide:r.DateAdapter,useClass:s.MomentDateAdapter},{provide:r.MAT_DATE_FORMATS,useValue:s.MOMENT_DATE_FORMATS}],styles:[i(331)]})],l)},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var n=i(1),o=i(0);i.n(o);let r=class{constructor(e,t){this.formService=e,this.logService=t,this.value=null,this.options=[]}ngOnInit(){let e=this.table.field;e&&("rest"===this.column.optionType?this.table.form&&this.table.form.taskId?this.getValuesByTaskId(e):this.getValuesByProcessDefinitionId(e):(this.options=this.column.options||[],this.value=this.table.getCellValue(this.row,this.column)))}getValuesByTaskId(e){this.formService.getRestFieldValuesColumn(e.form.taskId,e.id,this.column.id).subscribe(e=>{this.column.options=e||[],this.options=this.column.options,this.value=this.table.getCellValue(this.row,this.column)},e=>this.handleError(e))}getValuesByProcessDefinitionId(e){this.formService.getRestFieldValuesColumnByProcessId(e.form.processDefinitionId,e.id,this.column.id).subscribe(e=>{this.column.options=e||[],this.options=this.column.options,this.value=this.table.getCellValue(this.row,this.column)},e=>this.handleError(e))}onValueChanged(e,t,i){let n=i.value;n=t.options.find(e=>e.name===n),e.value[t.id]=n}handleError(e){this.logService.error(e)}};n.a([Object(o.Input)()],r.prototype,"table",void 0),n.a([Object(o.Input)()],r.prototype,"row",void 0),n.a([Object(o.Input)()],r.prototype,"column",void 0),r=n.a([Object(o.Component)({selector:"adf-dropdown-editor",template:i(333),styles:[i(334)]})],r)},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var n=i(1),o=i(0);i.n(o);let r=class{constructor(){this.save=new o.EventEmitter,this.cancel=new o.EventEmitter,this.validationSummary={isValid:!0,text:null}}onCancelChanges(){this.cancel.emit({table:this.table,row:this.row,column:this.column})}onSaveChanges(){this.validate(),this.isValid()&&this.save.emit({table:this.table,row:this.row,column:this.column})}isValid(){return this.validationSummary&&this.validationSummary.isValid}validate(){this.validationSummary=this.table.validateRow(this.row)}};n.a([Object(o.Input)()],r.prototype,"table",void 0),n.a([Object(o.Input)()],r.prototype,"row",void 0),n.a([Object(o.Input)()],r.prototype,"column",void 0),n.a([Object(o.Output)()],r.prototype,"save",void 0),n.a([Object(o.Output)()],r.prototype,"cancel",void 0),r=n.a([Object(o.Component)({selector:"row-editor",template:i(336),styles:[i(337)]})],r)},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var n=i(1),o=i(0);i.n(o);let r=class{ngOnInit(){this.displayName=this.table.getDisplayText(this.column)}onValueChanged(e,t,i){let n=i.target.value;e.value[t.id]=n}};n.a([Object(o.Input)()],r.prototype,"table",void 0),n.a([Object(o.Input)()],r.prototype,"row",void 0),n.a([Object(o.Input)()],r.prototype,"column",void 0),r=n.a([Object(o.Component)({selector:"adf-text-editor",template:i(339),styles:[i(340)]})],r)},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=i(342),s=i(0),l=i(22),d=i(7),c=i(5),u=function(e){function t(t){var i=e.call(this,t)||this;return i.formService=t,i.translateParameters=null,i._subscriptAnimationState="",i}return n(t,e),t.prototype.ngOnChanges=function(e){e.required&&(this.required=e.required.currentValue,this._subscriptAnimationState="enter"),e.error&&e.error.currentValue.isActive()&&(this.error=e.error.currentValue,this.translateParameters=this.error.getAttributesAsJsonObj(),this._subscriptAnimationState="enter")},o([s.Input(),r("design:type","function"==typeof(u=void 0!==l.ErrorMessageModel&&l.ErrorMessageModel)&&u||Object)],t.prototype,"error",void 0),o([s.Input(),r("design:type",String)],t.prototype,"required",void 0),t=o([s.Component({selector:"error-widget",template:i(343),styles:[i(344)],animations:[a.trigger("transitionMessages",[a.state("enter",a.style({opacity:1,transform:"translateY(0%)"})),a.transition("void => enter",[a.style({opacity:0,transform:"translateY(-100%)"}),a.animate("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])],host:c.baseHost,encapsulation:s.ViewEncapsulation.None}),r("design:paramtypes",["function"==typeof(p=void 0!==d.FormService&&d.FormService)&&p||Object])],t);var u,p}(c.WidgetComponent);t.ErrorWidgetComponent=u},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i(1),o=i(55),r=(i.n(o),i(0)),a=(i.n(r),i(5));let s=class extends a.WidgetComponent{constructor(e,t){super(e),this.formService=e,this.elementRef=t,this.groups=[],this.minTermLength=1}ngOnInit(){if(this.field){let e=this.field.value;e&&(this.value=e.name);let t=this.field.params;if(t&&t.restrictWithGroup){let e=t.restrictWithGroup;this.groupId=e.id}this.value&&this.formService.getWorkflowGroups(this.value,this.groupId).subscribe(e=>this.groups=e||[])}}onKeyUp(e){this.value&&this.value.length>=this.minTermLength&&this.oldValue!==this.value&&e.keyCode!==o.ESCAPE&&e.keyCode!==o.ENTER&&(this.oldValue=this.value,this.formService.getWorkflowGroups(this.value,this.groupId).subscribe(e=>{this.groups=e||[]}))}flushValue(){let e=this.groups.find(e=>e.name.toLocaleLowerCase()===this.value.toLocaleLowerCase());e?(this.field.value=e,this.value=e.name):(this.field.value=null,this.value=null),this.field.updateForm()}onItemClick(e,t){e&&(this.field.value=e,this.value=e.name),t&&t.preventDefault()}onItemSelect(e){e&&(this.field.value=e,this.value=e.name)}};s=n.a([Object(r.Component)({selector:"functional-group-widget",template:i(346),styles:[i(347)],host:a.baseHost,encapsulation:r.ViewEncapsulation.None})],s)},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n=i(1),o=i(0),r=(i.n(o),i(5));let a=class extends r.WidgetComponent{constructor(e){super(e),this.formService=e,this.linkUrl=r.WidgetComponent.DEFAULT_HYPERLINK_URL,this.linkText=null}ngOnInit(){this.field&&(this.linkUrl=this.getHyperlinkUrl(this.field),this.linkText=this.getHyperlinkText(this.field))}};a=n.a([Object(o.Component)({selector:"hyperlink-widget",template:i(349),styles:[i(350)],host:r.baseHost,encapsulation:o.ViewEncapsulation.None})],a)},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n=i(1),o=i(0),r=(i.n(o),i(5));let a=class extends r.WidgetComponent{constructor(e){super(e),this.formService=e}};a=n.a([Object(o.Component)({selector:"multiline-text-widget",template:i(352),styles:[i(353)],host:r.baseHost,encapsulation:o.ViewEncapsulation.None})],a)},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(7),l=i(5),d=function(e){function t(t){var i=e.call(this,t)||this;return i.formService=t,i}return n(t,e),t=o([a.Component({selector:"number-widget",template:i(355),styles:[i(356)],host:l.baseHost,encapsulation:a.ViewEncapsulation.None}),r("design:paramtypes",["function"==typeof(d=void 0!==s.FormService&&s.FormService)&&d||Object])],t);var d}(l.WidgetComponent);t.NumberWidgetComponent=d},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i(1),o=i(55),r=(i.n(o),i(0)),a=(i.n(r),i(5));let s=class extends a.WidgetComponent{constructor(e,t){super(e),this.formService=e,this.peopleProcessService=t,this.minTermLength=1,this.users=[]}ngOnInit(){if(this.field){let e=this.field.params;if(e&&e.restrictWithGroup){let t=e.restrictWithGroup;this.groupId=t.id}}}onKeyUp(e){let t=this.input.nativeElement.value;t&&t.length>=this.minTermLength&&this.oldValue!==t?e.keyCode!==o.ESCAPE&&e.keyCode!==o.ENTER&&t.length>=this.minTermLength&&(this.oldValue=t,this.searchUsers(t)):this.validateValue(t)}searchUsers(e){this.formService.getWorkflowUsers(e,this.groupId).subscribe(t=>{this.users=t||[],this.validateValue(e)})}validateValue(e){this.isValidUser(e)?this.field.validationSummary.message="":e?(this.field.validationSummary.message="FORM.FIELD.VALIDATOR.INVALID_VALUE",this.field.markAsInvalid(),this.field.form.markAsInvalid()):(this.field.value=null,this.users=[])}isValidUser(e){let t=!1;if(e){this.users.find(t=>this.getDisplayName(t).toLocaleLowerCase()===e.toLocaleLowerCase())&&(t=!0)}return t}getDisplayName(e){if(e){return`${e.firstName||""} ${e.lastName||""}`.trim()}return""}onItemSelect(e){e&&(this.field.value=e)}};n.a([Object(r.ViewChild)("inputValue")],s.prototype,"input",void 0),s=n.a([Object(r.Component)({selector:"people-widget",template:i(358),styles:[i(359)],host:a.baseHost,encapsulation:r.ViewEncapsulation.None})],s)},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n=i(1),o=i(0),r=(i.n(o),i(5));let a=class extends r.WidgetComponent{constructor(e,t,i){super(e),this.formService=e,this.visibilityService=t,this.logService=i}ngOnInit(){this.field&&this.field.restUrl&&(this.field.form.taskId?this.getOptionsByTaskId():this.getOptionsByProcessDefinitionId())}getOptionsByTaskId(){this.formService.getRestFieldValues(this.field.form.taskId,this.field.id).subscribe(e=>{this.field.options=e||[],this.field.updateForm()},e=>this.handleError(e))}getOptionsByProcessDefinitionId(){this.formService.getRestFieldValuesByProcessId(this.field.form.processDefinitionId,this.field.id).subscribe(e=>{this.field.options=e||[],this.field.updateForm()},e=>this.handleError(e))}onOptionClick(e){this.field.value=e,this.checkVisibility()}checkVisibility(){this.visibilityService.refreshVisibility(this.field.form)}handleError(e){this.logService.error(e)}};a=n.a([Object(o.Component)({selector:"radio-buttons-widget",template:i(361),styles:[i(362)],host:r.baseHost,encapsulation:o.ViewEncapsulation.None})],a)},function(e,t,i){"use strict";i.d(t,"b",function(){return s});var n=i(1),o=i(0),r=(i.n(o),i(15));i.n(r);const a={provide:r.NG_VALUE_ACCESSOR,useExisting:Object(o.forwardRef)(()=>s),multi:!0};t.a=a;let s=class{constructor(e,t){this.el=e,this.render=t,this.translationMask={0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}},this.byPassKeys=[9,16,17,18,36,37,38,39,40,91],this.invalidCharacters=[],this._onChange=(e=>{}),this._onTouched=(()=>{})}onTextInput(e){this.inputMask&&this.inputMask.mask?this.maskValue(this.el.nativeElement.value,this.el.nativeElement.selectionStart,this.inputMask.mask,this.inputMask.isReversed,e.keyCode):this._onChange(this.el.nativeElement.value)}ngOnChanges(e){e.inputMask&&e.inputMask.currentValue.mask&&(this.inputMask=e.inputMask.currentValue)}writeValue(e){this.el.nativeElement.value=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}maskValue(e,t,i,n,o){if(-1===this.byPassKeys.indexOf(o)){let r=this.getMasked(!1,e,i,n),a=this.calculateCaretPosition(t,e,o);this.render.setElementAttribute(this.el.nativeElement,"value",r),this.el.nativeElement.value=r,this.setValue(r),this._onChange(r),this.setCaretPosition(a)}}setCaretPosition(e){this.el.nativeElement.moveStart=e,this.el.nativeElement.moveEnd=e}calculateCaretPosition(e,t,i){let n=t.length,o=this.getValue()||"",r=o.length;return 8===i&&o!==t?e-=t.slice(0,e).length-o.slice(0,e).length:o!==t&&(e>=r?e=n:e+=t.slice(0,e).length-o.slice(0,e).length),e}getMasked(e,t,i,n=!1){let o,r,a,s=[],l=t,d=0,c=i.length,u=0,p=l.length,f=1,m="push",h=-1;for(n?(m="unshift",f=-1,o=0,d=c-1,u=p-1):o=c-1,a=this.isToCheck(n,d,c,u,p);a;){let t=i.charAt(d),v=l.charAt(u),g=this.translationMask[t];g?(v.match(g.pattern)?(s[m](v),g.recursive&&(-1===h?h=d:d===o&&(d=h-f),o===h&&(d-=f)),d+=f):v===r?r=void 0:g.optional?(d+=f,u-=f):this.invalidCharacters.push({index:u,digit:v,translated:g.pattern}),u+=f):(e||s[m](t),v===t?u+=f:r=t,d+=f),a=this.isToCheck(n,d,c,u,p)}let v=i.charAt(o);return c!==p+1||this.translationMask[v]||s.push(v),s.join("")}isToCheck(e,t,i,n,o){let r=!1;return r=e?t>-1&&n>-1:t<i&&n<o}setValue(e){this.value=e}getValue(){return this.value}};n.a([Object(o.Input)("textMask")],s.prototype,"inputMask",void 0),n.a([Object(o.HostListener)("input",["$event"]),Object(o.HostListener)("keyup",["$event"])],s.prototype,"onTextInput",null),s=n.a([Object(o.Directive)({selector:"[textMask]",providers:[a]})],s)},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=i(0),s=i(7),l=i(5),d=function(e){function t(t){var i=e.call(this,t)||this;return i.formService=t,i}return n(t,e),t.prototype.ngOnInit=function(){this.field.params&&this.field.params.inputMask&&(this.mask=this.field.params.inputMask,this.isMaskReversed=!!this.field.params.inputMaskReversed&&this.field.params.inputMaskReversed)},t=o([a.Component({selector:"text-widget",template:i(364),styles:[i(365)],host:l.baseHost,encapsulation:a.ViewEncapsulation.None}),r("design:paramtypes",["function"==typeof(d=void 0!==s.FormService&&s.FormService)&&d||Object])],t);var d}(l.WidgetComponent);t.TextWidgetComponent=d},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i(1),o=i(55),r=(i.n(o),i(0)),a=(i.n(r),i(5));let s=class extends a.WidgetComponent{constructor(e,t,i){super(e),this.formService=e,this.visibilityService=t,this.logService=i,this.minTermLength=1,this.options=[]}ngOnInit(){this.field.form.taskId?this.getValuesByTaskId():this.field.form.processDefinitionId&&this.getValuesByProcessDefinitionId(),this.isReadOnlyType()&&(this.value=this.field.value)}getValuesByTaskId(){this.formService.getRestFieldValues(this.field.form.taskId,this.field.id).subscribe(e=>{let t=e||[];this.field.options=t;let i=this.field.value;if(i){let e=t.find(e=>e.id===i);e&&(this.value=e.name)}this.field.updateForm(),this.visibilityService.refreshEntityVisibility(this.field)},e=>this.handleError(e))}getValuesByProcessDefinitionId(){this.formService.getRestFieldValuesByProcessId(this.field.form.processDefinitionId,this.field.id).subscribe(e=>{let t=e||[];this.field.options=t;let i=this.field.value;if(i){let e=t.find(e=>e.id===i);e&&(this.value=e.name)}this.field.updateForm(),this.visibilityService.refreshEntityVisibility(this.field)},e=>this.handleError(e))}getOptions(){let e=this.value.trim().toLocaleLowerCase();return this.field.options.filter(t=>{return t.name.toLocaleLowerCase().indexOf(e)>-1})}isValidOptionName(e){return!!this.field.options.find(t=>t.name&&t.name.toLocaleLowerCase()===e.toLocaleLowerCase())}onKeyUp(e){this.value&&this.value.trim().length>=this.minTermLength&&this.oldValue!==this.value&&e.keyCode!==o.ESCAPE&&e.keyCode!==o.ENTER&&this.value.length>=this.minTermLength&&(this.options=this.getOptions(),this.oldValue=this.value,this.isValidOptionName(this.value)&&(this.field.value=this.options[0].id)),this.isValueDefined()&&0===this.value.trim().length&&(this.oldValue=this.value,this.options=[])}onItemSelect(e){e&&(this.field.value=e.id,this.value=e.name,this.checkVisibility())}validate(){this.field.value=this.value}isValueDefined(){return null!==this.value&&void 0!==this.value}handleError(e){this.logService.error(e)}checkVisibility(){this.visibilityService.refreshVisibility(this.field.form)}isReadOnlyType(){return"readonly"===this.field.type}};s=n.a([Object(r.Component)({selector:"typeahead-widget",template:i(367),styles:[i(368)],host:a.baseHost,encapsulation:r.ViewEncapsulation.None})],s)},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i(1),o=i(0),r=(i.n(o),i(2)),a=(i.n(r),i(5));let s=class extends a.WidgetComponent{constructor(e,t,i,n){super(e),this.formService=e,this.logService=t,this.thumbnailService=i,this.processContentService=n,this.multipleOption=""}ngOnInit(){this.field&&this.field.value&&this.field.value.length>0&&(this.hasFile=!0),this.getMultipleFileParam()}removeFile(e){this.field&&this.removeElementFromList(e)}onFileChanged(e){let t=e.target.files,i=[];this.field.json.value&&(i=[...this.field.json.value]),t&&t.length>0&&(r.Observable.from(t).flatMap(e=>this.uploadRawContent(e)).subscribe(e=>{i.push(e)},e=>{this.logService.error("Error uploading file. See console output for more details.")},()=>{this.field.value=i,this.field.json.value=i}),this.hasFile=!0)}uploadRawContent(e){return this.processContentService.createTemporaryRawRelatedContent(e).map(e=>(this.logService.info(e),e))}getMultipleFileParam(){this.field&&this.field.params&&this.field.params.multiple&&(this.multipleOption=this.field.params.multiple?"multiple":"")}removeElementFromList(e){let t=this.field.value.indexOf(e);-1!==t&&(this.field.value.splice(t,1),this.field.json.value=this.field.value,this.field.updateForm()),this.hasFile=this.field.value.length>0,this.resetFormValueWithNoFiles()}resetFormValueWithNoFiles(){0===this.field.value.length&&(this.field.value=[],this.field.json.value=[])}getIcon(e){return this.thumbnailService.getMimeTypeIcon(e)}fileClicked(e){this.processContentService.getFileRawContent(e.id).subscribe(t=>{e.contentBlob=t,this.formService.formContentClicked.next(e)},t=>{this.logService.error("Unable to send evento for file "+e.name)})}};n.a([Object(o.ViewChild)("uploadFiles")],s.prototype,"fileInput",void 0),s=n.a([Object(o.Component)({selector:"upload-widget",template:i(370),styles:[i(371)],host:a.baseHost,encapsulation:o.ViewEncapsulation.None})],s)},function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i(1),o=i(0),r=(i.n(o),i(3)),a=(i.n(r),i(54));let s=class extends r.DynamicComponentMapper{constructor(){super(),this.defaultValue=a.UnknownWidgetComponent,this.types={text:r.DynamicComponentResolver.fromType(a.TextWidgetComponent),string:r.DynamicComponentResolver.fromType(a.TextWidgetComponent),integer:r.DynamicComponentResolver.fromType(a.NumberWidgetComponent),"multi-line-text":r.DynamicComponentResolver.fromType(a.MultilineTextWidgetComponentComponent),boolean:r.DynamicComponentResolver.fromType(a.CheckboxWidgetComponent),dropdown:r.DynamicComponentResolver.fromType(a.DropdownWidgetComponent),date:r.DynamicComponentResolver.fromType(a.DateWidgetComponent),amount:r.DynamicComponentResolver.fromType(a.AmountWidgetComponent),"radio-buttons":r.DynamicComponentResolver.fromType(a.RadioButtonsWidgetComponent),hyperlink:r.DynamicComponentResolver.fromType(a.HyperlinkWidgetComponent),"readonly-text":r.DynamicComponentResolver.fromType(a.DisplayTextWidgetComponentComponent),typeahead:r.DynamicComponentResolver.fromType(a.TypeaheadWidgetComponent),people:r.DynamicComponentResolver.fromType(a.PeopleWidgetComponent),"functional-group":r.DynamicComponentResolver.fromType(a.FunctionalGroupWidgetComponent),"dynamic-table":r.DynamicComponentResolver.fromType(a.DynamicTableWidgetComponent),container:r.DynamicComponentResolver.fromType(a.ContainerWidgetComponent),group:r.DynamicComponentResolver.fromType(a.ContainerWidgetComponent),document:r.DynamicComponentResolver.fromType(a.DocumentWidgetComponent)},this.types.upload=(e=>{if(e){let t=e.params;return t&&t.link?a.AttachWidgetComponent:a.UploadWidgetComponent}return a.UnknownWidgetComponent})}};s=n.a([Object(o.Injectable)()],s)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(276);for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(48);i.n(n);for(var o in n)["FORM_FIELD_VALIDATORS","default"].indexOf(o)<0&&function(e){i.d(t,e,function(){return n[e]})}(o);var r=i(94);i.d(t,"FormListComponent",function(){return r.a});var a=i(95);i.n(a);for(var o in a)["FORM_FIELD_VALIDATORS","FormListComponent","default"].indexOf(o)<0&&function(e){i.d(t,e,function(){return a[e]})}(o);var s=i(97);i.d(t,"StartFormComponent",function(){return s.a});var l=i(7);i.d(t,"FormService",function(){return l.FormService});var d=i(54);for(var o in d)["FORM_FIELD_VALIDATORS","FormListComponent","StartFormComponent","FormService","default"].indexOf(o)<0&&function(e){i.d(t,e,function(){return d[e]})}(o);var c=i(33);i.n(c);for(var o in c)["FORM_FIELD_VALIDATORS","FormListComponent","StartFormComponent","FormService","default"].indexOf(o)<0&&function(e){i.d(t,e,function(){return c[e]})}(o);var u=i(52);i.d(t,"NodeService",function(){return u.NodeService});var p=i(126);i.d(t,"FormRenderingService",function(){return p.a});var f=i(49);i.d(t,"FormEvent",function(){return f.FormEvent}),i.d(t,"FormErrorEvent",function(){return f.FormErrorEvent}),i.d(t,"FormFieldEvent",function(){return f.FormFieldEvent}),i.d(t,"ValidateFormFieldEvent",function(){return f.ValidateFormFieldEvent}),i.d(t,"ValidateFormEvent",function(){return f.ValidateFormEvent}),i.d(t,"ValidateDynamicTableRowEvent",function(){return f.ValidateDynamicTableRowEvent});var m=i(373);i.n(m);for(var o in m)["FORM_FIELD_VALIDATORS","FormListComponent","StartFormComponent","FormService","NodeService","FormRenderingService","FormEvent","FormErrorEvent","FormFieldEvent","ValidateFormFieldEvent","ValidateFormEvent","ValidateDynamicTableRowEvent","default"].indexOf(o)<0&&function(e){i.d(t,e,function(){return m[e]})}(o);var h=i(34);i.d(t,"FORM_FIELD_VALIDATORS",function(){return h.FORM_FIELD_VALIDATORS});var v=i(374);i.d(t,"FormModule",function(){return v.a})},function(e,t,i){"use strict";var n=i(32);class o extends n.FormEvent{constructor(e,t){super(e),this.error=t}}t.a=o},function(e,t,i){"use strict";var n=i(50);class o extends n.a{constructor(e,t){super(e,t),this.isValid=!0}}t.a=o},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var i=e.call(this,t)||this;return i.isValid=!0,i}return n(t,e),t}(i(32).FormEvent);t.ValidateFormEvent=o},function(e,t,i){"use strict";class n{constructor(e,t,i,n,o){this.reusable=!1,this.newVersion=!1,this.formImageBase64="",this.formRepresentation={id:e,name:t,description:"",version:1,lastUpdatedBy:1,lastUpdatedByFullName:i,lastUpdated:n,stencilSetId:0,referenceId:null,formDefinition:{fields:[{name:"Label",type:"container",fieldType:"ContainerRepresentation",numberOfColumns:2,required:!1,readOnly:!1,sizeX:2,sizeY:1,row:-1,col:-1,fields:{1:this.metadataToFields(o)}}],gridsterForm:!1,javascriptEvents:[],metadata:{},outcomes:[],className:"",style:"",tabs:[],variables:[]}}}metadataToFields(e){let t=[];return e&&e.forEach(function(e){if(e){let i={type:"text",id:e.name,name:e.name,required:!1,readOnly:!1,sizeX:1,sizeY:1,row:-1,col:-1,colspan:1,params:{existingColspan:1,maxColspan:2},layout:{colspan:1,row:-1,column:-1}};t.push(i)}}),t}}t.a=n},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,i){"use strict";var n=i(49),o=i(51),r=i(23),a=(i.n(r),i(87)),s=(i.n(a),i(90)),l=i(91),d=i(34);class c{constructor(e,t,i=!1,n){if(this.formService=n,this.taskName=c.UNSET_TASK_NAME,this._isValid=!0,this.readOnly=!1,this.tabs=[],this.fields=[],this.outcomes=[],this.customFieldTemplates={},this.fieldValidators=[...d.FORM_FIELD_VALIDATORS],this.values={},this.readOnly=i,e){this.json=e,this.id=e.id,this.name=e.name,this.taskId=e.taskId,this.taskName=e.taskName||e.name||c.UNSET_TASK_NAME,this.processDefinitionId=e.processDefinitionId,this.customFieldTemplates=e.customFieldTemplates||{},this.selectedOutcome=e.selectedOutcome||{},this.className=e.className||"";let i={};this.processVariables=e.processVariables,this.tabs=(e.tabs||[]).map(e=>{let t=new l.a(this,e);return i[t.id]=t,t}),this.fields=this.parseRootFields(e),t&&this.loadData(t);for(let e=0;e<this.fields.length;e++){let t=this.fields[e];if(t.tab){let e=i[t.tab];e&&e.fields.push(t)}}if(e.fields){let t=new s.a(this,{id:c.SAVE_OUTCOME,name:"Save",isSystem:!0}),i=new s.a(this,{id:c.COMPLETE_OUTCOME,name:"Complete",isSystem:!0}),n=new s.a(this,{id:c.START_PROCESS_OUTCOME,name:"Start Process",isSystem:!0}),o=(e.outcomes||[]).map(e=>new s.a(this,e));this.outcomes=[t].concat(o.length>0?o:[i,n])}}this.validateForm()}get isValid(){return this._isValid}hasTabs(){return this.tabs&&this.tabs.length>0}hasFields(){return this.fields&&this.fields.length>0}hasOutcomes(){return this.outcomes&&this.outcomes.length>0}onFormFieldChanged(e){this.validateField(e),this.formService&&this.formService.formFieldValueChanged.next(new n.FormFieldEvent(this,e))}getFieldById(e){return this.getFormFields().find(t=>t.id===e)}getFormFields(){let e=[];for(let t=0;t<this.fields.length;t++){let i=this.fields[t];if(i instanceof o.a){let t=i;e.push(t.field),t.field.columns.forEach(t=>{e.push(...t.fields)})}}return e}markAsInvalid(){this._isValid=!1}validateForm(){const e=new n.ValidateFormEvent(this);if(this.formService&&this.formService.validateForm.next(e),this._isValid=e.isValid,!e.defaultPrevented&&e.isValid){let e=this.getFormFields();for(let t=0;t<e.length;t++)if(!e[t].validate())return void(this._isValid=!1)}}validateField(e){if(!e)return;const t=new n.ValidateFormFieldEvent(this,e);this.formService&&this.formService.validateFormField.next(t),t.isValid?t.defaultPrevented||(e.validate()?this.validateForm():this._isValid=!1):this._isValid=!1}parseRootFields(e){let t=[];e.fields?t=e.fields:e.formDefinition&&e.formDefinition.fields&&(t=e.formDefinition.fields);let i=[];for(let e of t)if(e.type===r.FormFieldTypes.DISPLAY_VALUE){if(e.params){e.params.field.type===r.FormFieldTypes.DYNAMIC_TABLE&&i.push(new o.a(new a.FormFieldModel(this,e)))}}else i.push(new o.a(new a.FormFieldModel(this,e)));return i}loadData(e){for(let t of this.getFormFields())e[t.id]&&(t.json.value=e[t.id],t.value=t.parseValue(t.json),t.type!==r.FormFieldTypes.DROPDOWN&&t.type!==r.FormFieldTypes.RADIO_BUTTONS||(t.value=e[t.id].id))}}t.a=c,c.UNSET_TASK_NAME="Nameless task",c.SAVE_OUTCOME="$save",c.COMPLETE_OUTCOME="$complete",c.START_PROCESS_OUTCOME="$startProcess"},function(e,t,i){"use strict";class n{constructor(e){this._defaultPrevented=!1,this._outcome=e}get outcome(){return this._outcome}get defaultPrevented(){return this._defaultPrevented}preventDefault(){this._defaultPrevented=!0}}t.a=n},function(e,t,i){"use strict";class n{constructor(e,t){this.metadata=e,this.nodeType=t}}t.a=n},function(e,t){e.exports='<div *ngIf="!hasForm()">\n    <ng-content select="[empty-form]">\n    </ng-content>\n</div>\n<div *ngIf="hasForm()" class="{{form.className}}">\n    <mat-card>\n        <mat-card-header>\n            <mat-card-title>\n                <h4 *ngIf="isTitleEnabled()">\n                    <div *ngIf="showRefreshButton" class="adf-form-reload-button">\n                        <button mat-icon-button (click)="onRefreshClicked()">\n                            <mat-icon>refresh</mat-icon>\n                        </button>\n                    </div>\n                    <mat-icon>{{ form.isValid ? \'event_available\' : \'event_busy\' }}</mat-icon>\n                    <span>{{form.taskName}}</span>\n\n                </h4>\n            </mat-card-title>\n        </mat-card-header>\n        <mat-card-content>\n            <div *ngIf="form.hasTabs()">\n                <tabs-widget [tabs]="form.tabs" (formTabChanged)="checkVisibility($event);"></tabs-widget>\n            </div>\n\n            <div *ngIf="!form.hasTabs() && form.hasFields()">\n                <div *ngFor="let field of form.fields">\n                    <form-field [field]="field.field"></form-field>\n                </div>\n            </div>\n        </mat-card-content>\n        <mat-card-actions *ngIf="form.hasOutcomes()">\n            \x3c!--[class.mdl-button--colored]="!outcome.isSystem"--\x3e\n            <button *ngFor="let outcome of form.outcomes"\n                    mat-button\n                    [disabled]="!isOutcomeButtonEnabled(outcome)"\n                    [class.adf-form-hide-button]="!isOutcomeButtonVisible(outcome, form.readOnly)"\n                    (click)="onOutcomeClicked(outcome, $event)">\n                {{outcome.name | uppercase}}\n            </button>\n        </mat-card-actions>\n    </mat-card>\n</div>\n\x3c!--\nFor debugging and data visualisation purposes,\nwill be removed during future revisions\n--\x3e\n<div *ngIf="showDebugButton" class="adf-form-debug-container">\n    <mat-slide-toggle [(ngModel)]="debugMode">Debug mode</mat-slide-toggle>\n    <div *ngIf="debugMode && hasForm()">\n        <h4>Values</h4>\n        <pre>{{form.values | json}}</pre>\n\n        <h4>Form</h4>\n        <pre>{{form.json | json}}</pre>\n    </div>\n</div>\n'},function(e,t){e.exports=".adf-form-container {\n  width: 100%;\n  min-height: 100px;\n  overflow: visible; }\n\n.adf-form-debug-container {\n  padding: 10px; }\n\n.adf-form-debug-container .debug-toggle-text {\n  padding-left: 15px;\n  cursor: pointer; }\n\n.adf-form-debug-container .debug-toggle-text:hover {\n  font-weight: bold; }\n\n.adf-form-reload-button {\n  position: absolute;\n  right: 0;\n  top: 0; }\n\n.adf-form-hide-button {\n  display: none; }\n\n.adf-task-title {\n  text-align: center; }\n\nform-field {\n  width: 100%; }\n  form-field .mat-input-element {\n    font-size: 14px;\n    padding-top: 8px;\n    line-height: normal; }\n"},function(e,t){e.exports='<adf-datatable *ngIf="!isEmpty()"\n    [rows]="forms">\n    <data-columns>\n        <data-column key="name" type="text" title="Name" class="ellipsis-cell" [sortable]="true"></data-column>\n        <data-column key="lastUpdatedByFullName" type="text" title="User" class="ellipsis-cell" [sortable]="true"></data-column>\n        <data-column key="lastUpdated" type="date" format="shortDate" title="Date"></data-column>\n    </data-columns>\n</adf-datatable>\n'},function(e,t,i){var n=i(292);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports=""},function(e,t){e.exports='<mat-card class="adf-content-container" *ngIf="content">\n    <mat-card-content *ngIf="showDocumentContent">\n        <div *ngIf="content.isThumbnailSupported()" >\n            <img id="thumbnailPreview" class="adf-img-upload-widget" [src]="content.thumbnailUrl" alt="{{content.name}}">\n        </div>\n        <div *ngIf="!content.isThumbnailSupported()">\n            <mat-icon>image</mat-icon>\n            <div id="unsupported-thumbnail" class="adf-content-widget-preview-text">{{ \'FORM.PREVIEW.IMAGE_NOT_AVAILABLE\' | translate }}\n            </div>\n        </div>\n        <div class="mdl-card__supporting-text upload-widget__content-text">{{content.name}}</div>\n    </mat-card-content>\n\n    <mat-card-actions>\n        <button mat-icon-button id="view" (click)="openViewer(content)">\n            <mat-icon class="mat-24">zoom_in</mat-icon>\n        </button>\n        <button mat-icon-button id="download" (click)="download(content)">\n            <mat-icon class="mat-24">file_download</mat-icon>\n        </button>\n    </mat-card-actions>\n</mat-card>\n'},function(e,t,i){var n=i(295);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports=".adf-img-upload-widget {\n  width: 100%;\n  height: 100%;\n  border: 1px solid rgba(117, 117, 117, 0.57);\n  box-shadow: 1px 1px 2px #dddddd;\n  background-color: #ffffff; }\n\n.adf-content-widget-preview-text {\n  word-wrap: break-word;\n  word-break: break-all;\n  text-align: center; }\n"},function(e,t){e.exports='<div class="adf-start-form-container" *ngIf="hasForm()">\n    <mat-card>\n        <mat-card-header>\n            <mat-card-title>\n                <h2 *ngIf="isTitleEnabled()" class="mdl-card__title-text">{{form.taskName}}</h2>\n            </mat-card-title>\n        </mat-card-header>\n        <mat-card-content>\n            <div *ngIf="form.hasTabs()">\n                <tabs-widget [tabs]="form.tabs" (formTabChanged)="checkVisibility($event);"></tabs-widget>\n            </div>\n\n            <div *ngIf="!form.hasTabs() && form.hasFields()">\n                <div *ngFor="let field of form.fields">\n                    <form-field [field]="field.field"></form-field>\n                </div>\n            </div>\n        </mat-card-content>\n        <mat-card-content class="adf-start-form-actions" *ngIf="showOutcomeButtons && form.hasOutcomes()" #outcomesContainer>\n             <ng-content select="[form-custom-button]"></ng-content>\n            <button *ngFor="let outcome of form.outcomes"\n                    mat-button\n                    [disabled]="!isOutcomeButtonEnabled(outcome)"\n                    [class.mdl-button--colored]="!outcome.isSystem"\n                    [class.adf-form-hide-button]="!isOutcomeButtonVisible(outcome, form.readOnly)"\n                    (click)="onOutcomeClicked(outcome, $event)">\n                {{outcome.name}}\n            </button>\n        </mat-card-content>\n        <mat-card-actions *ngIf="showRefreshButton">\n            <button mat-button\n                    (click)="onRefreshClicked()">\n                <mat-icon>refresh</mat-icon>\n            </button>\n        </mat-card-actions>\n    </mat-card>\n</div>\n'},function(e,t,i){"use strict";var n=i(51),o=i(23);i.n(o);class r extends n.a{constructor(e){super(e),this.columns=[],this.isExpanded=!0,this.rowspan=1,this.colspan=1,this.field&&(this.columns=this.field.columns||[],this.isExpanded=!this.isCollapsedByDefault(),this.colspan=e.colspan,this.rowspan=e.rowspan)}isGroup(){return this.type===o.FormFieldTypes.GROUP}isCollapsible(){let e=!1;return this.isGroup()&&this.field.params.allowCollapse&&(e=this.field.params.allowCollapse),e}isCollapsedByDefault(){let e=!1;return this.isCollapsible()&&this.field.params.collapseByDefault&&(e=this.field.params.collapseByDefault),e}}t.a=r},function(e,t){e.exports='<div [ngClass]="{\'hidden\':!(content?.isGroup() && content?.isVisible)}" class="container-widget__header">\n    <h4 class="container-widget__header-text" id="container-header"\n        [class.collapsible]="content?.isCollapsible()">\n        <button *ngIf="content?.isCollapsible()"\n                mat-icon-button\n                class="mdl-button--icon"\n                (click)="onExpanderClicked()">\n            <mat-icon>{{ content?.isExpanded ? \'expand_less\' : \'expand_more\' }}</mat-icon>\n        </button>\n        <span (click)="onExpanderClicked()" id="container-header-label">{{content.name}}</span>\n    </h4>\n</div>\n\n<section class="grid-list" [ngClass]="{\'hidden\':!(content?.isVisible && content?.isExpanded)}">\n    <div class="grid-list-item" *ngFor="let field of fields" [style.width]="getColumnWith(field)">\n        <form-field *ngIf="field" [field]="field"></form-field>\n    </div>\n</section>\n\n\n'},function(e,t,i){var n=i(300);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports=""},function(e,t){e.exports='<div *ngIf="hasTabs()" class="alfresco-tabs-widget">\n    <mat-tab-group>\n        <mat-tab *ngFor="let tab of visibleTabs" [label]="tab.title">\n            <div *ngFor="let field of tab.fields">\n                <form-field [field]="field.field"></form-field>\n             </div>\n        </mat-tab>\n    </mat-tab-group>\n</div>\n'},function(e,t,i){var n=i(303);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports=".adf-unknown-text {\n  margin-left: 10px;\n  color: red; }\n\n.adf-unknown-widget {\n  margin: 42px; }\n"},function(e,t){e.exports='<div class="adf-amount-widget__container adf-amount-widget {{field.className}}" [class.adf-invalid]="!field.isValid" [class.adf-readonly]="field.readOnly">\n    <mat-form-field floatPlaceholder="never" class="adf-amount-widget__input">\n        <label class="adf-label" [attr.for]="field.id">{{field.name}}<span *ngIf="isRequired()">*</span></label>\n        <span matPrefix class="adf-amount-widget__prefix-spacing"> {{currency }}</span>\n        <input matInput\n                class="adf-amount-widget"\n                type="text"\n                [id]="field.id"\n                [required]="isRequired()"\n                [value]="field.value"\n                [(ngModel)]="field.value"\n                (ngModelChange)="checkVisibility(field)"\n                [disabled]="field.readOnly"\n                placeholder="{{field.placeholder}}">\n    </mat-form-field>\n    <error-widget [error]="field.validationSummary" ></error-widget>\n    <error-widget *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n</div>\n\n'},function(e,t,i){var n=i(306);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports=".adf-amount-widget {\n  width: 100%;\n  vertical-align: baseline !important; }\n  .adf-amount-widget .mat-input-element {\n    margin-left: 11px; }\n  .adf-amount-widget .mat-input-prefix {\n    position: absolute;\n    margin-top: 42px; }\n  .adf-amount-widget .mat-input-placeholder {\n    margin-top: 5px; }\n\n.adf-amount-widget__container {\n  max-width: 100%; }\n  .adf-amount-widget__container .mat-input-placeholder-wrapper {\n    top: -6px !important; }\n  .adf-amount-widget__container .mat-input-placeholder-wrapper {\n    top: 0 !important;\n    left: 13px; }\n\n.adf-amount-widget__input .mat-focused {\n  transition: none; }\n\n.adf-amount-widget__prefix-spacing {\n  padding-right: 5px; }\n"},function(e,t){e.exports='<div class="attach-widget {{field.className}}">\n    <label [attr.for]="field.id">{{field.name}}<span *ngIf="isRequired()">*</span></label>\n    <div>\n        <span *ngIf="hasFile()" class="attach-widget__file mdl-chip"><span class="mdl-chip__text">{{getLinkedFileName()}}</span></span>\n        <button #browseFile [disabled]="field.readOnly" (click)="showDialog();" class="mdl-button mdl-jsm-button mdl-js-ripple-effect attach-widget__browser">\n            <mat-icon>image</mat-icon>\n            Browse {{selectedFolderSiteName}}\n        </button>\n        <button *ngIf="hasFile" [disabled]="field.readOnly" (click)="reset(file);" class="mdl-button mdl-js-button mdl-js-ripple-effect attach-widget__reset">Clear</button>\n    </div>\n</div>\n\n<dialog class="mdl-dialog" #dialog>\n    <h4 class="mdl-dialog__title">Select content</h4>\n    <div class="mdl-dialog__content">\n        <ul class=\'mdl-list\'>\n            <li class="mdl-list__item" *ngFor="let node of selectedFolderNodes">\n            <span class="mdl-list__item-primary-content" *ngIf="node.folder">\n            <mat-icon class="mdl-list__item-icon">folder</mat-icon>\n            <a (click)="selectFolder(node, $event)">{{node.title}}</a>\n            </span>\n            <span class="mdl-list__item-primary-content" *ngIf="!node.folder">\n            <mat-icon class="mdl-list__item-icon">description</mat-icon>\n            <a (click)="selectFile(node, $event)">{{node.title}}</a>\n            </span>\n            </li>\n        </ul>\n    </div>\n    <div class="mdl-dialog__actions">\n        <button type="button" (click)="cancel()" class="mdl-button close">Cancel</button>\n    </div>\n</dialog>\n'},function(e,t,i){var n=i(309);e.exports="string"==typeof n?n:n.toString()},function(e,t,i){(e.exports=i(31)()).push([e.i,".attach-widget {\n    width:100%\n}\n\n.attach-widget__icon {\n    float: left;\n}\n\n.attach-widget__file {\n    margin-top: 4px;\n}\n\n.attach-widget__reset {\n    margin-top: 4px;\n}\n",""])},function(e,t){e.exports='<div [ngClass]="field.className">\n    <mat-checkbox\n        [id]="field.id"\n        color="primary"\n        [required]="field.required"\n        [disabled]="field.readOnly || readOnly"\n        [(ngModel)]="field.value"\n        (change)="onChange()">\n        {{field.name}}\n        <span *ngIf="field.required">*</span>\n    </mat-checkbox>\n</div>\n'},function(e,t){e.exports='<div class="{{field.className}}" *ngIf="field?.isVisible" id="data-widget" [class.adf-invalid]="!field.isValid || field.validationSummary.message">\n    <mat-form-field class="adf-date-widget">\n        <label class="adf-label" [attr.for]="field.id">{{field.name}} ({{field.dateDisplayFormat}})<span *ngIf="isRequired()">*</span></label>\n        <input matInput\n               [id]="field.id"\n               [matDatepicker]="datePicker"\n               [(value)]="displayDate"\n               [required]="isRequired()"\n               [disabled]="field.readOnly"\n               [min]="minDate"\n               [max]="maxDate"\n               (focusout)="onDateChanged($event.srcElement.value)"\n               (dateChange)="onDateChanged($event)"\n               placeholder="{{field.placeholder}}">\n        <mat-datepicker-toggle  matSuffix [for]="datePicker" [disabled]="field.readOnly" ></mat-datepicker-toggle>\n    </mat-form-field>\n    <error-widget [error]="field.validationSummary"></error-widget>\n    <error-widget *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n    <mat-datepicker #datePicker [touchUi]="true" [startAt]="startAt" ></mat-datepicker>\n</div>\n\n'},function(e,t,i){var n=i(313);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports=".adf-date-widget .mat-input-suffix {\n  text-align: right;\n  position: absolute;\n  margin-top: 30px;\n  width: 100%; }\n\n.adf-date-widget-date-widget-button {\n  position: relative;\n  float: right; }\n\n.adf-date-widget-date-input {\n  padding-top: 5px;\n  padding-bottom: 5px; }\n\n.adf-date-widget-grid-date-widget {\n  align-items: center;\n  padding: 0; }\n\n.adf-date-widget-date-widget-button__cell {\n  margin-top: 0;\n  margin-bottom: 0; }\n"},function(e,t){e.exports='<div class="adf-display-text-widget {{field.className}}">{{field.value}}</div>\n'},function(e,t,i){var n=i(316);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports=".adf-display-text-widget {\n  white-space: pre-wrap; }\n"},function(e,t){e.exports='<div class="adf-form-document-widget {{field.className}}">\n    <ng-container *ngIf="hasFile">\n        <adf-content [id]="fileId" [showDocumentContent]="true"></adf-content>\n    </ng-container>\n</div>\n'},function(e,t){e.exports='<div class="adf-dropdown-widget {{field.className}}"\n     [class.adf-invalid]="!field.isValid" [class.adf-readonly]="field.readOnly" *ngIf="field?.isVisible">\n    <label class="adf-label" [attr.for]="field.id">{{field.name}}<span *ngIf="isRequired()">*</span></label>\n    <mat-form-field>\n        <mat-select class="adf-select"\n                    [id]="field.id"\n                    [(ngModel)]="field.value"\n                    [disabled]="field.readOnly"\n                    (ngModelChange)="checkVisibility(field)">\n            <mat-option *ngFor="let opt of field.options"\n                        [value]="getOptionValue(opt, field.value)"\n                        [id]="opt.id">{{opt.name}}\n            </mat-option>\n            <mat-option id="readonlyOption" *ngIf="isReadOnlyType()" [value]="field.value">{{field.value}}</mat-option>\n        </mat-select>\n    </mat-form-field>\n    <error-widget [error]="field.validationSummary"></error-widget>\n    <error-widget class="adf-dropdown-required-message" *ngIf="isInvalidFieldRequired()"\n                  required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n</div>\n'},function(e,t,i){var n=i(320);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports=".adf-dropdown-widget {\n  width: 100%;\n  margin-top: 13px; }\n  .adf-dropdown-widget .adf-select {\n    padding-top: 0 !important;\n    width: 100%; }\n  .adf-dropdown-widget .mat-select-value-text {\n    font-size: 14px; }\n  .adf-dropdown-widget-select {\n    width: 100%; }\n  .adf-dropdown-widget-dropdown-required-message .adf-error-text-container {\n    margin-top: 1px !important; }\n"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),o=function(){function e(){this.supportedTypes=["Date"]}return e.prototype.isSupported=function(e){return e&&e.editable&&this.supportedTypes.indexOf(e.type)>-1},e.prototype.validate=function(e,t,i){if(this.isSupported(t)){var o=e.value[t.id];if(!n(o,"D-M-YYYY").isValid())return i&&(i.isValid=!1,i.text="Invalid '"+t.name+"' format."),!1}return!0},e}();t.DateCellValidator=o},function(e,t,i){"use strict";class n{constructor(){this.supportedTypes=["Number","Amount"]}isSupported(e){return e&&e.required&&this.supportedTypes.indexOf(e.type)>-1}isNumber(e){return null!==e&&void 0!==e&&""!==e&&!isNaN(+e)}validate(e,t,i){if(this.isSupported(t)){let n=e.value[t.id];return!(null!==n&&void 0!==n&&""!==n&&!this.isNumber(n))||(i&&(i.isValid=!1,i.text=`Field '${t.name}' must be a number.`),!1)}return!0}}t.a=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.supportedTypes=["String","Number","Amount","Date","Dropdown"]}return e.prototype.isSupported=function(e){return e&&e.required&&this.supportedTypes.indexOf(e.type)>-1},e.prototype.validate=function(e,t,i){if(this.isSupported(t)){var n=e.value[t.id];if(t.required&&(null===n||void 0===n||""===n))return i&&(i.isValid=!1,i.text="Field '"+t.name+"' is required."),!1}return!0},e}();t.RequiredCellValidator=n},function(e,t){e.exports='<div class="{{field.className}}"\n    [class.adf-invalid]="!isValid()" *ngIf="field?.isVisible">\n    <div class="adf-label">{{content.name}}<span *ngIf="isRequired()">*</span></div>\n\n    <div *ngIf="!editMode">\n        <div class="adf-table-container">\n            <table class="full-width adf-dynamic-table" id="dynamic-table-{{content.id}}">\n                <thead>\n                    <tr>\n                        <th *ngFor="let column of content.visibleColumns">\n                            {{column.name}}\n                        </th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr *ngFor="let row of content.rows; let idx = index" tabindex="0" id="{{content.id}}-row-{{idx}}"\n                        [class.adf-dynamic-table-widget__row-selected]="row.selected" (keyup)="onKeyPressed($event, row)">\n                        <td *ngFor="let column of content.visibleColumns"\n                            (click)="onRowClicked(row)">\n                            {{ getCellValue(row, column) }}\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n\n        <div *ngIf="!readOnly">\n            <button mat-button\n                    [disabled]="!hasSelection()"\n                    (click)="moveSelectionUp()">\n                <mat-icon>arrow_upward</mat-icon>\n            </button>\n            <button mat-button\n                    [disabled]="!hasSelection()"\n                    (click)="moveSelectionDown()">\n                <mat-icon>arrow_downward</mat-icon>\n            </button>\n            <button mat-button\n                    [disabled]="field.readOnly"\n                    id="{{content.id}}-add-row"\n                    (click)="addNewRow()">\n                <mat-icon>add_circle_outline</mat-icon>\n            </button>\n            <button mat-button\n                    [disabled]="!hasSelection()"\n                    (click)="deleteSelection()">\n                <mat-icon>remove_circle_outline</mat-icon>\n            </button>\n            <button mat-button\n                    [disabled]="!hasSelection()"\n                    (click)="editSelection()">\n                <mat-icon>edit</mat-icon>\n            </button>\n        </div>\n     </div>\n\n     <row-editor *ngIf="editMode"\n        [table]="content"\n        [row]="editRow"\n        [column]="column"\n        (save)="onSaveChanges()"\n        (cancel)="onCancelChanges()">\n     </row-editor>\n    <error-widget [error]="field.validationSummary" ></error-widget>\n    <error-widget *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n</div>\n'},function(e,t,i){var n=i(326);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports=""},function(e,t){e.exports=' <label [attr.for]="column.id">\n    <mat-checkbox\n        color="primary"\n        [id]="column.id"\n        [checked]="table.getCellValue(row, column)"\n        [required]="column.required"\n        [disabled]="!column.editable"\n        (change)="onValueChanged(row, column, $event)">\n    <span class="adf-checkbox-label">{{column.name}}</span>\n    </mat-checkbox>\n</label>\n'},function(e,t,i){var n=i(329);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports=".adf-checkbox-label {\n  position: relative;\n  cursor: pointer;\n  font-size: 16px;\n  line-height: 24px;\n  margin: 0; }\n"},function(e,t){e.exports='<div>\n    <mat-form-field class="adf-date-editor">\n        <label [attr.for]="column.id">{{column.name}} (d-M-yyyy)</label>\n        <input matInput\n            id="dateInput"\n            type="text"\n            [matDatepicker]="datePicker"\n            [value]="value"\n            [id]="column.id"\n            [required]="column.required"\n            [disabled]="!column.editable"\n           (focusout)="onDateChanged($event.srcElement.value)">\n        <mat-datepicker-toggle  *ngIf="column.editable" matSuffix [for]="datePicker" class="adf-date-editor-button" ></mat-datepicker-toggle>\n    </mat-form-field>\n    <mat-datepicker #datePicker (dateChange)="onDateChanged($event)" [touchUi]="true"></mat-datepicker>\n</div>\n'},function(e,t,i){var n=i(332);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports=".adf-date-editor {\n  width: 100%; }\n\n.adf-date-editor-button {\n  position: relative;\n  top: 25px; }\n"},function(e,t){e.exports='<div class="dropdown-editor">\n    <label [attr.for]="column.id">{{column.name}}</label>\n    <mat-form-field>\n        <mat-select\n            floatPlaceholder="never"\n            class="adf-dropdown-editor-select"\n            [id]="column.id"\n            [(ngModel)]="value"\n            [required]="column.required"\n            [disabled]="!column.editable"\n            (change)="onValueChanged(row, column, $event)">\n            <mat-option></mat-option>\n            <mat-option *ngFor="let opt of options" [value]="opt.name" [id]="opt.id">{{opt.name}}</mat-option>\n        </mat-select>\n    </mat-form-field>\n</div>\n'},function(e,t,i){var n=i(335);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports=".adf-dropdown-editor-select {\n  width: 100%; }\n"},function(e,t){e.exports='<div class="row-editor mdl-shadow--2dp"\n    [class.row-editor__invalid]="!validationSummary.isValid">\n    <div class="mdl-grid" *ngFor="let column of table.columns">\n        <div class="mdl-cell mdl-cell--6-col" [ngSwitch]="column.type">\n            <div *ngSwitchCase="\'Dropdown\'">\n                <adf-dropdown-editor\n                    [table]="table"\n                    [row]="row"\n                    [column]="column">\n                </adf-dropdown-editor>\n                </div>\n                <div *ngSwitchCase="\'Date\'">\n                    <adf-date-editor\n                    [table]="table"\n                    [row]="row"\n                    [column]="column">\n                </adf-date-editor>\n                </div>\n\n                <div *ngSwitchCase="\'Boolean\'">\n                <adf-boolean-editor\n                    [table]="table"\n                    [row]="row"\n                    [column]="column">\n                </adf-boolean-editor>\n                </div>\n                <div *ngSwitchDefault>\n                <adf-text-editor\n                    [table]="table"\n                    [row]="row"\n                    [column]="column">\n                </adf-text-editor>\n            </div>\n        </div>\n    </div>\n    <error-widget [error]="validationSummary.text"></error-widget>\n    <div>\n        <button mat-button (click)="onCancelChanges()">Cancel</button>\n        <button mat-button (click)="onSaveChanges()">Save</button>\n    </div>\n</div>\n'},function(e,t,i){var n=i(338);e.exports="string"==typeof n?n:n.toString()},function(e,t,i){(e.exports=i(31)()).push([e.i,".row-editor {\n    padding: 8px;\n}\n\n.row-editor__validation-summary {\n    visibility: hidden;\n}\n\n.row-editor__invalid .row-editor__validation-summary {\n    padding-left: 16px;\n    padding-right: 16px;\n    padding-top: 8px;\n    padding-bottom: 8px;\n    color: #d50000;\n    visibility: visible;\n}\n",""])},function(e,t){e.exports='<div class="adf-text-editor">\n    <mat-form-field>\n    <label [attr.for]="column.id">{{displayName}}</label>\n    <input matInput\n        type="text"\n        [value]="table.getCellValue(row, column)"\n        (keyup)="onValueChanged(row, column, $event)"\n        [required]="column.required"\n        [disabled]="!column.editable"\n        [id]="column.id">\n    </mat-form-field>\n</div>\n'},function(e,t,i){var n=i(341);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports=".adf-text-editor {\n  width: 100%; }\n"},function(e,t){e.exports=l},function(e,t){e.exports='<div class="adf-error-text-container">\n    <div *ngIf="error.isActive()" [@transitionMessages]="_subscriptAnimationState">\n        <div class="adf-error-text">{{error.message | translate:translateParameters}}</div>\n        <mat-icon class="adf-error-icon">warning</mat-icon>\n    </div>\n    <div *ngIf="required" [@transitionMessages]="_subscriptAnimationState">\n            <div class="adf-error-text">{{required}}</div>\n    </div>\n</div>\n'},function(e,t,i){var n=i(345);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports=".adf-error-text {\n  width: 85%; }\n"},function(e,t){e.exports='<div class="adf-group-widget {{field.className}}"\n     [class.is-dirty]="value"\n     [class.adf-invalid]="!field.isValid" [class.adf-readonly]="field.readOnly" id="functional-group-div" *ngIf="field.isVisible">\n    <mat-form-field>\n        <label class="adf-label" [attr.for]="field.id">{{field.name}}<span *ngIf="isRequired()">*</span></label>\n        <input matInput\n               class="adf-input"\n               type="text"\n               [id]="field.id"\n               [(ngModel)]="value"\n               (keyup)="onKeyUp($event)"\n               [disabled]="field.readOnly"\n               placeholder="{{field.placeholder}}"\n               [matAutocomplete]="auto">\n        <mat-autocomplete #auto="matAutocomplete" (optionSelected)="onItemSelect($event.option.value)">\n            <mat-option *ngFor="let item of groups"\n                       [id]="field.id +\'-\'+item.id"\n                       (click)="onItemClick(item, $event)"  [value]="item">\n                <span>{{item.name}}</span>\n            </mat-option>\n        </mat-autocomplete>\n\n    </mat-form-field>\n    <error-widget [error]="field.validationSummary"></error-widget>\n    <error-widget *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n</div>\n'},function(e,t,i){var n=i(348);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports=".adf-group-widget {\n  width: 100%; }\n"},function(e,t){e.exports='<div class="adf-hyperlink-widget {{field.className}}">\n    <label class="adf-label" [attr.for]="field.id">{{field.name}}<span *ngIf="isRequired()">*</span></label>\n    <div>\n        <a [href]="linkUrl" target="_blank" rel="nofollow">{{linkText}}</a>\n    </div>\n</div>\n'},function(e,t,i){var n=i(351);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports=""},function(e,t){e.exports='<div class="adf-multiline-text-widget {{field.className}}"\n     [class.adf-invalid]="!field.isValid" [class.adf-readonly]="field.readOnly">\n    <mat-form-field floatPlaceholder="never">\n        <label class="adf-label" [attr.for]="field.id">{{field.name}}<span *ngIf="isRequired()">*</span></label>\n        <textarea matInput class="adf-input"\n                  matTextareaAutosize\n                  type="text"\n                  rows="3"\n                  [id]="field.id"\n                  [required]="isRequired()"\n                  [(ngModel)]="field.value"\n                  (ngModelChange)="checkVisibility(field)"\n                  [disabled]="field.readOnly || readOnly"\n                  placeholder="{{field.placeholder}}">\n        </textarea>\n    </mat-form-field>\n    <div *ngIf="field.maxLength > 0" class="adf-multiline-word-counter">\n        <span>{{field?.value?.length || 0}}/{{field.maxLength}}</span>\n    </div>\n    <error-widget [error]="field.validationSummary"></error-widget>\n    <error-widget class="adf-multiline-required-message" *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n</div>\n\n'},function(e,t,i){var n=i(354);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports="/**\n * Applies styles for users in high contrast mode. Note that this only applies\n * to Microsoft browsers. Chrome can be included by checking for the `html[hc]`\n * attribute, however Chrome handles high contrast differently.\n */\n/* Theme for the ripple elements.*/\n/** The mixins below are shared between mat-menu and mat-select */\n/**\n * This mixin adds the correct panel transform styles based\n * on the direction that the menu panel opens.\n */\n/* stylelint-disable material/no-prefixes */\n/* stylelint-enable */\n/**\n * This mixin contains shared option styles between the select and\n * autocomplete components.\n */\n/* ANIMATION */\n/* ANIMATION */\n/**\n * Applies styles for users in high contrast mode. Note that this only applies\n * to Microsoft browsers. Chrome can be included by checking for the `html[hc]`\n * attribute, however Chrome handles high contrast differently.\n */\n/* Theme for the ripple elements.*/\n/** The mixins below are shared between mat-menu and mat-select */\n/**\n * This mixin adds the correct panel transform styles based\n * on the direction that the menu panel opens.\n */\n/* stylelint-disable material/no-prefixes */\n/* stylelint-enable */\n/**\n * This mixin contains shared option styles between the select and\n * autocomplete components.\n */\n.adf-multiline-text-widget {\n  width: 100%; }\n\n.adf-multiline-word-counter {\n  float: right;\n  margin-top: -20px !important;\n  min-height: 24px;\n  min-width: 1px;\n  font-size: 12px;\n  line-height: 14px;\n  overflow: hidden;\n  transition: all 0.3s cubic-bezier(0.55, 0, 0.55, 0.2);\n  opacity: 1;\n  padding-top: 5px;\n  text-align: right;\n  padding-right: 2px;\n  padding-left: 0; }\n\n.adf-multiline-required-message {\n  display: flex; }\n"},function(e,t){e.exports='<div class="adf-textfield adf-number-widget {{field.className}}"\n     [class.adf-invalid]="!field.isValid" [class.adf-readonly]="field.readOnly">\n    <mat-form-field>\n        <label class="adf-label" [attr.for]="field.id">{{field.name}}<span *ngIf="isRequired()">*</span></label>\n        <input matInput\n               class="adf-input"\n               type="text"\n               pattern="-?[0-9]*(\\.[0-9]+)?"\n               [id]="field.id"\n               [required]="isRequired()"\n               [value]="field.value"\n               [(ngModel)]="field.value"\n               (ngModelChange)="checkVisibility(field)"\n               [disabled]="field.readOnly"\n               placeholder="{{field.placeholder}}">\n    </mat-form-field>\n    <error-widget [error]="field.validationSummary" ></error-widget>\n    <error-widget *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n</div>\n'},function(e,t,i){var n=i(357);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports=".adf-number-widget {\n  width: 100%; }\n"},function(e,t){e.exports='<div class="adf-people-widget {{field.className}}"\n     [class.is-dirty]="value"\n     [class.adf-invalid]="!field.isValid"\n     [class.adf-readonly]="field.readOnly"\n     id="people-widget-content"\n     *ngIf="field.isVisible">\n    <mat-form-field>\n        <label class="adf-label" [attr.for]="field.id">{{field.name}}<span *ngIf="isRequired()">*</span></label>\n        <input #inputValue\n               matInput\n               class="adf-input"\n               type="text"\n               [id]="field.id"\n               [value]="getDisplayName(field.value)"\n               (keyup)="onKeyUp($event)"\n               [disabled]="field.readOnly"\n               placeholder="{{field.placeholder}}"\n               [matAutocomplete]="auto">\n        <mat-autocomplete #auto="matAutocomplete" (optionSelected)="onItemSelect($event.option.value)"  [displayWith]="getDisplayName">\n            <mat-option *ngFor="let user of users; let i = index" [value]="user">\n                <div class="adf-people-widget-row" id="adf-people-widget-user-{{i}}">\n                    <div [outerHTML]="user | usernameInitials:\'adf-people-widget-pic\'"></div>\n                    <div *ngIf="user.pictureId" class="adf-people-widget-image-row">\n                        <img id="adf-people-widget-pic-{{i}}" class="adf-people-widget-image"\n                             [src]="peopleProcessService.getUserImage(user)"/>\n                    </div>\n                    <span class="adf-people-label-name">{{getDisplayName(user)}}</span>\n                </div>\n            </mat-option>\n        </mat-autocomplete>\n    </mat-form-field>\n    <error-widget [error]="field.validationSummary"></error-widget>\n    <error-widget *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n</div>\n'},function(e,t,i){var n=i(360);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports=""},function(e,t){e.exports='<div class="adf-radio-buttons-widget {{field.className}}"\n     [class.adf-invalid]="!field.isValid" [class.adf-readonly]="field.readOnly" [id]="field.id" *ngIf="field?.isVisible">\n    <div class="adf-radio-button-container">\n        <label class="adf-label" [attr.for]="field.id">{{field.name}}<span *ngIf="isRequired()">*</span></label>\n        <mat-radio-group class="adf-radio-group" [(ngModel)]="field.value">\n            <mat-radio-button\n                [id]="field.id + \'-\' + opt.id"\n                [name]="field.id"\n                [value]="opt.id"\n                [disabled]="field.readOnly"\n                [checked]="field.value === opt.id"\n                (change)="onOptionClick(opt.id)"\n                color="primary"\n                class="adf-radio-button" *ngFor="let opt of field.options" >\n                {{opt.name}}\n            </mat-radio-button>\n        </mat-radio-group>\n    </div>\n    <error-widget [error]="field.validationSummary" ></error-widget>\n    <error-widget *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n</div>\n\n\n'},function(e,t,i){var n=i(363);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports=".adf-radio-button-container {\n  margin-bottom: 15px; }\n\n.adf-radio-group {\n  display: inline-flex;\n  flex-direction: column; }\n\n.adf-radio-button {\n  margin: 5px; }\n"},function(e,t){e.exports='<div class="adf-textfield adf-text-widget {{field.className}}"\n     [class.adf-invalid]="!field.isValid" [class.adf-readonly]="field.readOnly">\n    <mat-form-field>\n        <label class="adf-label" [attr.for]="field.id">{{field.name}}<span *ngIf="isRequired()">*</span></label>\n        <input matInput\n               class="adf-input"\n               type="text"\n               [id]="field.id"\n               [required]="isRequired()"\n               [value]="field.value"\n               [(ngModel)]="field.value"\n               (ngModelChange)="onFieldChanged(field)"\n               [disabled]="field.readOnly || readOnly"\n               [textMask]="{mask: mask, isReversed: isMaskReversed}"\n               placeholder="{{field.placeholder}}">\n    </mat-form-field>\n    <error-widget [error]="field.validationSummary"></error-widget>\n    <error-widget *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n</div>\n'},function(e,t,i){var n=i(366);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports=".adf-text-widget {\n  width: 100%; }\n"},function(e,t){e.exports='<div class="adf-typeahead-widget-container">\n    <div class="adf-typeahead-widget {{field.className}}"\n        [class.is-dirty]="value"\n        [class.adf-invalid]="!field.isValid"\n        [class.adf-readonly]="field.readOnly"\n        id="typehead-div" *ngIf="field.isVisible">\n        <mat-form-field>\n            <label class="adf-label" [attr.for]="field.id">{{field.name}}</label>\n            <input matInput class="adf-input"\n                   type="text"\n                   [id]="field.id"\n                   [(ngModel)]="value"\n                   (ngModelChange)="validate()"\n                   (keyup)="onKeyUp($event)"\n                   [disabled]="field.readOnly"\n                   placeholder="{{field.placeholder}}"\n                   [matAutocomplete]="auto">\n            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="onItemSelect($event.option.value)">\n                <mat-option *ngFor="let item of options" [value]="item">\n                    <span [id]="field.name+\'_option_\'+item.id">{{item.name}}</span>\n                </mat-option>\n            </mat-autocomplete>\n        </mat-form-field>\n\n        <error-widget [error]="field.validationSummary"></error-widget>\n        <error-widget *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n    </div>\n</div>\n'},function(e,t,i){var n=i(369);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports=".adf-typeahead-widget-container {\n  position: relative;\n  display: block; }\n\n.adf-typeahead-widget {\n  width: 100%; }\n"},function(e,t){e.exports='<div class="adf-upload-widget {{field.className}}"\n     [class.adf-invalid]="!field.isValid"\n     [class.adf-readonly]="field.readOnly">\n    <label class="adf-label" [attr.for]="field.id">{{field.name}}<span *ngIf="isRequired()">*</span></label>\n    <div class="adf-upload-widget-container">\n        <div>\n            <mat-list *ngIf="hasFile">\n                <mat-list-item class="adf-upload-files-row" *ngFor="let file of field.value">\n                    <img mat-list-icon class="adf-upload-widget__icon"\n                         [id]="\'file-\'+file.id+\'-icon\'"\n                         [src]="getIcon(file.mimeType)"\n                         [alt]="mimeTypeIcon"\n                         (click)="fileClicked(file)"\n                         (keyup.enter)="fileClicked(file)"\n                         role="button"\n                         tabindex="0"/>\n                    <span matLine id="{{\'file-\'+file.id}}" (click)="fileClicked(file)" (keyup.enter)="fileClicked(file)"\n                          role="button" tabindex="0" class="adf-file">{{file.name}}</span>\n                    <button *ngIf="!field.readOnly" mat-icon-button [id]="\'file-\'+file.id+\'-remove\'"\n                            (click)="removeFile(file);" (keyup.enter)="removeFile(file);">\n                        <mat-icon class="mat-24">highlight_off</mat-icon>\n                    </button>\n                </mat-list-item>\n            </mat-list>\n        </div>\n\n        <div class="button-row" *ngIf="(!hasFile || multipleOption) && !field.readOnly">\n            <a mat-raised-button color="primary">\n                {{ \'FORM.FIELD.UPLOAD\' | translate }}<mat-icon>file_upload</mat-icon>\n                <input #uploadFiles\n                       [multiple]="multipleOption"\n                       type="file"\n                       [id]="field.id"\n                       (change)="onFileChanged($event)"/>\n            </a>\n        </div>\n    </div>\n    <error-widget [error]="field.validationSummary"></error-widget>\n    <error-widget *ngIf="isInvalidFieldRequired()" required="{{ \'FORM.FIELD.REQUIRED\' | translate }}"></error-widget>\n</div>\n'},function(e,t,i){var n=i(372);e.exports="string"==typeof n?n:n.toString()},function(e,t){e.exports=".adf-upload-widget-container {\n  margin-bottom: 15px; }\n  .adf-upload-widget-container input {\n    cursor: pointer;\n    height: 100%;\n    right: 0;\n    opacity: 0;\n    position: absolute;\n    top: 0;\n    width: 300px;\n    z-index: 4; }\n\n.adf-upload-widget {\n  width: 100%;\n  word-break: break-all;\n  padding: 0.4375em 0;\n  border-top: 0.84375em solid transparent; }\n\n.adf-upload-widget__icon {\n  padding: 6px;\n  float: left;\n  cursor: pointer; }\n\n.adf-upload-widget__reset {\n  margin-top: -2px; }\n\n.adf-upload-files-row .mat-line {\n  margin-bottom: 0px; }\n"},function(e,t){},function(e,t,i){"use strict";i.d(t,"a",function(){return S});var n=i(1),o=i(0),r=(i.n(o),i(375)),a=(i.n(r),i(3)),s=(i.n(a),i(11)),l=(i.n(s),i(376)),d=i(54),c=i(377),u=(i.n(c),i(378)),p=i(94),f=i(48),m=(i.n(f),i(97)),h=i(95),v=(i.n(h),i(5)),g=i(379),y=i(33),b=(i.n(y),i(126)),O=i(7),F=i(52),E=i(96),C=i(53);i.n(C);let S=class{};S=n.a([Object(o.NgModule)({imports:[a.CoreModule,s.DataTableModule,r.HttpModule,l.a],declarations:[h.ContentWidgetComponent,u.a,f.FormComponent,p.a,m.a,c.StartFormCustomButtonDirective,...d.WIDGET_DIRECTIVES,...d.MASK_DIRECTIVE,v.WidgetComponent],entryComponents:[...d.WIDGET_DIRECTIVES],providers:[g.a,y.EcmModelService,b.a,O.FormService,F.NodeService,E.ProcessContentService,C.WidgetVisibilityService,{provide:a.TRANSLATION_PROVIDER,multi:!0,useValue:{name:"@adf/process-services",source:"assets/ng2-activiti-form"}}],exports:[h.ContentWidgetComponent,u.a,f.FormComponent,p.a,m.a,c.StartFormCustomButtonDirective,...d.WIDGET_DIRECTIVES]})],S)},function(e,t){e.exports=d},function(e,t,i){"use strict";function n(){return[a.MatAutocompleteModule,a.MatButtonModule,a.MatCardModule,a.MatCheckboxModule,a.MatDatepickerModule,a.MatGridListModule,a.MatIconModule,a.MatInputModule,a.MatListModule,a.MatOptionModule,a.MatRadioModule,a.MatSelectModule,a.MatSlideToggleModule,a.MatTableModule,a.MatTabsModule]}i.d(t,"a",function(){return s});var o=i(1),r=i(0),a=(i.n(r),i(4));i.n(a);let s=class{};s=o.a([Object(r.NgModule)({providers:[{provide:a.MAT_PLACEHOLDER_GLOBAL_OPTIONS,useValue:{float:"never"}}],imports:n(),exports:n()})],s)},function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),r=function(){function e(){}return e=n([o.Directive({selector:"[form-custom-button]"})],e)}();t.StartFormCustomButtonDirective=r},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n=i(1),o=i(0),r=(i.n(o),i(3));i.n(r);let a=class{constructor(e,t,i,n){this.formRenderingService=e,this.componentFactoryResolver=t,this.visibilityService=i,this.compiler=n,this.field=null,this.focus=!1}ngOnInit(){let e=this.getField();if(e){let t=this.field.form.customFieldTemplates[e.type];if(t&&this.hasController(e.type)){let i=this.getComponentFactorySync(e.type,t);this.componentRef=this.container.createComponent(i);let n=this.componentRef.instance;n&&(n.field=e)}else{let t=this.formRenderingService.resolveComponentType(e);if(t){let e=this.componentFactoryResolver.resolveComponentFactory(t);this.componentRef=this.container.createComponent(e);let i=this.componentRef.instance;i.field=this.field,i.fieldChanged.subscribe(e=>{e&&this.field.form&&this.visibilityService.refreshVisibility(this.field.form)})}}}}ngOnDestroy(){this.componentRef&&(this.componentRef.destroy(),this.componentRef=null)}getField(){if(this.field&&this.field.params){const e=this.field.params.field;if(e&&e.type)return e}return this.field}hasController(e){return adf&&adf.components&&adf.components[e]}getComponentFactorySync(e,t){let i=adf.components[e];if(i.factory)return i.factory;let n={selector:`runtime-component-${e}`,template:t},o=this.createComponentFactorySync(this.compiler,n,i.class);return i.factory=o,o}createComponentFactorySync(e,t,i){const a=i||class{},s=Object(o.Component)(t)(a);let l=class{};l=n.a([Object(o.NgModule)({imports:[r.CoreModule],declarations:[s]})],l);return e.compileModuleAndAllComponentsSync(l).componentFactories.find(e=>e.componentType===s)}focusToggle(){this.focus=!this.focus}};n.a([Object(o.ViewChild)("container",{read:o.ViewContainerRef})],a.prototype,"container",void 0),n.a([Object(o.Input)()],a.prototype,"field",void 0),a=n.a([Object(o.Component)({selector:"adf-form-field, form-field",template:'\n        <div [hidden]="!field?.isVisible"\n            [class.adf-focus]="focus"\n            (focusin)="focusToggle()"\n            (focusout)="focusToggle()">\n            <div #container></div>\n        </div>\n    ',encapsulation:o.ViewEncapsulation.None})],a)},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n=i(1),o=i(0),r=(i.n(o),i(2));i.n(r);let a=s=class{constructor(e,t){this.apiService=e,this.logService=t}getAlfrescoNodes(e,t){let i=this.apiService.getInstance(),n=e.replace("alfresco-","");return r.Observable.fromPromise(i.activiti.alfrescoApi.getContentInFolder(n,t)).map(this.toJsonArray).catch(e=>this.handleError(e))}linkAlfrescoNode(e,t,i){let n=this.apiService.getInstance();return r.Observable.fromPromise(n.activiti.contentApi.createTemporaryRelatedContent({link:!0,name:t.title,simpleType:t.simpleType,source:e,sourceId:t.id+"@"+i})).map(this.toJson).catch(e=>this.handleError(e))}toJson(e){return e?e||{}:{}}toJsonArray(e){return e?e.data||[]:[]}handleError(e){let t=s.UNKNOWN_ERROR_MESSAGE;return e&&(t=e.message?e.message:e.status?`${e.status} - ${e.statusText}`:s.GENERIC_ERROR_MESSAGE),this.logService.error(t),r.Observable.throw(t)}};a.UNKNOWN_ERROR_MESSAGE="Unknown error",a.GENERIC_ERROR_MESSAGE="Server error",a=s=n.a([Object(o.Injectable)()],a);var s}])});
//# sourceMappingURL=process-services.js.map
