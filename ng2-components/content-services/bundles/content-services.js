/*!
 * @license
 * Copyright 2016 Alfresco Software, Ltd.
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@angular/core"),require("rxjs/Rx"),require("ng2-alfresco-core"),require("@angular/material"),require("ng2-alfresco-datatable"),require("@angular/common"),require("alfresco-js-api"),require("rxjs/Observable"),require("@angular/flex-layout")):"function"==typeof define&&define.amd?define(["@angular/core","rxjs/Rx","ng2-alfresco-core","@angular/material","ng2-alfresco-datatable","@angular/common","alfresco-js-api","rxjs/Observable","@angular/flex-layout"],t):"object"==typeof exports?exports["content-services"]=t(require("@angular/core"),require("rxjs/Rx"),require("ng2-alfresco-core"),require("@angular/material"),require("ng2-alfresco-datatable"),require("@angular/common"),require("alfresco-js-api"),require("rxjs/Observable"),require("@angular/flex-layout")):e["content-services"]=t(e["@angular/core"],e["rxjs/Rx"],e["ng2-alfresco-core"],e["@angular/material"],e["ng2-alfresco-datatable"],e["@angular/common"],e["alfresco-js-api"],e["rxjs/Observable"],e["@angular/flex-layout"])}(this,function(e,t,n,i,o,r,s,a,l){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=194)}([function(t,n){t.exports=e},function(e,t,n){"use strict";t.a=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},t.b=function(e,t){return function(n,i){t(n,i,e)}};Object.setPrototypeOf||Array,Object.assign},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=i},,,,,,,function(e,t){e.exports=o},function(e,t){e.exports=r},,,,,,,,function(e,t,n){"use strict";function i(){return[s.MatButtonModule,s.MatChipsModule,s.MatDialogModule,s.MatIconModule,s.MatInputModule,s.MatListModule,s.MatProgressSpinnerModule,s.MatRippleModule,s.MatMenuModule,s.MatOptionModule,s.MatSelectModule]}var o=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(4);t.modules=i;var a=function(){function e(){}return e=o([r.NgModule({imports:i(),exports:i()})],e)}();t.MaterialModule=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"PaginationStrategy",function(){return i}),n.d(t,"DocumentListComponent",function(){return h});var i,o=n(1),r=n(0),s=(n.n(r),n(3)),a=(n.n(s),n(11)),l=(n.n(a),n(2)),c=(n.n(l),n(224)),d=(n.n(c),n(69)),u=n(41),p=n(71);n.n(p);!function(e){e[e.Finite=0]="Finite",e[e.Infinite=1]="Infinite"}(i||(i={}));let h=f=class{constructor(e,t,o,s,a,c){this.documentListService=e,this.ngZone=t,this.elementRef=o,this.apiService=s,this.appConfig=a,this.preferences=c,this.permissionsStyle=[],this.locationFormat="/",this.navigate=!0,this.navigationMode=f.DOUBLE_CLICK_NAVIGATION,this.thumbnails=!1,this.selectionMode="single",this.multiselect=!1,this.enablePagination=!0,this.contentActions=!1,this.contentActionsPosition="right",this.contextMenuActions=!1,this.pageSize=f.DEFAULT_PAGE_SIZE,this.emptyFolderImageUrl=n(225),this.allowDropFiles=!1,this.loading=!1,this.paginationStrategy=i.Finite,this.infiniteLoading=!1,this.noPermission=!1,this.selection=new Array,this.skipCount=0,this.rowFilter=null,this.imageResolver=null,this.currentFolderId=null,this.folderNode=null,this.node=null,this.nodeClick=new r.EventEmitter,this.nodeDblClick=new r.EventEmitter,this.folderChange=new r.EventEmitter,this.preview=new r.EventEmitter,this.ready=new r.EventEmitter,this.error=new r.EventEmitter,this.actions=[],this.contextActionHandler=new l.Subject,this.layoutPresets={},this.currentNodeAllowableOperations=[],this.CREATE_PERMISSION="create",this.defaultPageSizes=[5,10,15,20],this.supportedPageSizes=a.get("document-list.supportedPageSizes",this.defaultPageSizes)}getContextActions(e){if(e&&e.entry){let t=this.getNodeActions(e);if(t&&t.length>0)return t.map(t=>({model:t,node:e,subject:this.contextActionHandler}))}return null}contextActionCallback(e){e&&this.executeContentAction(e.node,e.model)}get hasCustomLayout(){return this.columnList&&this.columnList.columns&&this.columnList.columns.length>0}getDefaultPageSize(){let e=this.preferences.paginationSize;const t=this.supportedPageSizes||this.defaultPageSizes;return t&&t.length>0&&t.indexOf(e)<0&&(e=t[0]),e}ngOnInit(){this.pageSize=this.getDefaultPageSize(),this.loadLayoutPresets(),this.data=new d.a(this.documentListService,null,this.getDefaultSorting()),this.data.thumbnails=this.thumbnails,this.data.permissionsStyle=this.permissionsStyle,this.rowFilter&&this.data.setFilter(this.rowFilter),this.imageResolver&&this.data.setImageResolver(this.imageResolver),this.contextActionHandler.subscribe(e=>this.contextActionCallback(e)),this.enforceSingleClickNavigationForMobile()}ngAfterContentInit(){let e=[];this.hasCustomLayout&&(e=this.columnList.columns.map(e=>e)),this.data?e&&e.length>0&&this.data.setColumns(e):this.data=new d.a(this.documentListService,e,this.getDefaultSorting());let t=this.data.getColumns();t&&0!==t.length||this.setupDefaultColumns(this.currentFolderId)}ngOnChanges(e){e.folderNode&&e.folderNode.currentValue?this.loadFolder():e.currentFolderId&&e.currentFolderId.currentValue?(e.currentFolderId.previousValue!==e.currentFolderId.currentValue&&(this.resetPagination(),this.folderNode=null),this.hasCustomLayout||this.setupDefaultColumns(e.currentFolderId.currentValue),this.loadFolderByNodeId(e.currentFolderId.currentValue)):this.data&&(e.node&&e.node.currentValue?(this.resetSelection(),this.data.loadPage(e.node.currentValue)):e.rowFilter?(this.data.setFilter(e.rowFilter.currentValue),this.currentFolderId&&this.loadFolderNodesByFolderNodeId(this.currentFolderId,this.pageSize,this.skipCount)):e.imageResolver&&this.data.setImageResolver(e.imageResolver.currentValue))}reload(e=!1){this.ngZone.run(()=>{this.resetSelection(),this.folderNode?this.loadFolder(e):this.currentFolderId?this.loadFolderByNodeId(this.currentFolderId):this.node&&(this.data.loadPage(this.node),this.ready.emit())})}isEmptyTemplateDefined(){return!(!this.dataTable||!this.emptyFolderTemplate)}isNoPermissionTemplateDefined(){return!(!this.dataTable||!this.noPermissionTemplate)}isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}isEmpty(){return!this.data||0===this.data.getRows().length}isPaginationEnabled(){return this.enablePagination&&!this.isEmpty()}isPaginationNeeded(){return this.paginationStrategy===i.Finite}getNodeActions(e){let t=null;if(e&&e.entry&&(e.entry.isFile&&(t="document"),e.entry.isFolder&&(t="folder"),t)){let n=t.toLowerCase(),i=this.actions.filter(e=>e.target.toLowerCase()===n).map(e=>new u.a(e));return i.forEach(t=>{this.checkPermission(e,t)}),i}return[]}checkPermission(e,t){if(t.permission&&this.hasPermissions(e)){e.entry.allowableOperations.find(e=>e===t.permission)||!0!==t.disableWithNoPermission||(t.disabled=!0)}return t}hasPermissions(e){return!!e.entry.allowableOperations}onShowContextMenu(e){e&&this.contextMenuActions&&e.preventDefault()}performNavigation(e){return!!this.canNavigateFolder(e)&&(this.currentFolderId=e.entry.id,this.folderNode=e.entry,this.skipCount=0,this.currentNodeAllowableOperations=e.entry.allowableOperations?e.entry.allowableOperations:[],this.loadFolder(),this.folderChange.emit(new p.NodeEntryEvent(e.entry)),!0)}executeContentAction(e,t){if(e&&e.entry&&t){let n;n="function"==typeof t.handler?t.handler(e,this,t.permission):l.Observable.of(!0),"function"==typeof t.execute&&n.subscribe(()=>{t.execute(e)})}}loadFolder(e=!1){e?this.infiniteLoading=!0:this.loading=!0;let t=this.folderNode?this.folderNode.id:this.currentFolderId;t&&this.loadFolderNodesByFolderNodeId(t,this.pageSize,this.skipCount,e).catch(e=>this.error.emit(e))}loadFolderByNodeId(e){this.loading=!0,this.resetSelection(),"-trashcan-"===e?this.loadTrashcan():"-sharedlinks-"===e?this.loadSharedLinks():"-sites-"===e?this.loadSites():"-mysites-"===e?this.loadMemberSites():"-favorites-"===e?this.loadFavorites():"-recent-"===e?this.loadRecent():this.documentListService.getFolderNode(e).then(e=>(this.folderNode=e,this.currentFolderId=e.id,this.skipCount=0,this.currentNodeAllowableOperations=e.allowableOperations?e.allowableOperations:[],this.loadFolderNodesByFolderNodeId(e.id,this.pageSize,this.skipCount))).catch(e=>{403===JSON.parse(e.message).error.statusCode&&(this.loading=!1,this.noPermission=!0),this.error.emit(e)})}loadFolderNodesByFolderNodeId(e,t,n,i=!1){return new Promise((o,r)=>{this.resetSelection(),this.documentListService.getFolder(null,{maxItems:t,skipCount:n,rootFolderId:e}).subscribe(s=>{this.isCurrentPageEmpty(s,n)?(this.updateSkipCount(n-t),this.loadFolderNodesByFolderNodeId(e,t,n-t).then(()=>o(!0),e=>r(e))):(this.data.loadPage(s,i),this.pagination=s.list.pagination,this.loading=!1,this.infiniteLoading=!1,this.ready.emit(),o(!0))},e=>{r(e)})})}resetSelection(){this.dataTable.resetSelection(),this.selection=[]}resetPagination(){this.skipCount=0}loadTrashcan(){const e={include:["path","properties"],maxItems:this.pageSize,skipCount:this.skipCount};this.apiService.nodesApi.getDeletedNodes(e).then(e=>this.onPageLoaded(e)).catch(e=>this.error.emit(e))}loadSharedLinks(){const e={include:["properties","allowableOperations","path"],maxItems:this.pageSize,skipCount:this.skipCount};this.apiService.sharedLinksApi.findSharedLinks(e).then(e=>this.onPageLoaded(e)).catch(e=>this.error.emit(e))}loadSites(){const e={include:["properties"],maxItems:this.pageSize,skipCount:this.skipCount};this.apiService.sitesApi.getSites(e).then(e=>this.onPageLoaded(e)).catch(e=>this.error.emit(e))}loadMemberSites(){const e={include:["properties"],maxItems:this.pageSize,skipCount:this.skipCount};this.apiService.peopleApi.getSiteMembership("-me-",e).then(e=>{let t={list:{entries:e.list.entries.map(({entry:{site:e}})=>({entry:e})),pagination:e.list.pagination}};this.onPageLoaded(t)}).catch(e=>this.error.emit(e))}loadFavorites(){const e={maxItems:this.pageSize,skipCount:this.skipCount,where:"(EXISTS(target/file) OR EXISTS(target/folder))",include:["properties","allowableOperations","path"]};this.apiService.favoritesApi.getFavorites("-me-",e).then(e=>{let t={list:{entries:e.list.entries.map(({entry:{target:e}})=>({entry:e.file||e.folder})).map(({entry:e})=>(e.properties={"cm:title":e.title,"cm:description":e.description},{entry:e})),pagination:e.list.pagination}};this.onPageLoaded(t)}).catch(e=>this.error.emit(e))}loadRecent(){this.apiService.peopleApi.getPerson("-me-").then(e=>{const t=e.entry.id,n={query:{query:"*",language:"afts"},filterQueries:[{query:"cm:modified:[NOW/DAY-30DAYS TO NOW/DAY+1DAY]"},{query:`cm:modifier:${t} OR cm:creator:${t}`},{query:'TYPE:"content" AND -TYPE:"app:filelink" AND -TYPE:"fm:post"'}],include:["path","properties","allowableOperations"],sort:[{type:"FIELD",field:"cm:modified",ascending:!1}],paging:{maxItems:this.pageSize,skipCount:this.skipCount}};return this.apiService.searchApi.search(n)}).then(e=>this.onPageLoaded(e)).catch(e=>this.error.emit(e))}onPageLoaded(e){e&&(this.data.loadPage(e),this.pagination=e.list.pagination,this.loading=!1,this.ready.emit())}isCurrentPageEmpty(e,t){return!this.hasNodeEntries(e)&&this.hasPages(t)}hasPages(e){return e>0&&this.isPaginationEnabled()}hasNodeEntries(e){return e&&e.list&&e.list.entries&&e.list.entries.length>0}setupDefaultColumns(e="default"){if(this.data){const t=this.getLayoutPreset(e);this.data.setColumns(t)}}onPreviewFile(e){e&&this.preview.emit(new p.NodeEntityEvent(e))}onNodeClick(e){const t=new CustomEvent("node-click",{detail:{sender:this,node:e},bubbles:!0});this.elementRef.nativeElement.dispatchEvent(t);const n=new p.NodeEntityEvent(e);this.nodeClick.emit(n),n.defaultPrevented||this.navigate&&this.navigationMode===f.SINGLE_CLICK_NAVIGATION&&e&&e.entry&&(e.entry.isFile&&this.onPreviewFile(e),e.entry.isFolder&&this.performNavigation(e))}onNodeDblClick(e){const t=new CustomEvent("node-dblclick",{detail:{sender:this,node:e},bubbles:!0});this.elementRef.nativeElement.dispatchEvent(t);const n=new p.NodeEntityEvent(e);this.nodeDblClick.emit(n),n.defaultPrevented||this.navigate&&this.navigationMode===f.DOUBLE_CLICK_NAVIGATION&&e&&e.entry&&(e.entry.isFile&&this.onPreviewFile(e),e.entry.isFolder&&this.performNavigation(e))}onNodeSelect(e){this.selection=e.selection.map(e=>e.node);const t=new CustomEvent("node-select",{detail:{node:e.row.node,selection:this.selection},bubbles:!0});this.elementRef.nativeElement.dispatchEvent(t)}onNodeUnselect(e){this.selection=e.selection.map(e=>e.node);const t=new CustomEvent("node-unselect",{detail:{node:e.row.node,selection:this.selection},bubbles:!0});this.elementRef.nativeElement.dispatchEvent(t)}onShowRowContextMenu(e){if(this.contextMenuActions){let t=e.value,n=t.row.node;n&&(t.actions=this.getContextActions(n)||[])}}onShowRowActionsMenu(e){if(this.contentActions){let t=e.value,n=t.row.node;n&&(t.actions=this.getNodeActions(n)||[])}}onExecuteRowAction(e){if(this.contentActions){let t=e.value,n=t.row.node,i=t.action;this.executeContentAction(n,i)}}onChangePageSize(e){this.preferences.paginationSize=e.maxItems,this.pageSize=e.maxItems,this.skipCount=0,this.reload()}onChangePageNumber(e){this.pageSize=e.maxItems,this.skipCount=e.skipCount,this.reload()}onNextPage(e){this.skipCount=e.skipCount,this.reload()}loadNextBatch(e){this.skipCount=e.skipCount,this.reload(!0)}onPrevPage(e){this.skipCount=e.skipCount,this.reload()}enforceSingleClickNavigationForMobile(){this.isMobile()&&(this.navigationMode=f.SINGLE_CLICK_NAVIGATION)}getDefaultSorting(){let e;if(this.sorting){const[t,n]=this.sorting;e=new a.DataSorting(t,n)}return e}canNavigateFolder(e){return!this.isCustomSource(this.currentFolderId)&&!!(e&&e.entry&&e.entry.isFolder)}isCustomSource(e){return["-trashcan-","-sharedlinks-","-sites-","-mysites-","-favorites-","-recent-"].indexOf(e)>-1}updateSkipCount(e){this.skipCount=e}hasCurrentNodePermission(e){let t=!1;if(this.currentNodeAllowableOperations.length>0){t=!!this.currentNodeAllowableOperations.find(t=>t===e)}return t}hasCreatePermission(){return this.hasCurrentNodePermission(this.CREATE_PERMISSION)}loadLayoutPresets(){const e=this.appConfig.get("document-list.presets",null);this.layoutPresets=e?Object.assign({},c.presetsDefaultModel,e):c.presetsDefaultModel}getLayoutPreset(e="default"){return(this.layoutPresets[e]||this.layoutPresets.default).map(e=>new a.ObjectDataColumn(e))}};h.SINGLE_CLICK_NAVIGATION="click",h.DOUBLE_CLICK_NAVIGATION="dblclick",h.DEFAULT_PAGE_SIZE=20,o.a([Object(r.ContentChild)(s.DataColumnListComponent)],h.prototype,"columnList",void 0),o.a([Object(r.Input)()],h.prototype,"permissionsStyle",void 0),o.a([Object(r.Input)()],h.prototype,"locationFormat",void 0),o.a([Object(r.Input)()],h.prototype,"navigate",void 0),o.a([Object(r.Input)()],h.prototype,"navigationMode",void 0),o.a([Object(r.Input)()],h.prototype,"thumbnails",void 0),o.a([Object(r.Input)()],h.prototype,"selectionMode",void 0),o.a([Object(r.Input)()],h.prototype,"multiselect",void 0),o.a([Object(r.Input)()],h.prototype,"enablePagination",void 0),o.a([Object(r.Input)()],h.prototype,"contentActions",void 0),o.a([Object(r.Input)()],h.prototype,"contentActionsPosition",void 0),o.a([Object(r.Input)()],h.prototype,"contextMenuActions",void 0),o.a([Object(r.Input)()],h.prototype,"pageSize",void 0),o.a([Object(r.Input)()],h.prototype,"emptyFolderImageUrl",void 0),o.a([Object(r.Input)()],h.prototype,"allowDropFiles",void 0),o.a([Object(r.Input)()],h.prototype,"sorting",void 0),o.a([Object(r.Input)()],h.prototype,"rowStyle",void 0),o.a([Object(r.Input)()],h.prototype,"rowStyleClass",void 0),o.a([Object(r.Input)()],h.prototype,"loading",void 0),o.a([Object(r.Input)()],h.prototype,"paginationStrategy",void 0),o.a([Object(r.Input)()],h.prototype,"supportedPageSizes",void 0),o.a([Object(r.Input)()],h.prototype,"rowFilter",void 0),o.a([Object(r.Input)()],h.prototype,"imageResolver",void 0),o.a([Object(r.Input)()],h.prototype,"currentFolderId",void 0),o.a([Object(r.Input)()],h.prototype,"folderNode",void 0),o.a([Object(r.Input)()],h.prototype,"node",void 0),o.a([Object(r.Output)()],h.prototype,"nodeClick",void 0),o.a([Object(r.Output)()],h.prototype,"nodeDblClick",void 0),o.a([Object(r.Output)()],h.prototype,"folderChange",void 0),o.a([Object(r.Output)()],h.prototype,"preview",void 0),o.a([Object(r.Output)()],h.prototype,"ready",void 0),o.a([Object(r.Output)()],h.prototype,"error",void 0),o.a([Object(r.ViewChild)(a.DataTableComponent)],h.prototype,"dataTable",void 0),o.a([Object(r.HostListener)("contextmenu",["$event"])],h.prototype,"onShowContextMenu",null),h=f=o.a([Object(r.Component)({selector:"adf-document-list",styles:[n(226)],template:n(228),encapsulation:r.ViewEncapsulation.None})],h);var f},,,,,,function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(3),a=n(2),l=function(){function e(e){this.apiService=e}return e.prototype.getRating=function(e,t){return a.Observable.fromPromise(this.apiService.getInstance().core.ratingsApi.getRating(e,t)).map(function(e){return e}).catch(this.handleError)},e.prototype.postRating=function(e,t,n){var i={id:t,myRating:n};return a.Observable.fromPromise(this.apiService.getInstance().core.ratingsApi.rate(e,i)).map(function(e){return e}).catch(this.handleError)},e.prototype.deleteRating=function(e,t){return a.Observable.fromPromise(this.apiService.getInstance().core.ratingsApi.removeRating(e,t)).map(function(e){return e}).catch(this.handleError)},e.prototype.handleError=function(e){return console.error(e),a.Observable.throw(e||"Server error")},e=i([r.Injectable(),o("design:paramtypes",["function"==typeof(t=void 0!==s.AlfrescoApiService&&s.AlfrescoApiService)&&t||Object])],e);var t}();t.RatingService=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"TagService",function(){return s});var i=n(1),o=n(0),r=(n.n(o),n(2));n.n(r);let s=class{constructor(e,t){this.apiService=e,this.logService=t,this.refresh=new o.EventEmitter}getTagsByNodeId(e){return r.Observable.fromPromise(this.apiService.getInstance().core.tagsApi.getNodeTags(e)).catch(e=>this.handleError(e))}getAllTheTags(){return r.Observable.fromPromise(this.apiService.getInstance().core.tagsApi.getTags()).catch(e=>this.handleError(e))}addTag(e,t){let n=new(this.apiService.getInstance().core.TagBody);n.tag=t;let i=r.Observable.fromPromise(this.apiService.getInstance().core.tagsApi.addTag(e,n));return i.subscribe(e=>{this.refresh.emit(e)},e=>{this.handleError(e)}),i}removeTag(e,t){let n=r.Observable.fromPromise(this.apiService.getInstance().core.tagsApi.removeTag(e,t));return n.subscribe(e=>{this.refresh.emit(e)},e=>{this.handleError(e)}),n}handleError(e){return this.logService.error(e),r.Observable.throw(e||"Server error")}};i.a([Object(o.Output)()],s.prototype,"refresh",void 0),s=i.a([Object(o.Injectable)()],s)},function(e,t,n){"use strict";class i{constructor(e){e&&(this.type=e.type||null,this.action=e.action||null,this.permission=e.permission||null)}}t.a=i},function(e,t){e.exports=s},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<t.length;o++){var s=t[o];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},,,,,,,,,,function(e,t,n){"use strict";class i{constructor(e){this.disableWithNoPermission=!1,this.disabled=!1,e&&(this.icon=e.icon,this.title=e.title,this.handler=e.handler,this.execute=e.execute,this.target=e.target,this.permission=e.permission,this.disableWithNoPermission=e.disableWithNoPermission,this.disabled=e.disabled)}}t.a=i;class o extends i{constructor(e){super(e),this.target="document"}}t.b=o;class r extends i{constructor(e){super(e),this.target="folder"}}t.c=r},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(1),o=n(0),r=(n.n(o),n(229)),s=(n.n(r),n(2)),a=(n.n(s),n(29));let l=class{constructor(e,t,n){this.nodeActionsService=e,this.documentListService=t,this.contentService=n,this.permissionEvent=new s.Subject,this.error=new s.Subject,this.success=new s.Subject,this.handlers={},this.setupActionHandlers()}getHandler(e){if(e){let t=e.toLowerCase();return this.handlers[t]||null}return null}setHandler(e,t){if(e){let n=e.toLowerCase();return this.handlers[n]=t,!0}return!1}canExecuteAction(e){return this.documentListService&&e&&!0===e.entry.isFile}setupActionHandlers(){this.handlers.download=this.download.bind(this),this.handlers.copy=this.copyNode.bind(this),this.handlers.move=this.moveNode.bind(this),this.handlers.delete=this.deleteNode.bind(this)}download(e){if(this.canExecuteAction(e)&&this.contentService){let t=document.createElement("a");return document.body.appendChild(t),t.setAttribute("download","download"),t.href=this.contentService.getContentUrl(e),t.click(),document.body.removeChild(t),r.Observable.of(!0)}return r.Observable.of(!1)}copyNode(e,t,n){const i=this.nodeActionsService.copyContent(e.entry,n);return this.prepareHandlers(i,"content","copy",t,n),i}moveNode(e,t,n){const i=this.nodeActionsService.moveContent(e.entry,n);return this.prepareHandlers(i,"content","move",t,n),i}prepareHandlers(e,t,n,i,o){e.subscribe(e=>{i&&"function"==typeof i.reload&&i.reload(),this.success.next(e)},this.error.next.bind(this.error))}deleteNode(e,t,n){let i;if(this.canExecuteAction(e))return this.contentService.hasPermission(e.entry,n)?((i=this.documentListService.deleteNode(e.entry.id)).subscribe(()=>{t&&"function"==typeof t.reload&&t.reload(),this.success.next(e.entry.id)}),i):(this.permissionEvent.next(new a.a({type:"content",action:"delete",permission:n})),r.Observable.throw(new Error("No permission to delete")))}};l=i.a([Object(o.Injectable)()],l)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(1),o=n(0),r=(n.n(o),n(2)),s=(n.n(r),n(29));let a=class{constructor(e,t,n){this.nodeActionsService=e,this.documentListService=t,this.contentService=n,this.permissionEvent=new r.Subject,this.error=new r.Subject,this.success=new r.Subject,this.handlers={},this.setupActionHandlers()}getHandler(e){if(e){let t=e.toLowerCase();return this.handlers[t]||null}return null}setHandler(e,t){if(e){let n=e.toLowerCase();return this.handlers[n]=t,!0}return!1}canExecuteAction(e){return this.documentListService&&e&&!0===e.entry.isFolder}setupActionHandlers(){this.handlers.copy=this.copyNode.bind(this),this.handlers.move=this.moveNode.bind(this),this.handlers.delete=this.deleteNode.bind(this)}copyNode(e,t,n){const i=this.nodeActionsService.copyFolder(e.entry,n);return this.prepareHandlers(i,"folder","copy",t,n),i}moveNode(e,t,n){const i=this.nodeActionsService.moveFolder(e.entry,n);return this.prepareHandlers(i,"folder","move",t,n),i}prepareHandlers(e,t,n,i,o){e.subscribe(e=>{i&&"function"==typeof i.reload&&i.reload(),this.success.next(e)},this.error.next.bind(this.error))}deleteNode(e,t,n){let i;if(this.canExecuteAction(e))return this.contentService.hasPermission(e.entry,n)?((i=this.documentListService.deleteNode(e.entry.id)).subscribe(()=>{t&&"function"==typeof t.reload&&t.reload(),this.success.next(e.entry.id)}),i):(this.permissionEvent.next(new s.a({type:"folder",action:"delete",permission:n})),r.Observable.throw(new Error("No permission to delete")))}};a=i.a([Object(o.Injectable)()],a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ContentNodeSelectorComponent",function(){return l});var i=n(1),o=n(0),r=(n.n(o),n(4)),s=(n.n(r),n(3)),a=(n.n(s),n(21));let l=class{constructor(e,t,n,i){this.contentNodeSelectorService=e,this.contentService=t,this.containingDialog=i,this.nodes=null,this.searchTerm="",this.showingSearchResults=!1,this.loadingSearchResults=!1,this.inDialog=!1,this.chosenNode=null,this.folderIdToShow=null,this.skipCount=0,this.currentFolderId=null,this.rowFilter=null,this.imageResolver=null,this.pageSize=10,this.select=new o.EventEmitter,n&&(this.title=n.title,this.select=n.select,this.currentFolderId=n.currentFolderId,this.rowFilter=n.rowFilter,this.imageResolver=n.imageResolver),this.containingDialog&&(this.inDialog=!0)}ngOnInit(){this.folderIdToShow=this.currentFolderId,this.paginationStrategy=a.PaginationStrategy.Infinite}siteChanged(e){this.siteId=e.guid,this.updateResults()}search(e){this.searchTerm=e,this.updateResults()}needBreadcrumbs(){const e=!this.showingSearchResults,t=this.showingSearchResults&&this.chosenNode;return e||t}get breadcrumbFolderNode(){return this.showingSearchResults&&this.chosenNode?this.chosenNode:this.documentList.folderNode}clear(){this.searchTerm="",this.nodes=null,this.skipCount=0,this.chosenNode=null,this.showingSearchResults=!1,this.folderIdToShow=this.currentFolderId}updateResults(){0===this.searchTerm.length?this.folderIdToShow=this.siteId||this.currentFolderId:this.startNewSearch()}startNewSearch(){this.nodes=null,this.skipCount=0,this.chosenNode=null,this.folderIdToShow=null,this.querySearch()}getNextPageOfSearch(e){this.skipCount=e.skipCount,this.querySearch()}querySearch(){this.isSearchTermLongEnough()&&(this.loadingSearchResults=!0,this.contentNodeSelectorService.search(this.searchTerm,this.siteId,this.skipCount,this.pageSize).subscribe(this.showSearchResults.bind(this)))}showSearchResults(e){this.showingSearchResults=!0,this.loadingSearchResults=!1,this.nodes?this.documentList.data.loadPage(e,!0):this.nodes=e,this.pagination=e.list.pagination,this.highlight()}isSearchTermLongEnough(){return this.searchTerm.length>3}highlight(){setTimeout(()=>{this.highlighter.highlight(this.searchTerm)},0)}onNodeSelect(e){this.attemptNodeSelection(e.detail.node.entry)}onFolderChange(){this.showingSearchResults=!1}onFolderLoaded(){this.attemptNodeSelection(this.documentList.folderNode)}attemptNodeSelection(e){this.contentService.hasPermission(e,"create")?this.chosenNode=e:this.resetChosenNode()}resetChosenNode(){this.chosenNode=null}choose(){this.select.next([this.chosenNode])}close(){this.containingDialog.close()}};i.a([Object(o.Input)()],l.prototype,"title",void 0),i.a([Object(o.Input)()],l.prototype,"currentFolderId",void 0),i.a([Object(o.Input)()],l.prototype,"rowFilter",void 0),i.a([Object(o.Input)()],l.prototype,"imageResolver",void 0),i.a([Object(o.Input)()],l.prototype,"pageSize",void 0),i.a([Object(o.Output)()],l.prototype,"select",void 0),i.a([Object(o.ViewChild)(a.DocumentListComponent)],l.prototype,"documentList",void 0),i.a([Object(o.ViewChild)(s.HighlightDirective)],l.prototype,"highlighter",void 0),l=i.a([Object(o.Component)({selector:"adf-content-node-selector",styles:[n(230)],template:n(232),encapsulation:o.ViewEncapsulation.None}),i.b(2,Object(o.Optional)()),i.b(2,Object(o.Inject)(r.MAT_DIALOG_DATA)),i.b(3,Object(o.Optional)())],l)},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(30),a=n(21),l=function(){function e(){this.folderNode=null,this.root=null,this.rootId=null,this.route=[],this.navigate=new r.EventEmitter}return Object.defineProperty(e.prototype,"hasRoot",{get:function(){return!!this.root},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){if(e.folderNode){var t=e.folderNode.currentValue;this.route=this.parseRoute(t)}},e.prototype.parseRoute=function(e){if(e&&e.path){var t=(e.path.elements||[]).slice();t.push({id:e.id,name:e.name});var n=this.getElementPosition(t,this.rootId);return n>0&&t.splice(0,n),-1===n&&this.rootId&&(t[0].id=this.rootId),this.root&&(t[0].name=this.root),t}return[]},e.prototype.getElementPosition=function(e,t){var n=-1;return e&&e.length>0&&t&&(n=e.findIndex(function(e){return e.id===t})),n},e.prototype.onRoutePathClick=function(e,t){t&&t.preventDefault(),e&&(this.navigate.emit(e),this.target&&this.target.loadFolderByNodeId(e.id))},i([r.Input(),o("design:type","function"==typeof(t=void 0!==s.MinimalNodeEntryEntity&&s.MinimalNodeEntryEntity)&&t||Object)],e.prototype,"folderNode",void 0),i([r.Input(),o("design:type",String)],e.prototype,"root",void 0),i([r.Input(),o("design:type",String)],e.prototype,"rootId",void 0),i([r.Input(),o("design:type","function"==typeof(l=void 0!==a.DocumentListComponent&&a.DocumentListComponent)&&l||Object)],e.prototype,"target",void 0),i([r.Output(),o("design:type","function"==typeof(c=void 0!==r.EventEmitter&&r.EventEmitter)&&c||Object)],e.prototype,"navigate",void 0),e=i([r.Component({selector:"adf-breadcrumb",template:n(233),styles:[n(234)],encapsulation:r.ViewEncapsulation.None,host:{class:"adf-breadcrumb"}})],e);var t,l,c}();t.BreadcrumbComponent=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"DocumentListService",function(){return s});var i=n(1),o=n(0),r=(n.n(o),n(2));n.n(r);let s=a=class{constructor(e,t,n,i,o){this.contentService=t,this.apiService=n,this.logService=i,this.thumbnailService=o}getNodesPromise(e,t){let n=a.ROOT_ID;t&&t.rootFolderId&&(n=t.rootFolderId);let i={includeSource:!0,include:["path","properties","allowableOperations"]};return e&&(i.relativePath=e),t&&(t.maxItems&&(i.maxItems=t.maxItems),t.skipCount&&(i.skipCount=t.skipCount)),this.apiService.getInstance().nodes.getNodeChildren(n,i)}deleteNode(e){return r.Observable.fromPromise(this.apiService.getInstance().nodes.deleteNode(e))}copyNode(e,t){return r.Observable.fromPromise(this.apiService.getInstance().nodes.copyNode(e,{targetParentId:t})).catch(e=>this.handleError(e))}moveNode(e,t){return r.Observable.fromPromise(this.apiService.getInstance().nodes.moveNode(e,{targetParentId:t})).catch(e=>this.handleError(e))}createFolder(e,t){return r.Observable.fromPromise(this.apiService.getInstance().nodes.createFolder(e,"/",t)).catch(e=>this.handleError(e))}getFolder(e,t){return r.Observable.fromPromise(this.getNodesPromise(e,t)).map(e=>e).catch(e=>this.handleError(e))}getFolderNode(e){return this.apiService.getInstance().nodes.getNodeInfo(e,{includeSource:!0,include:["path","properties","allowableOperations"]})}getDocumentThumbnailUrl(e){return this.thumbnailService.getDocumentThumbnailUrl(e)}getMimeTypeIcon(e){return this.thumbnailService.getMimeTypeIcon(e)}getDefaultMimeTypeIcon(){return this.thumbnailService.getDefaultMimeTypeIcon()}hasPermission(e,t){return this.contentService.hasPermission(e,t)}handleError(e){return this.logService.error(e),r.Observable.throw(e||"Server error")}};s.ROOT_ID="-root-",s=a=i.a([Object(o.Injectable)()],s);var a},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(3),a=n(2),l=function(){function e(e,t,n,i){this.uploadService=e,this.nodesApi=t,this.notificationService=n,this.translateService=i,this.FileUploadStatus=s.FileUploadStatus,this.files=[]}return e.prototype.cancelFile=function(e){this.uploadService.cancelUpload(e)},e.prototype.removeFile=function(e){var t=this;this.deleteNode(e).subscribe(function(){e.status===s.FileUploadStatus.Error&&t.notifyError(e),t.uploadService.cancelUpload(e)})},e.prototype.cancelAllFiles=function(){var e=this;this.getUploadingFiles().forEach(function(t){return e.uploadService.cancelUpload(t)});var t=this.files.filter(function(e){return e.status===s.FileUploadStatus.Complete}).map(function(t){return e.deleteNode(t)});a.Observable.forkJoin.apply(a.Observable,t).subscribe(function(t){var n=t.filter(function(e){return e.status===s.FileUploadStatus.Error});n.length&&e.notifyError.apply(e,n),(i=e.uploadService).cancelUpload.apply(i,t);var i})},e.prototype.isUploadCompleted=function(){return!this.isUploadCancelled()&&Boolean(this.files.length)&&!this.files.some(function(e){var t=e.status;return t===s.FileUploadStatus.Starting||t===s.FileUploadStatus.Progress||t===s.FileUploadStatus.Pending})},e.prototype.isUploadCancelled=function(){return!!this.files.length&&this.files.every(function(e){var t=e.status;return t===s.FileUploadStatus.Aborted||t===s.FileUploadStatus.Cancelled||t===s.FileUploadStatus.Deleted})},e.prototype.deleteNode=function(e){var t=e.data.entry.id;return this.nodesApi.deleteNode(t,{permanent:!0}).map(function(){return e.status=s.FileUploadStatus.Deleted,e}).catch(function(t){return e.status=s.FileUploadStatus.Error,a.Observable.of(e)})},e.prototype.notifyError=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(1===t.length?this.translateService.get("FILE_UPLOAD.MESSAGES.REMOVE_FILE_ERROR",{fileName:t[0].name}):this.translateService.get("FILE_UPLOAD.MESSAGES.REMOVE_FILES_ERROR",{total:t.length})).subscribe(function(t){return e.notificationService.openSnackMessage(t,4e3)})},e.prototype.getUploadingFiles=function(){return this.files.filter(function(e){if(e.status===s.FileUploadStatus.Pending||e.status===s.FileUploadStatus.Progress||e.status===s.FileUploadStatus.Starting)return e})},i([r.ContentChild(r.TemplateRef),o("design:type",Object)],e.prototype,"template",void 0),i([r.Input(),o("design:type",Array)],e.prototype,"files",void 0),e=i([r.Component({selector:"adf-file-uploading-list",template:n(247),styles:[n(248)]}),o("design:paramtypes",["function"==typeof(t=void 0!==s.UploadService&&s.UploadService)&&t||Object,"function"==typeof(l=void 0!==s.NodesApiService&&s.NodesApiService)&&l||Object,"function"==typeof(c=void 0!==s.NotificationService&&s.NotificationService)&&c||Object,"function"==typeof(d=void 0!==s.AlfrescoTranslationService&&s.AlfrescoTranslationService)&&d||Object])],e);var t,l,c,d}();t.FileUploadingListComponent=l},,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(1),o=n(0),r=(n.n(o),n(27));n.n(r);let s=class{constructor(e){this.ratingService=e,this.average=0,this.ratingType="fiveStar",this.changeVote=new o.EventEmitter,this.stars=[]}ngOnChanges(){let e=this.ratingService.getRating(this.nodeId,this.ratingType);return e.subscribe(e=>{e.entry.aggregate&&(this.average=e.entry.aggregate.average,this.calculateStars())}),e}calculateStars(){this.stars=[];for(let e=0;e<5;e++)e<this.average?this.stars.push({fill:!0}):this.stars.push({fill:!1});this.changeVote.emit(this.average)}updateVote(e){this.ratingService.postRating(this.nodeId,this.ratingType,e).subscribe(e=>{e.entry.aggregate&&this.average!==e.entry.aggregate.average&&(this.average=e.entry.aggregate.average,this.calculateStars())})}};i.a([Object(o.Input)()],s.prototype,"nodeId",void 0),i.a([Object(o.Output)()],s.prototype,"changeVote",void 0),s=i.a([Object(o.Component)({selector:"adf-rating",styles:[n(197)],template:n(199),providers:[r.RatingService],encapsulation:o.ViewEncapsulation.None})],s)},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(27),a=function(){function e(e){this.ratingService=e,this.likesCounter=0,this.ratingType="likes",this.isLike=!1,this.changeVote=new r.EventEmitter}return e.prototype.ngOnChanges=function(){var e=this;this.clean();var t=this.ratingService.getRating(this.nodeId,this.ratingType);return t.subscribe(function(t){t.entry.aggregate&&(e.likesCounter=t.entry.aggregate.numberOfRatings,t.entry.ratedAt&&(e.isLike=!0))}),t},e.prototype.likeClick=function(){var e=this;this.isLike?this.ratingService.deleteRating(this.nodeId,this.ratingType).subscribe(function(){e.likesCounter-=1,e.isLike=!1}):this.ratingService.postRating(this.nodeId,this.ratingType,!0).subscribe(function(t){e.likesCounter=t.entry.aggregate.numberOfRatings,e.isLike=!0}),this.changeVote.emit(this.likesCounter)},e.prototype.clean=function(){this.isLike=!1,this.likesCounter=0},i([r.Input(),o("design:type",String)],e.prototype,"nodeId",void 0),i([r.Output(),o("design:type",Object)],e.prototype,"changeVote",void 0),e=i([r.Component({selector:"adf-like",styles:[n(200)],template:n(202),providers:[s.RatingService],encapsulation:r.ViewEncapsulation.None}),o("design:paramtypes",["function"==typeof(t=void 0!==s.RatingService&&s.RatingService)&&t||Object])],e);var t}();t.LikeComponent=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"TagActionsComponent",function(){return r});var i=n(1),o=n(0);n.n(o);let r=class{constructor(e,t){this.tagService=e,this.translateService=t,this.successAdd=new o.EventEmitter,this.error=new o.EventEmitter,this.result=new o.EventEmitter,this.disableAddTag=!0,this.tagService.refresh.subscribe(()=>{this.refreshTag()})}ngOnChanges(){return this.refreshTag()}refreshTag(){this.tagService.getTagsByNodeId(this.nodeId).subscribe(e=>{this.tagsEntries=e.list.entries,this.disableAddTag=!1,this.result.emit(this.tagsEntries)},()=>{this.tagsEntries=null,this.disableAddTag=!0,this.result.emit(this.tagsEntries)})}addTag(){this.searchTag(this.newTagName)?(this.translateService.get("TAG.MESSAGES.EXIST").subscribe(e=>{this.errorMsg=e}),this.error.emit(this.errorMsg)):this.tagService.addTag(this.nodeId,this.newTagName).subscribe(()=>{this.newTagName="",this.successAdd.emit(this.nodeId)})}searchTag(e){if(this.tagsEntries)return this.tagsEntries.find(t=>e===t.entry.tag)}cleanErrorMsg(){this.errorMsg=""}removeTag(e){this.tagService.removeTag(this.nodeId,e)}};i.a([Object(o.Input)()],r.prototype,"nodeId",void 0),i.a([Object(o.Output)()],r.prototype,"successAdd",void 0),i.a([Object(o.Output)()],r.prototype,"error",void 0),i.a([Object(o.Output)()],r.prototype,"result",void 0),r=i.a([Object(o.Component)({selector:"adf-tag-node-actions-list",template:n(206),styles:[n(207)],encapsulation:o.ViewEncapsulation.None})],r)},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(28),a=function(){function e(e){var t=this;this.tagService=e,this.result=new r.EventEmitter,this.tagService.refresh.subscribe(function(){t.refreshTag()})}return e.prototype.ngOnInit=function(){return this.refreshTag()},e.prototype.refreshTag=function(){var e=this;this.tagService.getAllTheTags().subscribe(function(t){e.tagsEntries=t.list.entries,e.result.emit(e.tagsEntries)})},i([r.Output(),o("design:type",Object)],e.prototype,"result",void 0),e=i([r.Component({selector:"adf-tag-list",template:n(209),styles:[n(210)],encapsulation:r.ViewEncapsulation.None}),o("design:paramtypes",["function"==typeof(t=void 0!==s.TagService&&s.TagService)&&t||Object])],e);var t}();t.TagListComponent=a},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(28),a=function(){function e(e){var t=this;this.tagService=e,this.results=new r.EventEmitter,this.tagService.refresh.subscribe(function(){t.refreshTag()})}return e.prototype.ngOnChanges=function(){return this.refreshTag()},e.prototype.refreshTag=function(){var e=this;this.tagService.getTagsByNodeId(this.nodeId).subscribe(function(t){e.tagsEntries=t.list.entries,e.results.emit(e.tagsEntries)})},e.prototype.removeTag=function(e){var t=this;this.tagService.removeTag(this.nodeId,e).subscribe(function(){t.refreshTag()})},i([r.Input(),o("design:type",String)],e.prototype,"nodeId",void 0),i([r.Output(),o("design:type",Object)],e.prototype,"results",void 0),e=i([r.Component({selector:"adf-tag-node-list",template:n(212),styles:[n(213)],encapsulation:r.ViewEncapsulation.None}),o("design:paramtypes",["function"==typeof(t=void 0!==s.TagService&&s.TagService)&&t||Object])],e);var t}();t.TagNodeListComponent=a},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(3),a=n(11),l=function(){function e(e,t){this.apiService=e,this.logService=t,this.showData=!0,this.contextRoot="alfresco",this.servicePath="service",this.contentType="TEXT",this.success=new r.EventEmitter,this.data=void 0,this.showError=!1}return e.prototype.ngOnChanges=function(e){var t=this;return this.showData&&this.clean(),new Promise(function(e,n){t.apiService.getInstance().webScript.executeWebScript("GET",t.scriptPath,t.scriptArgs,t.contextRoot,t.servicePath).then(function(n){t.data=n,t.showData&&"DATATABLE"===t.contentType&&(t.data=t.showDataAsDataTable(n)),t.success.emit(t.data),e()},function(e){t.logService.log("Error"+e),n()})})},e.prototype.showDataAsDataTable=function(e){try{e.schema||(e.schema=a.ObjectDataTableAdapter.generateSchema(e.data)),e.schema&&e.schema.length>0&&(this.data=new a.ObjectDataTableAdapter(e.data,e.schema))}catch(e){this.logService.error("error during the cast as datatable")}return null},e.prototype.clean=function(){this.data=void 0},e.prototype.isDataTableContent=function(){return"DATATABLE"===this.contentType},i([r.Input(),o("design:type",String)],e.prototype,"scriptPath",void 0),i([r.Input(),o("design:type",Object)],e.prototype,"scriptArgs",void 0),i([r.Input(),o("design:type",Boolean)],e.prototype,"showData",void 0),i([r.Input(),o("design:type",String)],e.prototype,"contextRoot",void 0),i([r.Input(),o("design:type",String)],e.prototype,"servicePath",void 0),i([r.Input(),o("design:type",String)],e.prototype,"contentType",void 0),i([r.Output(),o("design:type",Object)],e.prototype,"success",void 0),e=i([r.Component({selector:"adf-webscript-get",template:n(218)}),o("design:paramtypes",["function"==typeof(t=void 0!==s.AlfrescoApiService&&s.AlfrescoApiService)&&t||Object,"function"==typeof(l=void 0!==s.LogService&&s.LogService)&&l||Object])],e);var t,l}();t.WebscriptComponent=l},function(e,t,n){"use strict";var i=n(12),o=(n.n(i),n(3)),r=(n.n(o),n(11)),s=(n.n(r),n(70));class a{constructor(e,t=[],n){this.documentListService=e,this.ERR_ROW_NOT_FOUND="Row not found",this.ERR_COL_NOT_FOUND="Column not found",this.thumbnails=!1,this.rows=[],this.columns=t||[],this.sorting=n}getRows(){return this.rows}setRows(e){this.rows=e||[],this.sort()}getColumns(){return this.columns}setColumns(e){this.columns=e||[]}getValue(e,t){if(!e)throw new Error(this.ERR_ROW_NOT_FOUND);if(!t)throw new Error(this.ERR_COL_NOT_FOUND);let n=e,i=e.getValue(t.key);if(void 0!==n.cache[t.key])return n.cache[t.key];if("date"===t.type)try{const e=this.formatDate(t,i);return n.cacheValue(t.key,e)}catch(e){return console.error(`Error parsing date ${i} to format ${t.format}`),"Error"}if("$thumbnail"===t.key){if(this.imageResolver){let n=this.imageResolver(e,t);if(n)return n}const n=e.node;if(n.entry.isFolder)return this.documentListService.getMimeTypeIcon("folder");if(n.entry.isFile&&this.thumbnails)return this.documentListService.getDocumentThumbnailUrl(n);if(n.entry.content){const e=n.entry.content.mimeType;if(e)return this.documentListService.getMimeTypeIcon(e)}return this.documentListService.getDefaultMimeTypeIcon()}if("image"===t.type&&this.imageResolver){let n=this.imageResolver(e,t);if(n)return n}return n.cacheValue(t.key,i)}formatDate(e,t){if("date"===e.type){const n=e.format||"medium";if("timeAgo"===n){return(new o.TimeAgoPipe).transform(t)}return new i.DatePipe("en-US").transform(t,n)}return t}getSorting(){return this.sorting}setSorting(e){this.sorting=e,this.sortRows(this.rows,this.sorting)}sort(e,t){let n=this.sorting||new r.DataSorting;e&&(n.key=e,n.direction=t||"asc"),this.setSorting(n)}setFilter(e){this.filter=e}setImageResolver(e){this.imageResolver=e}sortRows(e,t){const n={};t&&t.key&&e&&e.length>0&&((t.key.includes("sizeInBytes")||"name"===t.key)&&(n.numeric=!0),e.sort((e,i)=>{if(e.node.entry.isFolder!==i.node.entry.isFolder)return e.node.entry.isFolder?-1:1;let o=e.getValue(t.key);o=o?o instanceof Date?o.valueOf().toString():o.toString():"";let r=i.getValue(t.key);return r=r?r instanceof Date?r.valueOf().toString():r.toString():"","asc"===t.direction?o.localeCompare(r,void 0,n):r.localeCompare(o,void 0,n)}))}loadPage(e,t=!1){this.page=e;let n=[];if(e&&e.list){let t=e.list.entries;if(t&&t.length>0&&(n=t.map(e=>new s.a(e,this.documentListService,this.permissionsStyle)),this.filter&&(n=n.filter(this.filter)),this.columns&&this.columns.length>0)){let e=this.getSorting();if(e)this.sortRows(n,e);else{let e=this.columns.filter(e=>e.sortable);e.length>0?this.sort(e[0].key,"asc"):this.sort(this.columns[0].key,"asc")}}}this.rows=t?this.rows.concat(n):n}}t.a=a},function(e,t,n){"use strict";var i=n(3);n.n(i);class o{constructor(e,t,n){if(this.obj=e,this.documentListService=t,this.permissionsStyle=n,this.cache={},this.isSelected=!1,this.cssClass="",!e)throw new Error(o.ERR_OBJECT_NOT_FOUND);this.isDropTarget=this.isFolderAndHasPermissionToUpload(e),n&&(this.cssClass=this.getPermissionClass(e))}get node(){return this.obj}getPermissionClass(e){let t="";return this.permissionsStyle.forEach(n=>{(this.applyPermissionStyleToFolder(e.entry,n)||this.applyPermissionStyleToFile(e.entry,n))&&this.documentListService.hasPermission(e.entry,n.permission)&&(t+=` ${n.css}`)}),t}applyPermissionStyleToFile(e,t){return t.isFile&&e.isFile}applyPermissionStyleToFolder(e,t){return t.isFolder&&e.isFolder}isFolderAndHasPermissionToUpload(e){return this.isFolder(e)&&this.documentListService.hasPermission(e.entry,"create")}isFolder(e){return e.entry&&e.entry.isFolder}cacheValue(e,t){return this.cache[e]=t,t}getValue(e){return void 0!==this.cache[e]?this.cache[e]:i.ObjectUtils.getValue(this.obj.entry,e)}hasValue(e){return void 0!==this.getValue(e)}}t.a=o,o.ERR_OBJECT_NOT_FOUND="Object source not found"},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),r=function(e){function t(t){var n=e.call(this)||this;return n.value=t,n}return i(t,e),t}(o.BaseEvent);t.NodeEntityEvent=r;var s=function(e){function t(t){var n=e.call(this)||this;return n.value=t,n}return i(t,e),t}(o.BaseEvent);t.NodeEntryEvent=s},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(1),o=n(0);n.n(o);let r=class{constructor(e,t){this.list=e,this.logService=t,this.type="text",this.sortable=!1,this.title="",this.logService.log("ContentColumnComponent is deprecated starting with 1.7.0 and may be removed in future versions. Use DataColumnComponent instead.")}ngOnInit(){this.srTitle||"$thumbnail"!==this.key||(this.srTitle="Thumbnail")}ngAfterContentInit(){this.register()}register(){return!!this.list&&this.list.registerColumn(this)}};i.a([Object(o.Input)()],r.prototype,"key",void 0),i.a([Object(o.Input)()],r.prototype,"type",void 0),i.a([Object(o.Input)()],r.prototype,"format",void 0),i.a([Object(o.Input)()],r.prototype,"sortable",void 0),i.a([Object(o.Input)()],r.prototype,"title",void 0),i.a([Object(o.ContentChild)(o.TemplateRef)],r.prototype,"template",void 0),i.a([Object(o.Input)("sr-title")],r.prototype,"srTitle",void 0),i.a([Object(o.Input)("class")],r.prototype,"cssClass",void 0),r=i.a([Object(o.Component)({selector:"content-column",template:""})],r)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(1),o=n(0);n.n(o);let r=class{constructor(e,t){this.documentList=e,this.logService=t,this.logService.log("ContentColumnListComponent is deprecated starting with 1.7.0 and may be removed in future versions. Use DataColumnListComponent instead.")}registerColumn(e){if(this.documentList&&e){return this.documentList.data.getColumns().push(e),!0}return!1}};r=i.a([Object(o.Component)({selector:"content-columns",template:""})],r)},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(1),o=n(0),r=(n.n(o),n(42)),s=n(43),a=n(41);let l=class{constructor(e,t,n){this.list=e,this.documentActions=t,this.folderActions=n,this.title="Action",this.disabled=!1,this.execute=new o.EventEmitter,this.permissionEvent=new o.EventEmitter,this.error=new o.EventEmitter,this.success=new o.EventEmitter,this.model=new a.a}ngOnInit(){this.model=new a.a({title:this.title,icon:this.icon,permission:this.permission,disableWithNoPermission:this.disableWithNoPermission,target:this.target,disabled:this.disabled}),this.handler&&(this.model.handler=this.getSystemHandler(this.target,this.handler)),this.execute&&(this.model.execute=(e=>{this.execute.emit({value:e})})),this.register()}register(){return!!this.list&&this.list.registerAction(this.model)}ngOnChanges(e){this.model.title=this.title}getSystemHandler(e,t){if(e){let n=e.toLowerCase();if("document"===n)return this.documentActions?(this.documentActions.permissionEvent.subscribe(e=>{this.permissionEvent.emit(e)}),this.documentActions.error.subscribe(e=>{this.error.emit(e)}),this.documentActions.success.subscribe(e=>{this.success.emit(e)}),this.documentActions.getHandler(t)):null;if("folder"===n)return this.folderActions?(this.folderActions.permissionEvent.subscribe(e=>{this.permissionEvent.emit(e)}),this.folderActions.error.subscribe(e=>{this.error.emit(e)}),this.folderActions.success.subscribe(e=>{this.success.emit(e)}),this.folderActions.getHandler(t)):null}return null}};i.a([Object(o.Input)()],l.prototype,"title",void 0),i.a([Object(o.Input)()],l.prototype,"icon",void 0),i.a([Object(o.Input)()],l.prototype,"handler",void 0),i.a([Object(o.Input)()],l.prototype,"target",void 0),i.a([Object(o.Input)()],l.prototype,"permission",void 0),i.a([Object(o.Input)()],l.prototype,"disableWithNoPermission",void 0),i.a([Object(o.Input)()],l.prototype,"disabled",void 0),i.a([Object(o.Output)()],l.prototype,"execute",void 0),i.a([Object(o.Output)()],l.prototype,"permissionEvent",void 0),i.a([Object(o.Output)()],l.prototype,"error",void 0),i.a([Object(o.Output)()],l.prototype,"success",void 0),l=i.a([Object(o.Component)({selector:"content-action",template:"",providers:[r.a,s.a]})],l)},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(21),a=function(){function e(e){this.documentList=e}return e.prototype.registerAction=function(e){return!(!this.documentList||!e)&&(this.documentList.actions.push(e),!0)},e=i([r.Component({selector:"content-actions",template:""}),o("design:paramtypes",["function"==typeof(t=void 0!==s.DocumentListComponent&&s.DocumentListComponent)&&t||Object])],e);var t}();t.ContentActionListComponent=a},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(1),o=n(0);n.n(o);let r=class{constructor(e){this.documentList=e}ngAfterContentInit(){this.documentList.emptyFolderTemplate=this.template,this.documentList.dataTable.noContentTemplate=this.template}};i.a([Object(o.ContentChild)(o.TemplateRef)],r.prototype,"template",void 0),r=i.a([Object(o.Directive)({selector:"empty-folder-content"})],r)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(1),o=n(0);n.n(o);let r=class{constructor(e){this.documentList=e}ngAfterContentInit(){this.documentList.noPermissionTemplate=this.template,this.documentList.dataTable.noPermissionTemplate=this.template}};i.a([Object(o.ContentChild)(o.TemplateRef)],r.prototype,"template",void 0),r=i.a([Object(o.Directive)({selector:"no-permission-content"})],r)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(1),o=n(0),r=(n.n(o),n(3));n.n(r);let s=class{constructor(e){this.sitesService=e,this.hideMyFiles=!1,this.change=new o.EventEmitter,this.MY_FILES_VALUE="default",this.siteList=[]}ngOnInit(){this.sitesService.getSites().subscribe(e=>{this.siteList=e},e=>{})}selectedSite(){let e;e=this.siteSelected===this.MY_FILES_VALUE?new r.SiteModel:this.siteList.find(e=>e.guid===this.siteSelected),this.change.emit(e)}};i.a([Object(o.Input)()],s.prototype,"hideMyFiles",void 0),i.a([Object(o.Output)()],s.prototype,"change",void 0),s=i.a([Object(o.Component)({selector:"adf-sites-dropdown",styles:[n(236)],template:n(238)})],s)},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(4),a=n(3),l=n(2),c=n(44),d=n(46),u=function(){function e(e,t,n){this.dialog=e,this.documentListService=t,this.contentService=n}return e.prototype.copyContent=function(e,t){return this.doFileOperation("copy","content",e,t)},e.prototype.copyFolder=function(e,t){return this.doFileOperation("copy","folder",e,t)},e.prototype.moveContent=function(e,t){return this.doFileOperation("move","content",e,t)},e.prototype.moveFolder=function(e,t){return this.doFileOperation("move","folder",e,t)},e.prototype.doFileOperation=function(e,t,n,i){var o=this,s=new l.Subject;if(this.contentService.hasPermission(n,i)){var a={title:e+" "+n.name+" to ...",currentFolderId:n.parentId,rowFilter:this.rowFilter.bind(this,n.id),imageResolver:this.imageResolver.bind(this),select:new r.EventEmitter};return this.dialog.open(c.ContentNodeSelectorComponent,{data:a,panelClass:"adf-content-node-selector-dialog",width:"630px"}),a.select.subscribe(function(i){var r=i[0];o.documentListService[e+"Node"].call(o.documentListService,n.id,r.id).subscribe(s.next.bind(s,"OPERATION.SUCCES."+t.toUpperCase()+"."+e.toUpperCase()),s.error.bind(s)),o.dialog.closeAll()}),s}return s.error(new Error(JSON.stringify({error:{statusCode:403}}))),s},e.prototype.rowFilter=function(e,t){var n=t.node.entry;return n.id!==e&&!n.isFile},e.prototype.imageResolver=function(e,t){var n=e.node.entry;return this.contentService.hasPermission(n,"create")?null:this.documentListService.getMimeTypeIcon("disable/folder")},e=i([r.Injectable(),o("design:paramtypes",["function"==typeof(t=void 0!==s.MatDialog&&s.MatDialog)&&t||Object,"function"==typeof(n=void 0!==d.DocumentListService&&d.DocumentListService)&&n||Object,"function"==typeof(u=void 0!==a.AlfrescoContentService&&a.AlfrescoContentService)&&u||Object])],e);var t,n,u}();t.NodeActionsService=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(243);for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"UploadButtonComponent",function(){return l});var i=n(1),o=n(0),r=(n.n(o),n(3)),s=(n.n(r),n(2)),a=(n.n(s),n(29));let l=c=class{constructor(e,t,n,i,r){this.uploadService=e,this.translateService=t,this.logService=n,this.notificationService=i,this.apiService=r,this.showNotificationBar=!0,this.currentFolderPath="/",this.disableWithNoPermission=!1,this.disabled=!1,this.uploadFolders=!1,this.multipleFiles=!1,this.versioning=!1,this.acceptedFilesType="*",this.tooltip=null,this.rootFolderId="-root-",this.success=new o.EventEmitter,this.error=new o.EventEmitter,this.createFolder=new o.EventEmitter,this.permissionEvent=new o.EventEmitter,this.hasPermission=!1,this.permissionValue=new s.Subject}ngOnInit(){this.permissionValue.subscribe(e=>{this.hasPermission=e})}ngOnChanges(e){let t=e.rootFolderId;t&&t.currentValue&&this.checkPermission()}isButtonDisabled(){return this.isForceDisable()||this.isDisableWithNoPermission()}isForceDisable(){return!!this.disabled||void 0}isDisableWithNoPermission(){return!(this.hasPermission||!this.disableWithNoPermission)||void 0}onFilesAdded(e){let t=r.FileUtils.toFileArray(e.currentTarget.files);this.hasPermission?this.uploadFiles(t):this.permissionEvent.emit(new a.a({type:"content",action:"upload",permission:"create"})),e.target.value=""}onDirectoryAdded(e){if(this.hasPermission){let t=r.FileUtils.toFileArray(e.currentTarget.files);this.uploadFiles(t)}else this.permissionEvent.emit(new a.a({type:"content",action:"upload",permission:"create"}));e.target.value=""}uploadFiles(e){const t=e.map(this.createFileModel.bind(this)).filter(this.isFileAcceptable.bind(this)).filter(this.isFileSizeAcceptable.bind(this));t.length>0&&(this.uploadService.addToQueue(...t),this.uploadService.uploadFilesInTheQueue(this.success),this.showNotificationBar&&this.showUndoNotificationBar(t))}createFileModel(e){return new r.FileModel(e,{newVersion:this.versioning,parentId:this.rootFolderId,path:(e.webkitRelativePath||"").replace(/\/[^\/]*$/,"")})}isFileAcceptable(e){if("*"===this.acceptedFilesType)return!0;return-1!==this.acceptedFilesType.split(",").map(e=>e.replace(/^\./,"")).indexOf(e.extension)}isFileSizeAcceptable(e){let t=!0;return void 0!==this.maxFilesSize&&null!==this.maxFilesSize&&(this.maxFilesSize<=0||e.size>this.maxFilesSize)&&(t=!1,this.translateService.get("FILE_UPLOAD.MESSAGES.EXCEED_MAX_FILE_SIZE",{fileName:e.name}).subscribe(e=>{this.error.emit(e)})),t}showUndoNotificationBar(e){let t,n;t=this.translateService.get("FILE_UPLOAD.MESSAGES.PROGRESS"),n=this.translateService.get("FILE_UPLOAD.ACTION.UNDO"),this.notificationService.openSnackMessageAction(t.value,n.value,3e3).onAction().subscribe(()=>{this.uploadService.cancelUpload(...e)})}checkPermission(){this.rootFolderId&&this.getFolderNode(this.rootFolderId).subscribe(e=>this.permissionValue.next(this.hasCreatePermission(e)),e=>this.error.emit(e))}getFolderNode(e){return s.Observable.fromPromise(this.apiService.getInstance().nodes.getNodeInfo(e,{includeSource:!0,include:["allowableOperations"]})).catch(e=>this.handleError(e))}handleError(e){return this.logService.error(e),s.Observable.throw(e||"Server error")}hasCreatePermission(e){return!(!e||!e.allowableOperations)&&!!e.allowableOperations.find(e=>"create"===e)}};i.a([Object(o.Input)()],l.prototype,"showNotificationBar",void 0),i.a([Object(o.Input)()],l.prototype,"currentFolderPath",void 0),i.a([Object(o.Input)()],l.prototype,"disableWithNoPermission",void 0),i.a([Object(o.Input)()],l.prototype,"disabled",void 0),i.a([Object(o.Input)()],l.prototype,"uploadFolders",void 0),i.a([Object(o.Input)()],l.prototype,"multipleFiles",void 0),i.a([Object(o.Input)()],l.prototype,"versioning",void 0),i.a([Object(o.Input)()],l.prototype,"acceptedFilesType",void 0),i.a([Object(o.Input)()],l.prototype,"maxFilesSize",void 0),i.a([Object(o.Input)()],l.prototype,"staticTitle",void 0),i.a([Object(o.Input)()],l.prototype,"tooltip",void 0),i.a([Object(o.Input)()],l.prototype,"rootFolderId",void 0),i.a([Object(o.Output)()],l.prototype,"success",void 0),i.a([Object(o.Output)()],l.prototype,"error",void 0),i.a([Object(o.Output)()],l.prototype,"createFolder",void 0),i.a([Object(o.Output)()],l.prototype,"permissionEvent",void 0),l=c=i.a([Object(o.Component)({selector:"adf-upload-button",template:n(244),styles:[n(245)],providers:[{provide:r.EXTENDIBLE_COMPONENT,useExisting:Object(o.forwardRef)(()=>c)}],encapsulation:o.ViewEncapsulation.None})],l);var c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"FileUploadingDialogComponent",function(){return l});var i=n(1),o=n(0),r=(n.n(o),n(3)),s=(n.n(r),n(2)),a=(n.n(s),n(47));n.n(a);let l=class{constructor(e,t){this.uploadService=e,this.changeDetecor=t,this.position="right",this.filesUploadingList=[],this.isDialogActive=!1,this.totalCompleted=0,this.totalErrors=0,this.isDialogMinimized=!1,this.isConfirmation=!1}ngOnInit(){this.listSubscription=this.uploadService.queueChanged.subscribe(e=>{this.filesUploadingList=e,this.filesUploadingList.length&&(this.isDialogActive=!0)}),this.counterSubscription=s.Observable.merge(this.uploadService.fileUploadComplete,this.uploadService.fileUploadDeleted).subscribe(e=>{this.totalCompleted=e.totalComplete,this.changeDetecor.detectChanges()}),this.errorSubscription=this.uploadService.fileUploadError.subscribe(e=>{this.totalErrors=e.totalError,this.changeDetecor.detectChanges()}),this.fileUploadSubscription=this.uploadService.fileUpload.subscribe(()=>{this.changeDetecor.detectChanges()}),this.uploadService.fileDeleted.subscribe(e=>{if(this.filesUploadingList){let t=this.filesUploadingList.find(t=>t.data.entry.id===e);t&&(t.status=r.FileUploadStatus.Cancelled,this.changeDetecor.detectChanges())}})}toggleConfirmation(){this.isConfirmation=!this.isConfirmation,this.isDialogMinimized&&(this.isDialogMinimized=!1)}cancelAllUploads(){this.toggleConfirmation(),this.uploadList.cancelAllFiles()}toggleMinimized(){this.isDialogMinimized=!this.isDialogMinimized,this.changeDetecor.detectChanges()}close(){this.isConfirmation=!1,this.totalCompleted=0,this.totalErrors=0,this.filesUploadingList=[],this.isDialogActive=!1,this.isDialogMinimized=!1,this.uploadService.clearQueue(),this.changeDetecor.detectChanges()}ngOnDestroy(){this.uploadService.clearQueue(),this.listSubscription.unsubscribe(),this.counterSubscription.unsubscribe(),this.fileUploadSubscription.unsubscribe(),this.errorSubscription.unsubscribe()}};i.a([Object(o.ViewChild)(a.FileUploadingListComponent)],l.prototype,"uploadList",void 0),i.a([Object(o.Input)()],l.prototype,"position",void 0),l=i.a([Object(o.Component)({selector:"adf-file-uploading-dialog, file-uploading-dialog",template:n(250),styles:[n(251)]})],l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"UploadDragAreaComponent",function(){return s});var i=n(1),o=n(0),r=(n.n(o),n(3));n.n(r);let s=a=class{constructor(e,t,n){this.uploadService=e,this.translateService=t,this.notificationService=n,this.showNotificationBar=!0,this.currentFolderPath="/",this.rootFolderId="-root-",this.disabled=!1,this.versioning=!1,this.success=new o.EventEmitter}set enabled(e){console.warn("Deprecated: enabled input property should not be used for UploadDragAreaComponent. Please use disabled instead."),this.disabled=!e}get enabled(){return console.warn("Deprecated: enabled input property should not be used for UploadDragAreaComponent. Please use disabled instead."),!this.disabled}onFilesDropped(e){if(!this.disabled&&e.length){const t=e.map(e=>new r.FileModel(e,{newVersion:this.versioning,path:"/",parentId:this.parentId||this.rootFolderId}));this.uploadService.addToQueue(...t),this.uploadService.uploadFilesInTheQueue(this.success);let n=this.uploadService.getQueue();this.showNotificationBar&&this.showUndoNotificationBar(n)}}onFilesEntityDropped(e){this.disabled||(e.file(t=>{const n=new r.FileModel(t,{newVersion:this.versioning,parentId:this.parentId||this.rootFolderId,path:e.fullPath.replace(e.name,"")});this.uploadService.addToQueue(n),this.uploadService.uploadFilesInTheQueue(this.success)}),this.showNotificationBar&&this.showUndoNotificationBar(e))}onFolderEntityDropped(e){!this.disabled&&e.isDirectory&&r.FileUtils.flattern(e).then(e=>{let t=e.map(e=>new r.FileModel(e.file,{newVersion:this.versioning,parentId:this.parentId||this.rootFolderId,path:e.relativeFolder}));if(this.uploadService.addToQueue(...t),this.showNotificationBar){let e=this.uploadService.getQueue();this.showUndoNotificationBar(e)}this.uploadService.uploadFilesInTheQueue(this.success)})}showUndoNotificationBar(e){let t,n;t=this.translateService.get("FILE_UPLOAD.MESSAGES.PROGRESS"),n=this.translateService.get("FILE_UPLOAD.ACTION.UNDO"),this.notificationService.openSnackMessageAction(t.value,n.value,3e3).onAction().subscribe(()=>{this.uploadService.cancelUpload(...e)})}showErrorNotificationBar(e){this.notificationService.openSnackMessage(e,3e3)}isDroppable(){return!this.disabled}onUploadFiles(e){e.stopPropagation(),e.preventDefault();if(this.hasCreatePermission(e.detail.data.obj.entry)){let t=e.detail.files;if(t&&t.length>0){let n=this.parentId||this.rootFolderId;e.detail.data&&e.detail.data.obj.entry.isFolder&&(n=e.detail.data.obj.entry.id||this.parentId||this.rootFolderId);const i=t.map(e=>new r.FileModel(e.file,{newVersion:this.versioning,path:e.relativeFolder,parentId:n}));this.uploadFiles(i)}}}uploadFiles(e){if(e.length){this.uploadService.addToQueue(...e),this.uploadService.uploadFilesInTheQueue(this.success);let t=this.uploadService.getQueue();this.showNotificationBar&&this.showUndoNotificationBar(t)}}hasCreatePermission(e){let t=!1;if(e&&e.allowableOperations){t=!!e.allowableOperations.find(e=>"create"===e)}return t}};i.a([Object(o.Input)()],s.prototype,"enabled",null),i.a([Object(o.Input)()],s.prototype,"showNotificationBar",void 0),i.a([Object(o.Input)()],s.prototype,"currentFolderPath",void 0),i.a([Object(o.Input)()],s.prototype,"rootFolderId",void 0),i.a([Object(o.Input)()],s.prototype,"disabled",void 0),i.a([Object(o.Input)()],s.prototype,"versioning",void 0),i.a([Object(o.Input)()],s.prototype,"parentId",void 0),i.a([Object(o.Output)()],s.prototype,"success",void 0),s=a=i.a([Object(o.Component)({selector:"adf-upload-drag-area",template:n(253),styles:[n(254)],providers:[{provide:r.EXTENDIBLE_COMPONENT,useExisting:Object(o.forwardRef)(()=>a)}],encapsulation:o.ViewEncapsulation.None})],s);var a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"FileUploadingListRowComponent",function(){return s});var i=n(1),o=n(0),r=(n.n(o),n(3));n.n(r);let s=class{constructor(){this.cancel=new o.EventEmitter,this.remove=new o.EventEmitter,this.FileUploadStatus=r.FileUploadStatus}onCancel(e){this.cancel.emit(e)}onRemove(e){this.remove.emit(e)}};i.a([Object(o.Input)()],s.prototype,"file",void 0),i.a([Object(o.Output)()],s.prototype,"cancel",void 0),i.a([Object(o.Output)()],s.prototype,"remove",void 0),s=i.a([Object(o.Component)({selector:"adf-file-uploading-list-row",template:n(256),styles:[n(257)]})],s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"FileDraggableDirective",function(){return s});var i=n(1),o=n(0),r=(n.n(o),n(3));n.n(r);let s=class{constructor(e,t){this.ngZone=t,this.enabled=!0,this.filesDropped=new o.EventEmitter,this.filesEntityDropped=new o.EventEmitter,this.folderEntityDropped=new o.EventEmitter,this.cssClassName="file-draggable__input-focus",this.element=e.nativeElement}ngOnInit(){this.ngZone.runOutsideAngular(()=>{this.element.addEventListener("dragenter",this.onDragEnter.bind(this)),this.element.addEventListener("dragover",this.onDragOver.bind(this)),this.element.addEventListener("dragleave",this.onDragLeave.bind(this)),this.element.addEventListener("drop",this.onDropFiles.bind(this))})}ngOnDestroy(){this.element.removeEventListener("dragenter",this.onDragEnter),this.element.removeEventListener("dragover",this.onDragOver),this.element.removeEventListener("dragleave",this.onDragLeave),this.element.removeEventListener("drop",this.onDropFiles)}onDropFiles(e){if(this.enabled&&!e.defaultPrevented){this.preventDefault(e);let t=e.dataTransfer.items;if(t)for(let n=0;n<t.length;n++)if(void 0!==t[n].webkitGetAsEntry){let e=t[n].webkitGetAsEntry();e&&(e.isFile?this.filesEntityDropped.emit(e):e.isDirectory&&this.folderEntityDropped.emit(e))}else{let t=r.FileUtils.toFileArray(e.dataTransfer.files);this.filesDropped.emit(t)}else{let t=r.FileUtils.toFileArray(e.dataTransfer.files);this.filesDropped.emit(t)}this.element.classList.remove(this.cssClassName)}}onDragEnter(e){this.enabled&&!e.defaultPrevented&&(this.preventDefault(e),this.element.classList.add(this.cssClassName))}onDragLeave(e){this.enabled&&!e.defaultPrevented&&(this.preventDefault(e),this.element.classList.remove(this.cssClassName))}onDragOver(e){this.enabled&&!e.defaultPrevented&&(this.preventDefault(e),this.element.classList.add(this.cssClassName))}preventDefault(e){e.stopPropagation(),e.preventDefault()}};i.a([Object(o.Input)("file-draggable")],s.prototype,"enabled",void 0),i.a([Object(o.Output)()],s.prototype,"filesDropped",void 0),i.a([Object(o.Output)()],s.prototype,"filesEntityDropped",void 0),i.a([Object(o.Output)()],s.prototype,"folderEntityDropped",void 0),s=i.a([Object(o.Directive)({selector:"[file-draggable]"})],s)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(195);for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o);var r=n(204);for(var o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o);var s=n(216);for(var o in s)"default"!==o&&function(e){n.d(t,e,function(){return s[e]})}(o);var a=n(220);n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);var l=n(222);for(var o in l)"default"!==o&&function(e){n.d(t,e,function(){return l[e]})}(o);var c=n(80);for(var o in c)"default"!==o&&function(e){n.d(t,e,function(){return c[e]})}(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(196);for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(63);n.d(t,"RatingComponent",function(){return i.a});var o=n(64);n.n(o);for(var r in o)["RatingComponent","default"].indexOf(r)<0&&function(e){n.d(t,e,function(){return o[e]})}(r);var s=n(203);n.d(t,"SocialModule",function(){return s.a})},function(e,t,n){var i=n(198);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=".adf-rating-container {\n  overflow: hidden;\n  width: 100%; }\n  .adf-rating-container .adf-rating-star {\n    float: left;\n    transition: all .3s;\n    padding: 1px;\n    cursor: pointer; }\n    .adf-rating-container .adf-rating-star .mat-list-item-content {\n      padding: 0 2px !important; }\n  .adf-rating-container .adf-colored-star {\n    color: #ffe944; }\n  .adf-rating-container .adf-grey-star {\n    color: #808080; }\n  .adf-rating-container .adf-stars-container {\n    padding: 0 !important;\n    margin: 0 !important;\n    display: inline-block; }\n  .adf-rating-container .adf-rating-star:hover {\n    transform: rotate(13deg) scale(1.2); }\n"},function(e,t){e.exports='<mat-list id="adf-rating-container" class="adf-rating-container">\n    <mat-list-item class="adf-rating-star" *ngFor="let currentRate of stars; let idx = index">\n            <span id="adf-rate-{{idx}}">\n                <mat-icon id="adf-grey-star-{{idx}}" *ngIf="currentRate.fill" class="adf-colored-star"\n                         (click)="updateVote(idx + 1)">star_rate\n                </mat-icon>\n                <mat-icon id="adf-colored-star-{{idx}}" *ngIf="!currentRate.fill" class="adf-grey-star"\n                         (click)="updateVote(idx + 1)">star_border\n                </mat-icon>\n            </span>\n    </mat-list-item>\n</mat-list>\n'},function(e,t,n){var i=n(201);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=".adf-like-container {\n  overflow: hidden;\n  width: 100%; }\n  .adf-like-container .adf-like {\n    padding: 5px;\n    cursor: pointer;\n    float: left;\n    margin: 5px 0px 5px 5px; }\n  .adf-like-container .adf-like-select {\n    cursor: pointer;\n    color: #2196f3; }\n  .adf-like-container .adf-like-select:hover {\n    cursor: pointer;\n    color: #808080; }\n  .adf-like-container .adf-like-grey {\n    cursor: pointer;\n    color: #808080; }\n  .adf-like-container .adf-like-grey:hover {\n    cursor: pointer;\n    color: #2196f3; }\n  .adf-like-container .adf-like-counter {\n    float: left;\n    padding: 13px 0 0 0; }\n  .adf-like-container .adf-left {\n    float: left;\n    padding: 13px 0 0 4px; }\n"},function(e,t){e.exports='<div id="adf-like-container" class="adf-like-container">\n    <div class="adf-like">\n        <span id="adf-like-{{nodeId}}" [ngClass]="{\'adf-like-select\': isLike ,\'adf-like-grey\': !isLike  }"\n              (click)="likeClick()">\n            <mat-icon>thumb_up</mat-icon>\n        </span>\n    </div>\n    <div id="adf-like-counter" class="adf-like-counter">{{likesCounter}}</div>\n    <div class="adf-left" *ngIf="likesCounter<=1">Like</div>\n    <div class="adf-left" *ngIf="likesCounter>1">Likes</div>\n</div>\n'},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n(1),o=n(0),r=(n.n(o),n(3)),s=(n.n(r),n(20)),a=(n.n(s),n(27)),l=(n.n(a),n(64)),c=(n.n(l),n(63));let d=class{};d=i.a([Object(o.NgModule)({imports:[r.CoreModule,s.MaterialModule],exports:[c.a,l.LikeComponent],declarations:[c.a,l.LikeComponent],providers:[a.RatingService]})],d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(205);n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o)},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(65)),i(n(66)),i(n(67)),i(n(215))},function(e,t){e.exports='<mat-list>\n    <mat-list-item *ngFor="let currentEntry of tagsEntries; let idx = index">\n        <div class="adf-tag-actions-container" id="tag_delete_{{idx}}" (click)="removeTag(currentEntry.entry.id)">\n            <div class="adf-tag-actions-delete-text" id="tag_name_{{idx}}">\n                {{currentEntry.entry.tag}}\n            </div>\n            <mat-icon class="adf-tag-actions-delete-icon">delete</mat-icon>\n        </div>\n    </mat-list-item>\n</mat-list>\n<table class="adf-full-width" cellspacing="0">\n    <tr>\n        <td>\n            <mat-form-field class="adf-full-width">\n                <input matInput placeholder="{{\'TAG.LABEL.NEWTAG\' | translate }}"\n                       type="text"\n                       (keypress)="cleanErrorMsg()"\n                       [(ngModel)]="newTagName"\n                       id="new-tag-text"/>\n                <mat-hint *ngIf="error" [ngStyle]="{\'color\': \'red\'}" align="start">{{errorMsg}}</mat-hint>\n            </mat-form-field>\n        </td>\n        <td>\n            <button class="adf-full-width" color="primary" id="add-tag" (click)="addTag()" [disabled]="disableAddTag"\n                    mat-raised-button>\n                {{\'TAG.BUTTON.ADD\' | translate }}\n            </button>\n        </td>\n    </tr>\n</table>\n'},function(e,t,n){var i=n(208);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=".adf-full-width {\n  width: 100%; }\n\n.adf-tag-actions-delete-icon {\n  float: right;\n  cursor: pointer; }\n\n.adf-tag-actions-delete-text {\n  font-size: 16px;\n  float: left; }\n\n.adf-tag-actions-container {\n  padding: 8px 0 8px 0;\n  height: 20px; }\n"},function(e,t){e.exports='<mat-list>\n    <mat-list-item *ngFor="let currentEntry of tagsEntries; let idx = index">\n        <div class="adf-list-tag" id="tag_name_{{idx}}">{{currentEntry.entry.tag}}</div>\n    </mat-list-item>\n</mat-list>\n'},function(e,t,n){var i=n(211);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=".adf-list-tag {\n  padding: 16px;\n  font-size: 16px; }\n"},function(e,t){e.exports='<mat-chip-list>\n    <mat-chip class="adf-tag-chips adf-primary-background-color" *ngFor="let currentEntry of tagsEntries; let idx = index">\n        <span id="tag_name_{{idx}}">{{currentEntry.entry.tag}}</span>\n        <button class="adf-tag-chips-delete" id="tag_delete_{{idx}}" type="button" (click)="removeTag(currentEntry.entry.id)">\n            <mat-icon class="adf-tag-chips-delete-icon adf-primary-contrast-text-color" matChipRemove>cancel</mat-icon>\n        </button>\n    </mat-chip>\n</mat-chip-list>\n'},function(e,t,n){var i=n(214);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=".adf-tag-chips-delete {\n  overflow: visible;\n  cursor: pointer;\n  height: 17px;\n  width: 20px;\n  float: right;\n  border: 0;\n  background: none;\n  padding: 0;\n  margin: -1px 0px 0px 10px; }\n\n.adf-tag-chips-delete-icon {\n  font-size: 20px;\n  background-repeat: no-repeat;\n  display: inline-block;\n  fill: currentColor;\n  height: 20px;\n  width: 20px; }\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"TagModule",function(){return u});var i=n(1),o=n(0),r=(n.n(o),n(3)),s=(n.n(r),n(20)),a=(n.n(s),n(28)),l=n(65),c=n(66),d=(n.n(c),n(67));n.n(d);let u=class{};u=i.a([Object(o.NgModule)({imports:[r.CoreModule,s.MaterialModule],exports:[l.TagActionsComponent,c.TagListComponent,d.TagNodeListComponent],declarations:[l.TagActionsComponent,c.TagListComponent,d.TagNodeListComponent],providers:[a.TagService,{provide:r.TRANSLATION_PROVIDER,multi:!0,useValue:{name:"ng2-alfresco-tag",source:"assets/ng2-alfresco-tag"}}]})],u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(217);for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(68);n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o);var r=n(219);n.d(t,"WebScriptModule",function(){return r.a})},function(e,t){e.exports='<div *ngIf="showData">\n    <div *ngIf="contentType === \'JSON\'" id="webscript-data-JSON">{{data | json}}</div>\n    <div *ngIf="contentType === \'HTML\'" id="webscript-data-HTML" [innerHTML]="data"></div>\n    <div *ngIf="contentType === \'TEXT\'" id="webscript-data-TEXT">{{data}}</div>\n    <div *ngIf="isDataTableContent()">\n        <adf-datatable id="webscript-datatable-wrapper" [data]="data"></adf-datatable>\n        <div>\n            <div *ngIf="showError" id="error">{{\'WEBSCRIPT.ERROR\' | translate: {\n                data: data,\n                contentType: contentType\n                }\n                }}\n            </div>\n        </div>\n    </div>\n</div>\n'},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(1),o=n(0),r=(n.n(o),n(3)),s=(n.n(r),n(11)),a=(n.n(s),n(20)),l=(n.n(a),n(68));n.n(l);let c=class{};c=i.a([Object(o.NgModule)({imports:[r.CoreModule,a.MaterialModule,s.DataTableModule],exports:[l.WebscriptComponent],declarations:[l.WebscriptComponent],providers:[{provide:r.TRANSLATION_PROVIDER,multi:!0,useValue:{name:"ng2-alfresco-webscript",source:"assets/ng2-alfresco-webscript"}}]})],c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(221))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(27);n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o);var r=n(28);n.d(t,"TagService",function(){return r.TagService})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(223);for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(21);n.d(t,"PaginationStrategy",function(){return i.PaginationStrategy}),n.d(t,"DocumentListComponent",function(){return i.DocumentListComponent});var o=n(71);n.n(o);for(var r in o)["PaginationStrategy","DocumentListComponent","default"].indexOf(r)<0&&function(e){n.d(t,e,function(){return o[e]})}(r);var s=n(72);n.d(t,"ContentColumnComponent",function(){return s.a});var a=n(73);n.d(t,"ContentColumnListComponent",function(){return a.a});var l=n(74);n.d(t,"ContentActionComponent",function(){return l.a});var c=n(75);n.n(c);for(var r in c)["PaginationStrategy","DocumentListComponent","ContentColumnComponent","ContentColumnListComponent","ContentActionComponent","default"].indexOf(r)<0&&function(e){n.d(t,e,function(){return c[e]})}(r);var d=n(44);n.d(t,"ContentNodeSelectorComponent",function(){return d.ContentNodeSelectorComponent});var u=n(76);n.d(t,"EmptyFolderContentDirective",function(){return u.a});var p=n(77);n.d(t,"NoPermissionContentDirective",function(){return p.a});var h=n(45);n.n(h);for(var r in h)["PaginationStrategy","DocumentListComponent","ContentColumnComponent","ContentColumnListComponent","ContentActionComponent","ContentNodeSelectorComponent","EmptyFolderContentDirective","NoPermissionContentDirective","default"].indexOf(r)<0&&function(e){n.d(t,e,function(){return h[e]})}(r);var f=n(78);n.d(t,"DropdownSitesComponent",function(){return f.a});var m=n(69);n.d(t,"ShareDataTableAdapter",function(){return m.a});var g=n(70);n.d(t,"ShareDataRow",function(){return g.a});var v=n(43);n.d(t,"FolderActionsService",function(){return v.a});var b=n(42);n.d(t,"DocumentActionsService",function(){return b.a});var y=n(46);n.d(t,"DocumentListService",function(){return y.DocumentListService});var S=n(79);n.n(S);for(var r in S)["PaginationStrategy","DocumentListComponent","ContentColumnComponent","ContentColumnListComponent","ContentActionComponent","ContentNodeSelectorComponent","EmptyFolderContentDirective","NoPermissionContentDirective","DropdownSitesComponent","ShareDataTableAdapter","ShareDataRow","FolderActionsService","DocumentActionsService","DocumentListService","default"].indexOf(r)<0&&function(e){n.d(t,e,function(){return S[e]})}(r);var O=n(41);n.d(t,"ContentActionModel",function(){return O.a}),n.d(t,"DocumentActionModel",function(){return O.b}),n.d(t,"FolderActionModel",function(){return O.c});var C=n(239);n.d(t,"NodePaging",function(){return C.d}),n.d(t,"NodePagingList",function(){return C.e}),n.d(t,"NodeMinimalEntry",function(){return C.c}),n.d(t,"Pagination",function(){return C.f}),n.d(t,"NodeMinimal",function(){return C.b}),n.d(t,"UserInfo",function(){return C.i}),n.d(t,"ContentInfo",function(){return C.a}),n.d(t,"PathInfoEntity",function(){return C.h}),n.d(t,"PathElementEntity",function(){return C.g});var E=n(29);n.d(t,"PermissionModel",function(){return E.a});var I=n(240);n.n(I);for(var r in I)["PaginationStrategy","DocumentListComponent","ContentColumnComponent","ContentColumnListComponent","ContentActionComponent","ContentNodeSelectorComponent","EmptyFolderContentDirective","NoPermissionContentDirective","DropdownSitesComponent","ShareDataTableAdapter","ShareDataRow","FolderActionsService","DocumentActionsService","DocumentListService","ContentActionModel","DocumentActionModel","FolderActionModel","NodePaging","NodePagingList","NodeMinimalEntry","Pagination","NodeMinimal","UserInfo","ContentInfo","PathInfoEntity","PathElementEntity","PermissionModel","default"].indexOf(r)<0&&function(e){n.d(t,e,function(){return I[e]})}(r);var A=n(241);n.d(t,"DocumentListModule",function(){return A.a})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.presetsDefaultModel={"-trashcan-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"path",type:"location",title:"ADF-DOCUMENT-LIST.LAYOUT.LOCATION",format:this.locationFormat,sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"archivedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.DELETED_ON",format:"timeAgo",sortable:!0},{key:"archivedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.DELETED_BY",sortable:!0}],"-sites-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"title",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"visibility",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.STATUS",sortable:!0}],"-mysites-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"title",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"visibility",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.STATUS",sortable:!0}],"-favorites-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"path",type:"location",title:"ADF-DOCUMENT-LIST.LAYOUT.LOCATION",format:this.locationFormat,sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"modifiedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON",format:"timeAgo",sortable:!0},{key:"modifiedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_BY",sortable:!0}],"-recent-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"path",type:"location",title:"ADF-DOCUMENT-LIST.LAYOUT.LOCATION",cssClass:"ellipsis-cell",format:this.locationFormat,sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"modifiedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON",format:"timeAgo",sortable:!0}],"-sharedlinks-":[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"path",type:"location",title:"ADF-DOCUMENT-LIST.LAYOUT.LOCATION",cssClass:"ellipsis-cell",format:this.locationFormat,sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"modifiedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON",format:"timeAgo",sortable:!0},{key:"modifiedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_BY",sortable:!0},{key:"sharedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.SHARED_BY",sortable:!0}],default:[{key:"$thumbnail",type:"image",srTitle:"ADF-DOCUMENT-LIST.LAYOUT.THUMBNAIL",sortable:!1},{key:"name",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.NAME",cssClass:"full-width ellipsis-cell",sortable:!0},{key:"content.sizeInBytes",type:"fileSize",title:"ADF-DOCUMENT-LIST.LAYOUT.SIZE",sortable:!0},{key:"modifiedAt",type:"date",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_ON",format:"timeAgo",sortable:!0},{key:"modifiedByUser.displayName",type:"text",title:"ADF-DOCUMENT-LIST.LAYOUT.MODIFIED_BY",sortable:!0}]}},function(e,t,n){e.exports=n.p+"content-services/document-list/assets/images/empty_doc_lib.a89c064e4edfa54d2e347bf594947219.svg"},function(e,t,n){var i=n(227);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=""},function(e,t){e.exports='<adf-datatable\n    [selectionMode]="selectionMode"\n    [data]="data"\n    [actions]="contentActions"\n    [actionsPosition]="contentActionsPosition"\n    [multiselect]="multiselect"\n    [allowDropFiles]="allowDropFiles"\n    [contextMenu]="contextMenuActions"\n    [rowStyle]="rowStyle"\n    [rowStyleClass]="rowStyleClass"\n    [loading]="loading"\n    [noPermission]="noPermission"\n    [showHeader]="!isEmpty()"\n    (showRowContextMenu)="onShowRowContextMenu($event)"\n    (showRowActionsMenu)="onShowRowActionsMenu($event)"\n    (executeRowAction)="onExecuteRowAction($event)"\n    (rowClick)="onNodeClick($event.value?.node)"\n    (rowDblClick)="onNodeDblClick($event.value?.node)"\n    (row-select)="onNodeSelect($event.detail)"\n    (row-unselect)="onNodeUnselect($event.detail)">\n\n    <div *ngIf="!isEmptyTemplateDefined()">\n        <no-content-template>\n            <ng-template>\n                <adf-empty-list>\n                    <div class="adf-empty-list_template adf-empty-folder">\n                        <div class="adf-empty-folder-this-space-is-empty">{{\'ADF-DOCUMENT-LIST.EMPTY.HEADER\' | translate}}</div>\n                        <div fxHide.lt-md="true" class="adf-empty-folder-drag-drop">{{ \'ADF-DATATABLE.EMPTY.DRAG-AND-DROP.TITLE\' | translate }}</div>\n                        <div fxHide.lt-md="true" class="adf-empty-folder-any-files-here-to-add">{{ \'ADF-DATATABLE.EMPTY.DRAG-AND-DROP.SUBTITLE\' | translate }}</div>\n                        <img class="adf-empty-folder-image" [src]="emptyFolderImageUrl">\n                    </div>\n                    \x3c!-- <div adf-empty-list-header class="adf-empty-list-header"> {{\'ADF-DOCUMENT-LIST.EMPTY.HEADER\' | translate}} </div> --\x3e\n                </adf-empty-list>\n            </ng-template>\n        </no-content-template>\n    </div>\n\n    <div *ngIf="!isNoPermissionTemplateDefined()">\n        <no-permission-template>\n            <ng-template>\n                <div class="adf-no-permission__template">\n                    <mat-icon>ic_error</mat-icon>\n                    <p class="adf-no-permission__template--text">{{ \'ADF-DOCUMENT-LIST.NO_PERMISSION\' | translate }}</p>\n                </div>\n            </ng-template>\n        </no-permission-template>\n    </div>\n\n    <div>\n        <loading-content-template>\n            <ng-template>\n                <div class="adf-document-list-loading-container">\n                    <mat-progress-spinner\n                        id="adf-document-list-loading"\n                        class="adf-document-list-loading-margin"\n                        [color]="\'primary\'"\n                        [mode]="\'indeterminate\'">\n                    </mat-progress-spinner>\n                </div>\n            </ng-template>\n        </loading-content-template>\n    </div>\n</adf-datatable>\n\n<ng-container *ngIf="isPaginationEnabled()">\n    <adf-pagination\n        *ngIf="isPaginationNeeded()"\n        class="adf-documentlist-pagination"\n        (changePageSize)="onChangePageSize($event)"\n        (changePageNumber)="onChangePageNumber($event)"\n        (nextPage)="onNextPage($event)"\n        (prevPage)="onPrevPage($event)"\n        [pagination]="pagination"\n        [supportedPageSizes]="supportedPageSizes">\n    </adf-pagination>\n\n    <adf-infinite-pagination\n        *ngIf="!isPaginationNeeded()"\n        [pagination]="pagination"\n        [pageSize]="pageSize"\n        [loading]="infiniteLoading"\n        (loadMore)="loadNextBatch($event)">\n            {{ \'ADF-DOCUMENT-LIST.LAYOUT.LOAD_MORE\' | translate }}\n    </adf-infinite-pagination>\n</ng-container>\n'},function(e,t){e.exports=a},function(e,t,n){var i=n(231);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=""},function(e,t){e.exports='<header matDialogTitle\n    class="adf-content-node-selector-title"\n    data-automation-id="content-node-selector-title">{{title}}</header>\n\n<section matDialogContent\n    class="adf-content-node-selector-content"\n    (node-select)="onNodeSelect($event)">\n\n    <mat-form-field floatPlaceholder="never" class="adf-content-node-selector-content-input">\n        <input #searchInput\n            matInput\n            placeholder="Search"\n            (input)="search(searchInput.value)"\n            [value]="searchTerm"\n            data-automation-id="content-node-selector-search-input">\n\n        <mat-icon *ngIf="searchTerm.length > 0"\n                matSuffix (click)="clear()"\n                class="adf-content-node-selector-content-input-icon"\n                data-automation-id="content-node-selector-search-clear">clear</mat-icon>\n\n        <mat-icon *ngIf="searchTerm.length === 0"\n            matSuffix\n            class="adf-content-node-selector-content-input-icon"\n            data-automation-id="content-node-selector-search-icon">search</mat-icon>\n\n    </mat-form-field>\n\n    <adf-sites-dropdown\n        (change)="siteChanged($event)"\n        data-automation-id="content-node-selector-sites-combo"></adf-sites-dropdown>\n\n    <adf-toolbar>\n        <adf-toolbar-title>\n            <adf-dropdown-breadcrumb *ngIf="needBreadcrumbs()"\n                class="adf-content-node-selector-content-breadcrumb"\n                [target]="documentList"\n                [folderNode]="breadcrumbFolderNode"\n                data-automation-id="content-node-selector-content-breadcrumb">\n            </adf-dropdown-breadcrumb>\n        </adf-toolbar-title>\n    </adf-toolbar>\n\n    <div class="adf-content-node-selector-content-list" data-automation-id="content-node-selector-content-list">\n        <adf-document-list\n                    #documentList\n                    adf-highlight\n                    adf-highlight-selector=".cell-value adf-datatable-cell .adf-datatable-cell-value"\n                    [node]="nodes"\n                    [rowFilter]="rowFilter"\n                    [imageResolver]="imageResolver"\n                    [currentFolderId]="folderIdToShow"\n                    selectionMode="single"\n                    [contextMenuActions]="false"\n                    [contentActions]="false"\n                    [allowDropFiles]="false"\n                    [enablePagination]="!showingSearchResults"\n                    paginationStrategy="{{paginationStrategy}}"\n                    [pageSize]="pageSize"\n                    (folderChange)="onFolderChange()"\n                    (ready)="onFolderLoaded()"\n                    data-automation-id="content-node-selector-document-list">\n            <empty-folder-content>\n                <ng-template>\n                    <div>{{ \'NODE_SELECTOR.NO_RESULTS\' | translate }}</div>\n                </ng-template>\n            </empty-folder-content>\n        </adf-document-list>\n\n        <adf-infinite-pagination\n            *ngIf="showingSearchResults && isSearchTermLongEnough()"\n            [pagination]="pagination"\n            [pageSize]="pageSize"\n            [loading]="loadingSearchResults"\n            (loadMore)="getNextPageOfSearch($event)"\n            data-automation-id="content-node-selector-search-pagination">\n            {{ \'ADF-DOCUMENT-LIST.LAYOUT.LOAD_MORE\' | translate }}\n        </adf-infinite-pagination>\n    </div>\n\n</section>\n\n<footer matDialogActions class="adf-content-node-selector-actions">\n\n    <button *ngIf="inDialog"\n        mat-button\n        class="adf-content-node-selector-actions-cancel"\n        (click)="close()"\n        data-automation-id="content-node-selector-actions-cancel">{{ \'NODE_SELECTOR.CANCEL\' | translate }}\n    </button>\n\n    <button mat-button\n        [disabled]="!chosenNode"\n        class="adf-content-node-selector-actions-choose"\n        (click)="choose()"\n        data-automation-id="content-node-selector-actions-choose">{{ \'NODE_SELECTOR.CHOOSE\' | translate }}\n    </button>\n\n</footer>\n'},function(e,t){e.exports='<div *ngIf="folderNode" data-automation-id="breadcrumb" class="adf-breadcrumb-container">\n    <li *ngFor="let item of route; let last = last"\n        [class.active]="last"\n        [ngSwitch]="last"\n        title="{{ item.name | translate }}"\n        class="adf-breadcrumb-item">\n\n        <a *ngSwitchDefault href="#" [attr.data-automation-id]="\'breadcrumb_\' + item.name"\n           class="adf-breadcrumb-item-anchor"\n           (click)="onRoutePathClick(item, $event)">\n            {{ item.name | translate }}\n        </a>\n\n        <div *ngSwitchCase="true" class="adf-breadcrumb-item-current">\n            {{ item.name | translate }}\n        </div>\n\n        <mat-icon class="adf-breadcrumb-item-chevron" *ngIf="!last">\n            chevron_right\n        </mat-icon>\n    </li>\n</div>\n<div *ngIf="!folderNode && hasRoot">\n    <li class="adf-breadcrumb-item">\n        <div class="adf-breadcrumb-item-current">\n            {{ root | translate }}\n        </div>\n    </li>\n</div>\n'},function(e,t,n){var i=n(235);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=""},function(e,t,n){var i=n(237);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=""},function(e,t){e.exports='<div id="site-dropdown-container" class="adf-site-dropdown-container">\n    <mat-form-field>\n        <mat-select\n            class="adf-site-dropdown-list-element"\n            id="site-dropdown"\n            placeholder="{{\'DROPDOWN.PLACEHOLDER_LABEL\' | translate}}"\n            floatPlaceholder="never"\n            data-automation-id="site-my-files-select"\n            [(ngModel)]="siteSelected"\n            (ngModelChange)="selectedSite()">\n            <mat-option *ngIf="!hideMyFiles" data-automation-id="site-my-files-option" id="default_site_option" [value]="MY_FILES_VALUE">{{\'DROPDOWN.MY_FILES_OPTION\' | translate}}</mat-option>\n            <mat-option *ngFor="let site of siteList" [value]="site.guid">\n                {{ site.title }}\n            </mat-option>\n        </mat-select>\n    </mat-form-field>\n</div>\n'},function(e,t,n){"use strict";class i{}t.d=i;class o{}t.e=o;class r{}t.c=r;class s{}t.f=s;class a{constructor(){this.properties={}}}t.b=a;class l{}t.i=l;class c{}t.a=c;class d{}t.h=d;class u{}t.g=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!0),this.isFolder=!0,this.isFile=!0,this.css=e,this.permission=t,this.isFile=n,this.isFolder=i}}();t.PermissionStyleModel=i},function(e,t,n){"use strict";n.d(t,"a",function(){return L});var i=n(1),o=n(0),r=(n.n(o),n(242)),s=(n.n(r),n(20)),a=(n.n(s),n(3)),l=(n.n(a),n(11)),c=(n.n(l),n(80)),d=n(45),u=(n.n(d),n(260)),p=(n.n(u),n(75)),h=(n.n(p),n(74)),f=n(73),m=n(72),g=n(44),v=n(21),b=n(78),y=n(264),S=n(268),O=n(272),C=n(76),E=n(77),I=n(274),A=(n.n(I),n(42)),D=n(46),F=n(43),T=n(79);n.n(T);let L=class{};L=i.a([Object(o.NgModule)({imports:[a.CoreModule,l.DataTableModule,r.FlexLayoutModule,s.MaterialModule,c.UploadModule],declarations:[v.DocumentListComponent,m.a,f.a,h.a,p.ContentActionListComponent,C.a,E.a,d.BreadcrumbComponent,b.a,u.DropdownBreadcrumbComponent,g.ContentNodeSelectorComponent,y.a,O.a,S.a],providers:[D.DocumentListService,F.a,A.a,T.NodeActionsService,I.ContentNodeSelectorService,{provide:a.TRANSLATION_PROVIDER,multi:!0,useValue:{name:"ng2-alfresco-documentlist",source:"assets/ng2-alfresco-documentlist"}}],entryComponents:[g.ContentNodeSelectorComponent],exports:[v.DocumentListComponent,m.a,f.a,h.a,p.ContentActionListComponent,C.a,E.a,d.BreadcrumbComponent,b.a,u.DropdownBreadcrumbComponent,g.ContentNodeSelectorComponent,y.a,O.a,S.a]})],L)},function(e,t){e.exports=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(81);n.d(t,"UploadButtonComponent",function(){return i.UploadButtonComponent});var o=n(82);n.d(t,"FileUploadingDialogComponent",function(){return o.FileUploadingDialogComponent});var r=n(83);n.d(t,"UploadDragAreaComponent",function(){return r.UploadDragAreaComponent});var s=n(47);n.n(s);for(var a in s)["UploadButtonComponent","FileUploadingDialogComponent","UploadDragAreaComponent","default"].indexOf(a)<0&&function(e){n.d(t,e,function(){return s[e]})}(a);var l=n(84);n.d(t,"FileUploadingListRowComponent",function(){return l.FileUploadingListRowComponent});var c=n(85);n.d(t,"FileDraggableDirective",function(){return c.FileDraggableDirective});var d=n(259);n.n(d);for(var a in d)["UploadButtonComponent","FileUploadingDialogComponent","UploadDragAreaComponent","FileUploadingListRowComponent","FileDraggableDirective","default"].indexOf(a)<0&&function(e){n.d(t,e,function(){return d[e]})}(a)},function(e,t){e.exports='<form class="adf-upload-button-file-container">\n    \x3c!--Files Upload--\x3e\n    <a *ngIf="!uploadFolders"\n        [disabled]="isButtonDisabled()"\n        mat-raised-button color="primary">\n        <mat-icon>file_upload</mat-icon>\n\n        \x3c!--Multiple Files Upload--\x3e\n        <span *ngIf="multipleFiles">\n            <label\n                id="upload-multiple-file-label"\n                *ngIf="!staticTitle"\n                for="upload-multiple-files">{{ \'FILE_UPLOAD.BUTTON.UPLOAD_FILE\' | translate }}</label>\n            <label\n                id="upload-multiple-file-label-static"\n                *ngIf="staticTitle"\n                for="upload-multiple-files">{{ staticTitle }}</label>\n            <input #uploadFiles\n                id="upload-multiple-files"\n                data-automation-id="upload-multiple-files"\n                type="file"\n                name="uploadFiles"\n                multiple="multiple"\n                accept="{{acceptedFilesType}}"\n                [attr.disabled]="isButtonDisabled()"\n                [title]="tooltip"\n                (change)="onFilesAdded($event)">\n        </span>\n\n        \x3c!--Single Files Upload--\x3e\n        <span *ngIf="!multipleFiles">\n            <label\n                id="upload-single-file-label"\n                *ngIf="!staticTitle"\n                for="upload-single-file">{{ \'FILE_UPLOAD.BUTTON.UPLOAD_FILE\' | translate }}</label>\n            <label\n                id="upload-single-file-label-static"\n                *ngIf="staticTitle"\n                for="upload-single-file">{{ staticTitle }}</label>\n            <input #uploadFiles\n                id="upload-single-file"\n                data-automation-id="upload-single-file"\n                type="file"\n                name="uploadFiles"\n                accept="{{acceptedFilesType}}"\n                [attr.disabled]="isButtonDisabled()"\n                [title]="tooltip"\n                (change)="onFilesAdded($event)">\n        </span>\n    </a>\n\n    \x3c!--Folders Upload--\x3e\n    <a *ngIf="uploadFolders"\n        [disabled]="isButtonDisabled()" mat-raised-button color="primary">\n        <mat-icon>file_upload</mat-icon>\n        <label\n            id="uploadFolder-label"\n            *ngIf="!staticTitle"\n            for="uploadFolder">{{ \'FILE_UPLOAD.BUTTON.UPLOAD_FOLDER\' | translate }}</label>\n        <label\n            id="uploadFolder-label-static"\n            *ngIf="staticTitle"\n            for="uploadFolder">{{ staticTitle }}</label>\n        <input #uploadFolders\n            id="uploadFolder"\n            data-automation-id="uploadFolder"\n            type="file"\n            name="uploadFiles"\n            multiple="multiple"\n            accept="{{acceptedFilesType}}"\n            webkitdirectory directory\n            [attr.disabled]="isButtonDisabled()"\n            [title]="tooltip"\n            (change)="onDirectoryAdded($event)">\n    </a>\n</form>\n'},function(e,t,n){var i=n(246);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=".adf-upload-button-file-container input {\n  cursor: pointer;\n  height: 100%;\n  right: 0;\n  opacity: 0;\n  position: absolute;\n  top: 0;\n  width: 300px;\n  z-index: 4; }\n"},function(e,t){e.exports='<div class="upload-list">\n    <ng-template\n        ngFor\n        [ngForOf]="files"\n        [ngForTemplate]="template">\n    </ng-template>\n</div>\n'},function(e,t,n){var i=n(249);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=":host {\n  display: flex;\n  flex-direction: column; }\n"},function(e,t){e.exports='<div *ngIf="isDialogActive"\n     class="upload-dialog"\n     [class.upload-dialog--minimized]="isDialogMinimized"\n     [class.upload-dialog--position-left]="position === \'left\'"\n     [class.upload-dialog--position-right]="position === \'right\'">\n    <header class="upload-dialog__header">\n        <button\n            mat-button\n            color="secondary"\n            [disabled]="isConfirmation"\n            (click)="toggleMinimized()">\n            <mat-icon\n                mat-list-icon\n                title="{{ (isDialogMinimized ? \'ADF_FILE_UPLOAD.BUTTON.MAXIMIZE\': \'ADF_FILE_UPLOAD.BUTTON.MINIMIZE\') | translate }}">\n                    {{ isDialogMinimized ? \'keyboard_arrow_up\' : \'keyboard_arrow_down\' }}\n            </mat-icon>\n        </button>\n\n        <span\n            class="upload-dialog__title"\n            *ngIf="!uploadList.isUploadCompleted() && !uploadList.isUploadCancelled()">\n            {{ \'FILE_UPLOAD.MESSAGES.UPLOAD_PROGRESS\'\n                | translate: {\n                    completed: totalCompleted,\n                    total: filesUploadingList.length\n                }\n            }}\n        </span>\n\n        <span\n            class="upload-dialog__title"\n            *ngIf="uploadList.isUploadCompleted()">\n            {{ \'FILE_UPLOAD.MESSAGES.UPLOAD_COMPLETED\'\n                | translate: {\n                    completed: totalCompleted,\n                    total: filesUploadingList.length\n                }\n            }}\n        </span>\n\n        <span\n            class="upload-dialog__title"\n            *ngIf="uploadList.isUploadCancelled()">\n            {{ \'FILE_UPLOAD.MESSAGES.UPLOAD_CANCELED\' | translate }}\n        </span>\n    </header>\n\n    <section\n        class="upload-dialog__info"\n        *ngIf="totalErrors">\n        {{\n            (totalErrors > 1\n                 ? \'FILE_UPLOAD.MESSAGES.UPLOAD_ERRORS\'\n                 : \'FILE_UPLOAD.MESSAGES.UPLOAD_ERROR\')\n                 | translate: { total: totalErrors }\n        }}\n    </section>\n\n    <section\n        class="upload-dialog__content"\n        [class.upload-dialog--padding]="isConfirmation">\n        <adf-file-uploading-list\n            [class.upload-dialog--hide]="isConfirmation"\n            #uploadList\n            [files]="filesUploadingList">\n                <ng-template let-file="$implicit">\n                     <adf-file-uploading-list-row\n                        [file]="file"\n                        (remove)="uploadList.removeFile(file)"\n                        (cancel)="uploadList.cancelFile(file)">\n                    </adf-file-uploading-list-row>\n                </ng-template>\n        </adf-file-uploading-list>\n\n        <div\n            class="upload-dialog__confirmation"\n            [class.upload-dialog--hide]="!isConfirmation">\n                <p class="upload-dialog__confirmation--title">\n                    {{ \'ADF_FILE_UPLOAD.CONFIRMATION.MESSAGE.TITLE\' | translate }}\n                </p>\n\n                <p class="upload-dialog__confirmation--text">\n                    {{ \'ADF_FILE_UPLOAD.CONFIRMATION.MESSAGE.TEXT\' | translate }}\n                </p>\n        </div>\n    </section>\n\n    <footer\n        class="upload-dialog__actions"\n        [class.upload-dialog--hide]="isConfirmation">\n        <button\n            color="primary"\n            mat-button\n            *ngIf="!uploadList.isUploadCompleted() && !uploadList.isUploadCancelled()"\n            (click)="toggleConfirmation()">\n            {{ \'ADF_FILE_UPLOAD.BUTTON.CANCEL_ALL\' | translate }}\n        </button>\n\n        <button\n            *ngIf="uploadList.isUploadCompleted() || uploadList.isUploadCancelled()"\n            mat-button\n            color="primary"\n            (click)="close($event)">\n            {{ \'ADF_FILE_UPLOAD.BUTTON.CLOSE\' | translate }}\n        </button>\n    </footer>\n\n    <footer\n        class="upload-dialog__actions"\n        [class.upload-dialog--hide]="!isConfirmation">\n        <button\n            color="secondary"\n            mat-button\n            (click)="cancelAllUploads()">\n            {{ \'ADF_FILE_UPLOAD.CONFIRMATION.BUTTON.CANCEL\' | translate }}\n        </button>\n\n        <button\n            mat-button\n            color="primary"\n            (click)="toggleConfirmation()">\n            {{ \'ADF_FILE_UPLOAD.CONFIRMATION.BUTTON.CONTINUE\' | translate }}\n        </button>\n    </footer>\n</div>\n'},function(e,t,n){var i=n(252);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=""},function(e,t){e.exports='<div [file-draggable]="isDroppable()" id="UploadBorder" class="upload-border"\n     (filesDropped)="onFilesDropped($event)"\n     (filesEntityDropped)="onFilesEntityDropped($event)"\n     (folderEntityDropped)="onFolderEntityDropped($event)"\n     (upload-files)="onUploadFiles($event)"\n     dropzone="" webkitdropzone="*" #droparea>\n    <ng-content></ng-content>\n</div>\n'},function(e,t,n){var i=n(255);e.exports="string"==typeof i?i:i.toString()},function(e,t,n){(e.exports=n(31)()).push([e.i,".upload-border {\n    vertical-align: middle;\n    text-align: center;\n}\n\n.file-draggable__input-focus {\n    color: #2196F3;\n    border: 1px dashed #2196F3;\n}\n",""])},function(e,t){e.exports='<div class="adf-file-uploading-row">\n    <mat-icon\n        mat-list-icon\n        class="adf-file-uploading-row__type">\n        insert_drive_file\n    </mat-icon>\n\n    <span\n        class="adf-file-uploading-row__name"\n        title="{{ file.name }}">\n        {{ file.name }}\n    </span>\n\n    <div\n        *ngIf="file.status === FileUploadStatus.Progress || file.status === FileUploadStatus.Starting"\n        (click)="onCancel(file)"\n        class="adf-file-uploading-row__group adf-file-uploading-row__group--toggle"\n        title="{{ \'ADF_FILE_UPLOAD.BUTTON.CANCEL_FILE\' | translate }}">\n        <span class="adf-file-uploading-row__status">\n            {{ file.progress.loaded | adfFileSize }} / {{ file.progress.total | adfFileSize }}\n        </span>\n\n        <mat-icon\n            mat-list-icon\n            class="adf-file-uploading-row__action adf-file-uploading-row__action--cancel">\n            clear\n        </mat-icon>\n    </div>\n\n    <div\n        *ngIf="file.status === FileUploadStatus.Complete"\n        (click)="onRemove(file)"\n        class="adf-file-uploading-row__group adf-file-uploading-row__group--toggle"\n        title="{{ \'ADF_FILE_UPLOAD.BUTTON.REMOVE_FILE\' | translate }}">\n        <mat-icon\n            mat-list-icon\n            class="adf-file-uploading-row__status adf-file-uploading-row__status--done">\n            check_circle\n        </mat-icon>\n\n        <mat-icon\n            mat-list-icon\n            class="adf-file-uploading-row__action adf-file-uploading-row__action--remove">\n            remove_circle\n        </mat-icon>\n    </div>\n\n    <div\n        *ngIf="file.status === FileUploadStatus.Pending"\n        (click)="onCancel(file)"\n        class="adf-file-uploading-row__group adf-file-uploading-row__group--toggle">\n        <mat-icon\n            mat-list-icon\n            class="adf-file-uploading-row__status adf-file-uploading-row__status--pending">\n            schedule\n        </mat-icon>\n\n        <mat-icon\n            mat-list-icon\n            class="adf-file-uploading-row__action adf-file-uploading-row__action--remove">\n            remove_circle\n        </mat-icon>\n    </div>\n\n    <div\n        *ngIf="file.status === FileUploadStatus.Error"\n        class="adf-file-uploading-row__block adf-file-uploading-row__status--error"\n        title="{{ file.response }}">\n        <mat-icon mat-list-icon>\n            report_problem\n        </mat-icon>\n    </div>\n\n    <div\n        *ngIf="file.status === FileUploadStatus.Cancelled  ||\n            file.status === FileUploadStatus.Aborted ||\n            file.status === FileUploadStatus.Deleted"\n        class="adf-file-uploading-row__block adf-file-uploading-row__status--cancelled">\n        {{ \'ADF_FILE_UPLOAD.STATUS.FILE_CANCELED_STATUS\' | translate }}\n    </div>\n<div>'},function(e,t,n){var i=n(258);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=""},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(3),s=n(20),a=n(82),l=n(84),c=n(47),d=n(81),u=n(83),p=n(85),h=function(){function e(){}return e=i([o.NgModule({imports:[r.CoreModule,s.MaterialModule],declarations:[p.FileDraggableDirective,u.UploadDragAreaComponent,d.UploadButtonComponent,a.FileUploadingDialogComponent,c.FileUploadingListComponent,l.FileUploadingListRowComponent],providers:[{provide:r.TRANSLATION_PROVIDER,multi:!0,useValue:{name:"ng2-alfresco-upload",source:"assets/ng2-alfresco-upload"}}],exports:[p.FileDraggableDirective,u.UploadDragAreaComponent,d.UploadButtonComponent,a.FileUploadingDialogComponent,c.FileUploadingListComponent,l.FileUploadingListRowComponent]})],e)}();t.UploadModule=h},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),a=n(4),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.ngOnChanges=function(t){e.prototype.ngOnChanges.call(this,t),this.recalculateNodes()},t.prototype.recalculateNodes=function(){this.currentNode=this.route[this.route.length-1],this.previousNodes=this.route.slice(0,this.route.length-1).reverse()},t.prototype.open=function(){this.selectbox&&this.selectbox.open()},t.prototype.hasPreviousNodes=function(){return this.previousNodes.length>0},o([s.ViewChild(a.MatSelect),r("design:type","function"==typeof(l=void 0!==a.MatSelect&&a.MatSelect)&&l||Object)],t.prototype,"selectbox",void 0),t=o([s.Component({selector:"adf-dropdown-breadcrumb",template:n(261),styles:[n(262)],encapsulation:s.ViewEncapsulation.None,host:{class:"adf-dropdown-breadcrumb"}})],t);var l}(n(45).BreadcrumbComponent);t.DropdownBreadcrumbComponent=l},function(e,t){e.exports='<ng-container *ngIf="route.length > 0">\n\n    <button\n        tabindex="0"\n        class="adf-dropdown-breadcumb-trigger"\n        (click)="open()"\n        data-automation-id="dropdown-breadcrumb-trigger">\n        <mat-icon [class.isRoot]="!hasPreviousNodes()">folder</mat-icon>\n    </button>\n    <mat-icon class="adf-dropddown-breadcrumb-item-chevron">chevron_right</mat-icon>\n\n    <mat-select\n        *ngIf="hasPreviousNodes()"\n        class="adf-dropdown-breadcrumb-path"\n        tabindex="0"\n        data-automation-id="dropdown-breadcrumb-path" >\n\n        <mat-option\n            *ngFor="let node of previousNodes;"\n            (click)="onRoutePathClick(node, $event)"\n            class="adf-dropdown-breadcrumb-path-option"\n            tabindex="0"\n            data-automation-class="dropdown-breadcrumb-path-option">\n            {{ node.name }}\n        </mat-option>\n    </mat-select>\n\n    <span\n        class="adf-current-folder"\n        [class.isRoot]="!hasPreviousNodes()"\n        data-automation-id="current-folder">{{ currentNode.name }}</span>\n</ng-container>\n'},function(e,t,n){var i=n(263);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=""},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(1),o=n(0);n.n(o);let r=class{constructor(e){this.alfrescoApi=e,this.versions=[],this.isLoading=!0,this.versionsApi=this.alfrescoApi.versionsApi}ngOnChanges(){this.loadVersionHistory()}restore(e){this.versionsApi.revertVersion(this.id,e,{majorVersion:!0,comment:""}).then(this.loadVersionHistory.bind(this))}loadVersionHistory(){this.isLoading=!0,this.versionsApi.listVersionHistory(this.id).then(e=>{this.versions=e.list.entries,this.isLoading=!1})}};i.a([Object(o.Input)()],r.prototype,"id",void 0),r=i.a([Object(o.Component)({selector:"adf-version-list",template:n(265),styles:[n(266)],encapsulation:o.ViewEncapsulation.None,host:{class:"adf-version-list"}})],r)},function(e,t){e.exports='<mat-list class="adf-version-list" *ngIf="!isLoading; else loading_template">\n    <mat-list-item *ngFor="let version of versions">\n        <mat-icon mat-list-icon>insert_drive_file</mat-icon>\n        <h4 mat-line class="adf-version-list-item-name">{{version.entry.name}}</h4>\n        <p mat-line>\n            <span class="adf-version-list-item-version">{{version.entry.id}}</span> -\n            <span class="adf-version-list-item-date">{{version.entry.modifiedAt | date}}</span>\n        </p>\n        <p mat-line class="adf-version-list-item-comment">{{version.entry.versionComment}}</p>\n\n        <mat-menu #versionMenu="matMenu" yPosition="below" xPosition="before">\n            <button mat-menu-item (click)="restore(version.entry.id)"> Restore </button>\n        </mat-menu>\n\n        <button mat-icon-button [matMenuTriggerFor]="versionMenu">\n            <mat-icon>more_vert</mat-icon>\n        </button>\n    </mat-list-item>\n</mat-list>\n\n<ng-template #loading_template>\n    <mat-progress-bar data-automation-id="version-history-loading-bar" mode="indeterminate" color="accent"></mat-progress-bar>\n</ng-template>\n'},function(e,t,n){var i=n(267);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=".adf-version-list .mat-list-item {\n  border-bottom: 1px solid #d8d8d8; }\n\n.adf-version-list-item-version {\n  font-weight: bold; }\n\n.adf-version-list-item-date {\n  opacity: 0.6; }\n\n.adf-version-list-item-comment {\n  opacity: 0.5; }\n"},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(1),o=n(0);n.n(o);let r=class{};i.a([Object(o.Input)()],r.prototype,"node",void 0),r=i.a([Object(o.Component)({selector:"adf-version-manager",template:n(269),styles:[n(270)],encapsulation:o.ViewEncapsulation.None})],r)},function(e,t){e.exports='<div class="adf-new-version-uploader-container" fxLayout="row" fxLayoutAlign="end center">\n    <adf-version-upload [node]="node"></adf-version-upload>\n</div>\n<div class="adf-version-list-container">\n    <adf-version-list [id]="node.id"></adf-version-list>\n</div>\n'},function(e,t,n){var i=n(271);e.exports="string"==typeof i?i:i.toString()},function(e,t){e.exports=".adf-button.upload-new-version {\n  box-shadow: none; }\n\n.adf-new-version-uploader-container {\n  border-bottom: 1px solid #d8d8d8;\n  padding: 16px 0; }\n"},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(1),o=n(0);n.n(o);let r=class{};i.a([Object(o.Input)()],r.prototype,"node",void 0),r=i.a([Object(o.Component)({selector:"adf-version-upload",template:n(273),encapsulation:o.ViewEncapsulation.None,host:{class:"adf-version-upload"}})],r)},function(e,t){e.exports='<adf-upload-button\n    data-automation-id="adf-new-version-file-upload"\n    class="adf-new-version-file-upload"\n    staticTitle="Upload new version"\n    [rootFolderId]="node.parentId"\n    tooltip="Restriction: upload file with the same name to create a new version of it"\n    [versioning]="true">\n</adf-upload-button>\n'},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(3),a=function(){function e(e){this.searchService=e}return e.prototype.search=function(e,t,n,i){e+="*";var o={include:["path","allowableOperations"],skipCount:n,rootNodeId:t,nodeType:"cm:folder",maxItems:i,orderBy:null};return this.searchService.getNodeQueryResults(e,o)},e=i([r.Injectable(),o("design:paramtypes",["function"==typeof(t=void 0!==s.SearchService&&s.SearchService)&&t||Object])],e);var t}();t.ContentNodeSelectorService=a}])});
//# sourceMappingURL=content-services.js.map